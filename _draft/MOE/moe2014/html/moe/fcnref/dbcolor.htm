<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!--	db_color.htm	database coloring expression
!!-->

<!--
!!    MOE Online Manuals
!!    COPYRIGHT (C) 1997-2015
!!        CHEMICAL COMPUTING GROUP INC.  ALL RIGHTS RESERVED.
!!-->

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<script type="text/javascript" 
src="../../include/jsincludes_moe.js"></script>

<link rel="stylesheet" type="text/css"
href="../../include/manstyle.css" />


<meta SEL:syntax Database Coloring Expression>

<title>Database Coloring Expression</title>
</head>

<body>
<div id="MoeHeader"></div>
<noscript>
	<span class="warning">Warning: JavaScript is disabled. This page will not display correctly.</span>
	<h1 class="title">MOE Documentation</h1>
	<hr noshade="noshade" />
	<style>.LaTeX {color: #C08080;}</style>
</noscript>

<h2>Syntax</h2>

<p>
<blockquote>
<table border="0">
<tr>
    <td valign="top"><i>expression</i></td>
    <td width="10"></td>
    <td>
	: <i>color cmp number</i><br />
	: <i>color</i> <tt>[]</tt><br />
	: <i>color</i> 
	    <b>{</b> <tt>[</tt> <b>|</b> <tt>(</tt> <b>}</b><sup>1</sup>
	    <i>number</i><tt>,</tt> <i>number</i>
	    <b>{</b> <tt>]</tt> <b>|</b> <tt>)</tt> <b>}</b><sup>1</sup><br />
	: <i>color</i> <tt>:</tt> <i>color</i> 
	    <b>{</b> <tt>[</tt> <b>|</b> <tt>(</tt> <b>|</b> <tt><</tt> <b>}</b><sup>1</sup>
	    <i>number</i><tt>,</tt> <i>number</i> 
	    <b>{</b> <tt>]</tt> <b>|</b> <tt>)</tt> <b>|</b> <tt>></tt> <b>}</b><sup>1</sup><br />
	: <i>color</i> <b>{</b> <tt>==</tt> <b>|</b> <tt>!=</tt> 
	    <b>}</b><sup>1</sup> <i>pattern</i><br />
	: <tt>{</tt><i>fieldname</i><tt>}</tt><br />
	: <i>color</i><br />
	
    </td>
</tr>

<tr>
    <td valign="top"><i>color</i></td>
    <td width="10"></td>
    <td>
	: <b>{</b> <tt>0x</tt> <b>|</b> <tt>#</tt> <b>}</b><sup>1</sup>
		<b>{</b> <tt>0</tt> <b>|</b> <tt>1</tt> <b>|</b> ... <b>|</b> <tt>9</tt>
		<b>|</b> <tt>a</tt> <b>|</b> <tt>b</tt> <b>|</b> ... <b>|</b> <tt>f</tt>
		<b>|</b> <tt>A</tt> <b>|</b> <tt>B</tt> <b>|</b> ... <b>|</b> <tt>F</tt>
	<b>}<sup>+</sup></b><br />
	: <b>{</b> <i>digit</i> <b>}<sup>+</sup></b><br />
	: <b>{</b> <tt>dark</tt> <b>|</b> <tt>dark_</tt> <b>}</b><i>colorname</i><br />
    </td>
</tr>

<tr>
    <td><i>cmp</i> </td>
    <td></td>
    <td>:
	<b>{</b> <tt>&lt;</tt>
	<b>|</b> <tt>&gt;</tt>
	<b>|</b> <tt>&lt;=</tt>
	<b>|</b> <tt>&gt;=</tt>
	<b>|</b> <tt>==</tt>
	<b>|</b> <tt>!=</tt> 
	<b>}</b><sup>1</sup>
    </td>
</tr>

<tr>
    <td><i>number</i> </td>
    <td></td>
    <td>
 	: <b>{</b> <tt>+</tt> <b>|</b> <tt>-</tt> 
	<b>}</b> <b>{</b> <i>digit</i> <b>}<sup>+</sup></b>
	<tt>.</tt> <b>{</b> <i>digit</i> <b>}<sup>+</sup></b>
	<br />
 
    </td>
</tr>

<tr>
    <td><i>digit</i> </td>
    <td></td>
    <td>:  
 	 <b>{</b> <tt>0</tt>
	<b>|</b> <tt>1</tt>
	<b>|</b> ...
	<b>|</b> <tt>9</tt>
	<b>}</b> <sup>1</sup>
 
    </td>
</tr>

<tr>
    <td valign="top"><i>colorname</i></td>
    <td width="10"></td>
    <td>
	: <i>black<br />
	: <i>white</i><br />
	: <i>red</i><br />
	: <i>green</i><br />
	: <i>blue</i><br />
	: <i>yellow</i><br />
	: <i>orange</i><br />
	: <i>pink</i><br />
	: <i>brown</i><br />
	: <i>purple</i><br />
	: <i>magenta</i><br />
	: <i>gray</i><br />
	: <i>cyan</i><br />
    </td>
</tr>
</table>
</blockquote>

<h2>Description</h2>
<p>Coloring expression syntax is used to define the coloring rules
for coloring database fields displayed in the Database Viewer.
These rules are saved to the database in the database environment. 
Expressions can be entered via the <a href="../../mdb/db.htm#ColoringFields">
Database Field Coloring Panel</a> or by explicitly storing the
expression into the database using the 
<a href="db_envir.htm#db_SetEnv" class="svl">db_SetEnv</a> and
<a href="db_envir.htm#db_SetFieldEnv" class="svl">db_SetFieldEnv</a>
SVL commands. The database
needs to be writable for the expression to be saved and therefore for coloring
to be possible.
</p>

<p>
The following notation is used to describe coloring expression syntax and syntactic
categories.
The name of a category is printed in italics, e.g. <i>lvalue</i>.
Keywords and symbols are printed in teletype, e.g. <tt>loop</tt>
or <tt>[]</tt>.
Each category is defined as a list of syntactic patterns composed
of expression keywords or symbols, and of names of other categories (as in BNF
notation). For example,
<i>lvalue</i> : <i>identifier</i> <tt>[</tt> <i>expression</i> <tt>]</tt> 
means &quot;an lvalue can be an identifier followed by a bracketed expression.&quot;
Bold braces are used to apply a special rule to the part of the pattern
inside the braces:

<ul>
<li><b>{</b>...<b>}</b> specifies an optional pattern, e.g.
    <span class="nobr"><b>{</b><em>for</em><b>}</b> <tt>loop</tt></span>
</li>

<li><b>{</b>...<b>}<sup>*</sup></b> specifies a sequence of zero or more
    repetitions, e.g.
    <span class="nobr"><b>{</b><em>while</em><b>}<sup>*</sup></b> <tt>loop</tt></span>
</li>

<li><b>{</b>...<b>}<sup>+</sup></b> specifies a sequence of one or more
    repetitions, e.g.
    <span class="nobr"><b>{</b><em>digit</em><b>}<sup>*</sup></b></span>
</li>

<li><b>{</b>...<b>|</b>...<b>}</b> and
    <b>{</b>...<b>|</b>...<b>}<sup>1</sup></b> specify
    (optional and compulsory) alternative patterns, e.g.
    <span class="nobr"><b>{</b><tt>local</tt><b> | </b><tt>global</tt><b>}</b>
	<tt>function</tt></span>
</li>
</ul>

<p><b>Color Codes</b>.
Color can be specified either using the predefined <i>colorname</i> or 
its hex/decimal value. For example,
<pre>
    red, darkgreen, #FF0000, 0x3AFFFFF, 16711680
</pre>
 
<p><b>Numeric Comparison</b>. This type of expression can only be used on
numeric fields. For example,   	
<pre>
    red &lt; 3		cells whose value is smaller than 3 are colored red 
    blue &gt;= 3	cells whose value is bigger than or equal to 6 are colored blue
</pre>

<p><b>Color Range</b>. Square brackets and parentheses are used to define a
range of values to be colored. A square bracket means that the endpoint
is included, whereas
a parenthesis means that the endpoint is excluded. Values not included in the
range are not colored.  For example,
<pre>
    yellow [3, 6)	cells whose value is bigger or equal to 3 but less than 6 are colored yellow
</pre>

<p><b>Gradient Color</b>. Two color codes delimited by a colon and followed by 
min and max values are used to specify that a color gradient is to be
calculated over a range of values. Colors
are calculated using linear interpolation.  If angle brackets are used,
then values beyond the endpoints of
the range are assigned the colors of the endpoints.
For example,
<pre>
    red:green [1, 10)	gradient color from red to green if cell value is &gt;=1 and &lt;10
    white:black &lt;1, 10&gt;	gradient color from white to black if cell value is &gt;=1 and &lt;=10;
			in addition, cell values &lt;1 will be colored white and cell values &gt;10
			will be colored black
</pre>

<p><b>Pattern Match</b>. Character type fields can be colored using match
patterns(see <a href="../../svl/fcnref/findetc.htm">findmatch</a>).
For example,
<pre>
    brown == "*lig*"	color cell brown if its value contains string "lig"
    orange != "@##"	color cell orange if its value is not a character followed by two digits
</pre>

<p><b>Inheritance</b>. Field color can be inherited from other fields. 
The reference field name is given within braces; no recursive 
dependencies will be evaluated. Color inheritance is useful for coloring
molecule fields, which cannot be colored based on cell value. For example,
<pre>
    {pIC50}		will color target field using the same coloring rule as the 'pIC50' field
</pre>

<p><b>Color []</b>. This expression is used to denote color for empty cells.

<p><b>Default</b>. Default color can be specified with just a color code. 
Usually the default color should be entered at the end (see <b>Precedence
on Multiple Rules</b>).

<p><b>Precedence on Multiple Rules</b>. When there are multiple coloring rules, 
precedence is taken from left to right. For example,
<pre>
    red &lt;= 3 green [3, 9)	cell of value 3 will be colored red instead of green
    blue yellow []		all cells, even empty ones, will be colored blue
</pre>

<a name="See_Also"></a><h2>See Also</h2>

<a href="../../mdb/db.htm#ColoringFields">Database Field Coloring</a><br />
<a href="db_envir.htm">Database Environment Functions</a><br />

<noscript>
	<hr noshade="noshade" />
	<font size="2"> Copyright &copy; 1997&ndash;2015
	<a href="http://www.chemcomp.com">Chemical Computing Group Inc.</a> </font>
</noscript>
<div id="MoeFooter"></div>
</body>
</html>
