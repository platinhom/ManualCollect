<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!--
!!    MOE 2010.10 On-Line Manuals
!!    COPYRIGHT (C) 2010
!!        CHEMICAL COMPUTING GROUP INC.  ALL RIGHTS RESERVED.
!!-->

<!--
!!	install.htm
!!
!!	06-oct-2010 (cc) - minor edits
!!	10-jun-2010 (al) -accumfp
!!	13-mar-2009 (al) ~/svl directory always loaded (not just "default")
!!	03-oct-2008 (jd) disk space requirements, vista, moved problems to faq
!!	24-sep-2008 (kk) copy edit
!!	28-aug-2007 (jd) need to restart MOE after setting jvm.commandOptions
!!	24-aug-2007 (jd) removed installs, added rc.local info
!!	18-dec-2006 (sb) 'installs -r' and lmtools (added css tables)
!!	08-jun-2005 (jd) updated for the installer
!!	18-may-2005 (jd) updated Can't check out license (##) section
!!	16-apr-2003 (al) change link to MicroSoft SQL
!!	14-apr-2003 (al) subsection on starting lmgrd using scripts
!!-->

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css"
href="../manstyle.css" />


<style type="text/css">
table {
    margin: 0 auto;
    border: solid thin grey;
}
table td {
    border: solid thin grey;
    padding: 2px 1em;
}
table th { background-color: #cccccc; }
table.noborder, table.noborder td { border: none; }
</style>

<title>Installing and Running MOE</title>

<meta SVL:command_line_switch -boot, -exec, -ffdefault, -forcefield, -gfx>
<meta SVL:command_line_switch -gfxvisual, -lic, -licwait, -nolicwait>
<meta SVL:command_line_switch -mpu, -mpulog, -load, -opengl, -root, -run>
<meta SVL:command_line_switch -script, -setenv, -std, -stereo, -nostereo>
<meta SVL:command_line_switch -test, -tmp, -tty, -notty, -x11>
<meta SVL:command_line_switch -fsaa, -nofsaa, -fsaa_mode>
<meta SVL:command_line_switch -noaccum, -accum, -accumfp>

<meta panel License Info />
</head>

<body bgcolor="#ffffff">
<a href="../index.htm"><img src="../images/logo.gif"
alt="CCG Logo" align="right" width="174" height="55" border="0" /></a>
<h4>MOE 2010.10</h4>
<h2>Installing and Running MOE</h2>
<hr noshade="noshade" />

<ul>
<li><a href="#Overview">Overview</a>
<li><a href="#Architecture">Architectures</a>
<li><a href="#InstallWindows">Windows</a>
    <ul>
    <li><a href="#CopyWindows">Step 1: Install MOE from the CD-ROM</a>
    <li><a href="#KeyWindows">Step 2: Install the Software Key</a>
	<ul>
	<li><a href="#KeyEvalWindows">Evaluation License</a>
	<li><a href="#KeyNodeWindows">Node-Locked License</a>
	<li><a href="#KeyFloatWindows">Network Floating License</a>
	    <ul>
	    <li><a href="#StartlmgrdWindows">Starting the License Manager</a>
	    <li><a href="#AutolmgrdWindows">Launching the License Manager Automatically</a>
	    <li><a href="#StoplmgrdWindows">Stopping the License Manager</a>
	    </ul>
	</ul>
    </ul>
</li>

<li><a href="#InstallMacOSX">Mac OS X</a>
    <ul>
    <li><a href="#CopyMacOSX">Step 1: Install MOE from the CD-ROM</a>
    <li><a href="#KeyMacOSX">Step 2: Install the Software Key</a>
	<ul>
	<li><a href="#KeyEvalMacOSX">Evaluation License</a>
	<li><a href="#KeyNodeMacOSX">Node-Locked License</a>
	<li><a href="#KeyFloatMacOSX">Network Floating License</a>
	    <ul>
	    <li><a href="#StartlmgrdMacOSX">Starting the License Manager</a>
	    <li><a href="#AutolmgrdMacOSX">Launching the License Manager Automatically</a>
	    <li><a href="#StoplmgrdMacOSX">Stopping the License Manager</a>
	    </ul>
	</ul>
    </ul>
</li>
<li><a href="#InstallUnix">Unix (Linux, Irix, Solaris)</a>
    <ul>
    <li><a href="#CopyUnix">Step 1: Install MOE from the CD-ROM</a>
    <li><a href="#KeyUnix">Step 2: Install the Software Key</a>
	<ul>
	<li><a href="#KeyEvalUnix">Evaluation License</a>
	<li><a href="#KeyNodeUnix">Node-Locked License</a>
	<li><a href="#KeyFloatUnix">Network Floating License</a>
	    <ul>
	    <li><a href="#StartlmgrdUnix">Starting the License Manager</a>
	    <li><a href="#StoplmgrdUnix">Stopping the License Manager</a>
	    <li><a href="#AutolmgrdUnix">Launching the License Manager Automatically</a>
		<ul>
		    <li><a href="#AutoLinux">Linux</a>
		    <li><a href="#AutoIrix">Irix</a>
		</ul>
	    </ul>
	</ul>
    </ul>
</li>
<li><a href="#Delete">Deleting MOE</a>

<li><a href="#JDBC">Installing Java and JDBC Drivers</a>
    <ul>
    <li><a href="#Java">Installing Java</a>
    <li><a href="#JVM_OPTS">Options for Starting the JVM</a>
    <li><a href="#SVL_JVM">Environment Variables</a>
    <li><a href="#Drivers">Installing the JDBC Drivers</a>
    </ul>

<li><a href="#Run">Running MOE</a>
    <ul>
    <li><a href="#RunGUI">Running MOE</a>
    <li><a href="#RunBatch">Running MOE/batch</a>
    <li><a href="#RunSwitch">Command Line Switches</a>
    <li><a href="#RunEnv">Environment Variables</a>
    </ul>

<li><a href="#LicenseInfo">License Information</a>
<li><a href="#Documentation">MOE Documentation</a>
<li><a href="#Trouble">Common Problems</a>
</li>

</ul>
<!-- =========================== OVERVIEW =========================== -->


<a name="Overview"></a>
<h2>Overview</h2>

<p>
The following materials are required for the installation of MOE:

<ul>
<li> A MOE CD-ROM
<li> A computer with a CD-ROM drive and at least 1Gb of free space
<li> A software key (either hard copy or e-mail) issued by CCG
</ul>

<p>
Installing MOE is relatively simple and consists of two steps:
1) installing the software from the CD-ROM; and 2) configuring the software
key to enable the software.  If either of these steps is not performed,
the software will not work.  If you do not have a software key, first
install the software and related licensing utilities, then contact
Chemical Computing Group to obtain a key.  Detailed information about the
licensing process can be found in the section about software keys.

<p>
A single copy of MOE can be shared by several people (even if they are
using different computer architectures) if it is installed on a network
drive.  To prevent against accidental overwriting of distribution files,
we recommend that the directory where MOE has been installed be made
read-only and that all customized or updated SVL programs subsequently released
by CCG be installed in the <nobr><tt>$MOE/lib/svl/patch</tt></nobr>
and <nobr><tt>$MOE/lib/svl/custom</tt></nobr> directories dedicated
for that purpose.  The <nobr><tt>$MOE/lib/svl/patch</tt></nobr> directory is
intended for updates to the standard MOE distribution files.
The <nobr><tt>$MOE/lib/svl/custom</tt></nobr> directory is intended for
customizations that are to be made available to all users.
Within the <tt>custom</tt> directory there is a subdirectory
called <tt>run</tt> in which runnable custom files visible to
all users can be stored.  More details can be found in the
chapter on
<a href="../appendix/moeconfig.htm">Configuring&nbsp;and&nbsp;Customizing&nbsp;MOE</a>.
</p>

<p>
Notes:

<ul>

<li>On UNIX systems, root permission is not required for installation.

<p>
<li>MOE will not copy files into any directory other than the installation
directory (i.e. nothing to the Windows directories). However, an RC
file, or user resource configuration file, will be written in the home
directory of each MOE user after first use.  The user file is
<tt>$HOME/moe-rc</tt> on Windows systems and <tt>$HOME/.moe-rc</tt> on
Unix systems. 

<p>
<li>You can change your mind about the installation directory location
or name after MOE has been installed: just rename or copy the directory.

<p>
<li>Once the MOE software files have been copied from the CD-ROM, they can
be copied to other machines with a standard copy command; the CD-ROM is
not required.

<p>
<li>
In most cases, highest performance will be achieved if MOE is installed on
the computer on which it will be running; the disadvantage of multiple
installation sites is that upgrades, patches and enhancements have to be
applied to each installation.

</ul>

<a name="Architecture"></a>
<h2>Architectures</h2>

<p>MOE is a cross-platform application that has been designed to operate on
desktop equipment without limiting either the size of the molecule under study
or the kind of calculation that can be performed.  Special purpose graphics
workstations or terminals are not required to run MOE effectively.  The
following table shows the currently supported platforms:

<p>
<table>
<tr>
<th>Architecture</th>
<th>Operating System</th>
<th>Graphics</th>
<th>Code</th>
</tr>

<tr>
<td>Intel
<td>Windows 2000/XP/Vista/7
<td>OpenGL
<td><tt>i4w9</tt>
</tr>

<tr>
<td>Intel
<td>Linux
<td>OpenGL, X11
<td><tt>lnux</tt>
</tr>

<tr>
<td>SGI/MIPS
<td>IRIX 6.x
<td>OpenGL, X11
<td><tt>sgi4</tt>
</tr>

<tr>
<td>Sun/SPARC
<td>Solaris 8,10
<td>OpenGL, X11
<td><tt>sun4</tt>
</tr>

<tr>
<td>Sun/AMD
<td>Solaris 10
<td>OpenGL, X11
<td><tt>sx86</tt>
</tr>

<tr>
<td>Mac/PowerPC
<td>OS X (10.4 and higher)
<td>OpenGL, X11
<td><tt>mppc</tt>
</tr>

<tr>
<td>Mac/Intel
<td>OS X (10.4 and higher)
<td>OpenGL, X11
<td><tt>mx86</tt>
</tr>


</table>


<!-- ===================== COPYING MOE FROM THE CDROM ===================== -->
<a name="InstallWindows"></a>
<h2>Windows</h2>
<a name="CopyWindows"></a>
<h3>Step 1: Install MOE from the CD-ROM</h3>

This procedure applies to all the members of the Microsoft Windows
family of operating systems: <nobr>Windows 2000</nobr>, 
<nobr>Windows XP</nobr>, <nobr>Windows Vista</nobr> and 
<nobr>Windows 7.</nobr>

<p>
<font color="#ff0000"><b>Important</b></font>&nbsp;&nbsp;
If a <tt>moe</tt> directory already exists on your system, it is likely that
a previous version is currently installed and that you are upgrading to a new
version.
<b>Do not delete the old version until the new one has been
installed successfully. Rename the old directory before doing the
install and remove it after a successful installation.
</b>
For example, if the currently installed MOE
is version 2008.10, then rename the <tt>moe</tt> directory to
<tt>moe2008_10</tt>.

<p>
First, begin by inserting the MOE CD-ROM in the CD-ROM drive. We will assume
that the CD-ROM drive letter is <tt>d:</tt>
(you can find the drive letter using the Windows Explorer). Three installation
scenarios are possible:

<ol>
<li>
If the AutoPlay feature of your CD-ROM drive is enabled, the MOE installer
is automatically launched when the disk is inserted into the drive.
Follow the instructions on the screen to install MOE.
<p>
<li>
Open the Windows Explorer (Start | My Computer) and double-click on the
CD-ROM drive. If the AutoPlay feature of your CD-ROM drive is enabled,
the MOE installer is automatically launched. Otherwise, a list of
file is displayed. Double-click on the file named <tt>install.bat</tt> to
start the MOE installer. Follow the instructions on the screen to install MOE.
<p>
<li>
If all else fails, the MOE installer can be launched manually by opening a
Command Prompt and typing:
<pre>
    C:\Documents and Settings\username&gt; <b>d:</b>

    D:\&gt;<b>dir</b>
     Volume in drive D is MOE 2010.10
     Volume Serial Number is 9261-077E

     Directory of D:\

    07/10/2010  03:24 PM               120 Autorun.inf
    07/10/2010  03:18 PM    &lt;DIR&gt;          Disk1
    07/10/2010  03:24 PM             1,552 install.bat
    07/10/2010  03:24 PM             4,901 install.sh
		   3 File(s)          6,453 bytes
		   1 Dir(s)               0 bytes free

    D:\&gt;<b>cd Disk1\InstData\Windows\VM</b>

    D:\Disk1\InstData\Windows\VM&gt;<b>install.exe</b>
</pre>
<p>
Follow the instructions on the screen to install MOE.
</ol>

<a name="KeyWindows"></a>
<h3>Step 2: Install the Software Key</h3>
<ul>
  <li><a href="#KeyEvalWindows">Evaluation License</a>
  <li><a href="#KeyNodeWindows">Node-Locked License</a>
  <li><a href="#KeyFloatWindows">Network Floating License</a>
	<ul>
	  <li><a href="#StartlmgrdWindows">Starting the License Manager</a>
	  <li><a href="#AutolmgrdWindows">Launching the License Manager Automatically</a>
	  <li><a href="#StoplmgrdWindows">Stopping the License Manager</a>
  </ul>
</ul>

<p>
The MOE license protection mechanism makes use of a license file
containing expiration dates, version restrictions, and possibly various
other license restrictions.  There are two steps required to install the
software key:

<ol>
<li>
The <tt>license.dat</tt> file in each installed MOE root directory must be
updated with the contents that you have been given by CCG (either by hard
copy or e-mail).  You can use any ASCII text editor (such as DOS
<tt>edit</tt>, or <tt>notepad</tt>).

<p>
<li>
The FlexLM license manager <tt>lmgrd</tt> must be configured and run.  This
step is not required for evaluation licenses and node-locked licenses.  It
is only required for network floating licenses.

</ol>

<p>
The following command can be used to validate the key installation:

<p>
<pre>
    c:\&gt; <b>c:\moe\bin-i4w9\moebatch -exec "LicenseInfo[];"</b>
</pre>

<p>
After a few seconds, you should see something like:

<pre>
     Feature: moe
     Version: 2010.10
     Expires: 31-dec-2010
         Key: 4E763DB0C667
      Server: isis.chemcomp.com
      Tokens: 3
</pre>

<p>
The <tt>Server</tt> field can be used to verify that you are connecting
to the correct server. See the
<a href="../moe/fcnref/licinfo.htm">LicenseInfo</a> function reference for
details about the software key information.

<a name="KeyEvalWindows"></a>
<h3>Evaluation License</h3>

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
An evaluation license file contains text similar to:

<pre>
    FEATURE moe chemcompd 2010.10 31-dec-2010 uncounted C0F256BA6F18 \
        HOSTID=DEMO
</pre>

<p>
The items in the license file specify the MOE software (<tt>moe</tt>),
the <tt>chemcompd</tt> class, the highest version of the software enabled
by the software key (2010.10), the expiration date of the key (December 31,
2010), the maximum number of copies that can be run simultaneously (in this
case, no limit), an authentication code (<tt>C0F256BA6F18</tt>) and a host ID
indicating that this is an evaluation license (<tt>HOSTID=DEMO</tt>).

<p>
No further configuration is required for evaluation licenses.

<a name="KeyNodeWindows"></a>
<h3>Node-Locked License</h3>

<p>
To obtain a node-locked license (a license restricting the use of MOE to a
particular computer) from Chemical Computing Group, you must first install
the MOE software from the CD-ROM and then determine the FlexLM host ID of the
computer on which you intend to run MOE by typing the following line:

<p>
<ol>
<li> Execute program <tt>lmtools.exe</tt> located in directory
<tt>c:\moe\bin-i4w9</tt>.
<li> Press the <b>System Settings</b> tab.
<li> Press the <b>Save HOSTID Info to a File</b> button to record the
license server information into a file. Forward the file to CCG.
</ol>

<p>
With this information, CCG can issue a node-locked license.  Once issued,
you can install the license as follows.

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
A node-locked license file contains text similar to:

<pre>
    FEATURE moe chemcompd 2010.10 31-dec-2010 uncounted A7B8D85C5DDA \
        HOSTID=690c40d0
</pre>

<p>
The items in the license file specify the MOE software (<tt>moe</tt>),
the <tt>chemcompd</tt> class, the highest version of the software enabled
by the software key (2010.10), the expiration date of the key (December 31,
2010), the maximum number of copies that can be run simultaneously (in this
case, no limit), an authentication code (<tt>A7B8D85C5DDA</tt>) and a host ID
indicating that MOE can only run on the computer with FlexLM host ID 690c40d0
(as returned by <tt>lmtools.exe</tt>). <b>Note:</b> The MOE software itself
need not be installed on this machine.

<p>
No further configuration is required for node-locked licenses.

<a name="KeyFloatWindows"></a>
<h3>Network Floating License</h3>

<p>
To obtain a network floating license from Chemical Computing Group, you
must first install the MOE software from the CD-ROM.  Next, you must
choose a License Server computer.  The License Server should be on a
computer network accessible by the computers on which you want to run
MOE.  The License Server computer will run the <tt>lmgrd</tt> license
dispenser program.  It is a good idea to install the MOE software on the
License Server itself.
<p>
Once a License Server computer has been chosen,
log on to it and use the following instructions to determine its
hostname and FlexLM host ID.

<p>
<ol>
<li> Execute program <tt>lmtools.exe</tt> located in directory
<tt>c:\moe\bin-i4w9</tt>.
<li> Press the <b>System Settings</b> tab.
<li> Press the <b>Save HOSTID Info to a File</b> button to record the
license server information into a file. Forward the file to CCG.
</ol>

<p>
With this information, CCG can issue a network floating license.  Once issued,
you can install the license as follows.

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
The resulting <tt>license.dat</tt> file should look similar to:

<pre>
    SERVER hostname 693465a5 7788
    DAEMON chemcompd $MOE/bin/chemcompd
    FEATURE moe chemcompd 2010.10 31-dec-2010 4 F2FCD82496BD
</pre>

<p>
The <tt>SERVER</tt> line should contain the host name and FlexLM host ID that
you supplied to CCG; if not, then the license will not work.  You must now
edit the <tt>DAEMON</tt> line to replace <tt>$MOE</tt> with the
complete path to the MOE root directory where MOE is installed.  Assuming
that the directory is <tt>c:\moe</tt>, the final license file
should look like:

<p>
<pre>
    SERVER hostname 693465a5 7788
    DAEMON chemcompd c:\moe\bin-i4w9\chemcompd
    FEATURE moe chemcompd 2010.10 31-dec-2010 4 F2FCD82496BD
</pre>

<p>
The <tt>FEATURE</tt> items in the license file specify the MOE software
(<tt>moe</tt>), the <tt>chemcompd</tt> class, the highest version of the
software enabled by the software key (2010.10), the expiration date of the key
(December 31, 2010), the number of tokens available (in this case, 4) and an
authentication code (<tt>F2FCD82496BD</tt>).

<p>
You are now ready to run the FlexLM License Manager.

<a name="StartlmgrdWindows"></a>
<h4>Starting the License Manager</h4>

<p>
Before running MOE, you must run the <tt>lmgrd</tt> license dispenser on the
chosen License Server computer.  If you are already running the FlexLM license
manager for other software products, you can add the contents of the MOE
<tt>license.dat</tt> license file to your existing master license file (add
only the <tt>DAEMON</tt> and <tt>FEATURE</tt> lines). For the change to take
effect, you will need to stop and restart the license manager program
<tt>lmgrd</tt>.  If you are not running FlexLM, log on to the License Server
(no need to be Administrator) and type:

<p>
Assuming the MOE root directory to be
<tt>c:\moe</tt>):

<pre>
    c:\&gt; <b>c:\moe\bin-i4w9\lmgrd -c c:\moe\license.dat -l c:\lmgrd.log</b>
</pre>

<p>
<tt>lmgrd.log</tt> is a log file written by the license manager which contains
information on software usage and possible problems.

<a name="AutolmgrdWindows"></a>
<h4>Launching the License Manager Automatically</h4>

<p>It is a good idea to have the above <tt>lmgrd</tt> command issued in the
boot sequence of the License Server computer.

<p>
On <nobr>Windows 2000</nobr>, <nobr>Windows XP,</nobr>, 
<nobr>Windows Vista</nobr> and <nobr>Windows 7.</nobr>, 
the license dispenser can be registered as a "Windows Service" that will 
automatically start. It is recommended that the LMTools application be used 
to manage the Service properties:

<ol>
<li>Execute program <tt>lmtools.exe</tt> located in directory <tt>c:\moe\bin-i4w9</tt>.
<li>Press the <b>Config Services</b> tab.
<li>Enter the <b>Path to the lmgrd.exe file</b>, <b>Path to the license
file</b> and the <b>Path to the debug log file</b> information.
<li>Check <b>Use Service</b> then check <b>Start Server at Power Up</b>
<li>Press <b>Save Service</b> (noting the name of the service).
<li>Press the <b>Start/Stop/Reread</b> tab.
<li>Select the name of the <b>Installed Service</b> just set.
<li>Press <b>Start Server</b>.
</ol>

<p>
The Server can be halted when it is no longer needed by going to the
<b>Start/Stop/Reread</b> tab and pressing the <b>Stop Server</b> button.


<a name="StoplmgrdWindows"></a>
<h4>Stopping the License Manager</h4>

<p>
The <tt>lmgrd</tt> program can be stopped by following these steps:

<p>
<ol>
<li>Execute program <tt>lmtools.exe</tt> located in directory <tt>c:\moe\bin-i4w9</tt>.
<li>Press the <b>Start/Stop/Reread</b> tab.
<li>Select the name of the <b>Installed Service</b>.
<li>Press <b>Stop Server</b>.
</ol>

<p>
MOE uses version 10.8.5.0 of <tt>lmgrd</tt>.  You do not need to be
<tt>Administrator</tt> to run <tt>lmgrd</tt>.


<a name="InstallMacOSX"></a>
<h2>Mac OS X</h2>
<a name="CopyMacOSX"></a>
<h3>Step 1: Install MOE from the CD-ROM</h3>

<p>
This procedure applies to all the members of the Mac&nbsp;OS&nbsp;X
family of computers: PowerPC and IntelMac.

<p>
<font color="#ff0000"><b>Important</b></font>&nbsp;&nbsp;
If a <tt>moe</tt> directory already exists on your system, it is likely that
a previous version is currently installed and that you are upgrading to a new
version.
<b>Do not delete the old version until the new one has been installed
successfully. Rename the old directory before doing the install and remove it
after a successful installation.</b>
For example, if the currently installed MOE is version 2008.10, then rename the
<tt>moe</tt> directory to <tt>moe2008_10</tt>.

<ol>
<li>
Insert the MOE CD-ROM in the drive and mount the directory (on many systems
this is done automatically).
We will assume that the CD-ROM is mounted on <tt>/Volumes/MOE_2010_10</tt>.

<p>
<li>
Open a command shell and launch the installer. Type:
<pre>
    user% <b>sh /Volumes/MOE_2010_10/install.macosx</b>
</pre>
<p>
Follow the instructions on the screen to install MOE. You will need write
permission into the installation directory; however, you do not need
<tt>root</tt> privileges on the computer.
</ol>

<p>
<b>Note:</b> You can later change your mind about the installation
directory location or name: just copy or move the directory.

<a name="KeyMacOSX"></a>
<h3>Step 2: Install the Software Key</h3>

    <ul>
    <li><a href="#KeyEvalMacOSX">Evaluation License</a>
    <li><a href="#KeyNodeMacOSX">Node-Locked License</a>
    <li><a href="#KeyFloatMacOSX">Network Floating License</a>
	<ul>
	<li><a href="#StartlmgrdMacOSX">Starting the License Manager</a>
	<li><a href="#AutolmgrdMacOSX">Launching the License Manager Automatically</a>
	<li><a href="#StoplmgrdMacOSX">Stopping the License Manager</a>
	</ul>
  </ul>


<p>
The MOE license protection mechanism makes use of a license file
containing expiration dates, version restrictions, and possibly various
other license restrictions.  There are two steps required to install the
software key:

<ol>
<li>
The <tt>license.dat</tt> file in each installed MOE root directory must be
updated with the contents that you have been given by CCG (either by hard
copy or e-mail).  You can use any ASCII text editor (such as <tt>TextEdit</tt>
or <tt>TextWrangler</tt>).

<p>
<li>
The FlexLM license manager <tt>lmgrd</tt> must be configured and run.  This
step is not required for evaluation licenses and node-locked licenses.  It
is only required for network floating licenses.

</ol>

<p>
The following command can be used to validate the key installation:

<pre>
    user% <b>/Applications/moe/bin/moebatch -exec "LicenseInfo[];"</b>
</pre>

<p>
After a few seconds, you should see something like:

<pre>
     Feature: moe
     Version: 2010.10
     Expires: 31-dec-2010
         Key: 4E763DB0C667
      Server: isis.chemcomp.com
      Tokens: 3
</pre>

<p>
The <tt>Server</tt> field can be used to verify that you are connecting
to the correct server. See the
<a href="../moe/fcnref/licinfo.htm">LicenseInfo</a> function reference for
details about the software key information.

<a name="KeyEvalMacOSX"></a>
<h3>Evaluation License</h3>

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
An evaluation license file contains text similar to:

<pre>
    FEATURE moe chemcompd 2010.10 31-dec-2010 uncounted C0F256BA6F18 \
        HOSTID=DEMO
</pre>

<p>
The items in the license file specify the MOE software (<tt>moe</tt>),
the <tt>chemcompd</tt> class, the highest version of the software enabled
by the software key (2010.10), the expiration date of the key (December 31,
2010), the maximum number of copies that can be run simultaneously (in this
case, no limit), an authentication code (<tt>C0F256BA6F18</tt>) and a host ID
indicating that this is an evaluation license (<tt>HOSTID=DEMO</tt>).

<p>
No further configuration is required for evaluation licenses.

<a name="KeyNodeMacOSX"></a>
<h3>Node-Locked License</h3>

<p>
To obtain a node-locked license (a license restricting the use of MOE to a
particular computer) from Chemical Computing Group, you must first install
the MOE software from the CD-ROM and then determine the FlexLM host ID of the
computer on which you intend to run MOE by typing the following line:

<pre>
    user% <b>/Applications/moe/bin/lmutil lmhostid</b>
    lmutil - Copyright (c) 1989-2004 by Macrovision Corporation. All rights reserved.
    The FLEXlm host ID of this machine is "00b0d0240936"
</pre>

<p>
With this information, CCG can issue a node-locked license.  Once issued,
you can install the license as follows.

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
A node-locked license file contains text similar to:

<pre>
    FEATURE moe chemcompd 2010.10 31-dec-2010 uncounted A7B8D85C5DDA \
        HOSTID=690c40d0
</pre>

<p>
The items in the license file specify the MOE software (<tt>moe</tt>),
the <tt>chemcompd</tt> class, the highest version of the software enabled
by the software key (2010.10), the expiration date of the key (December 31,
2010), the maximum number of copies that can be run simultaneously (in this
case, no limit), an authentication code (<tt>A7B8D85C5DDA</tt>) and a host ID
indicating that MOE can only run on the computer with FlexLM host ID 690c40d0
(as returned by <tt>lmutil</tt>). <b>Note:</b> The MOE software itself
need not be installed on this machine.

<p>
No further configuration is required for node-locked licenses.

<a name="KeyFloatMacOSX"></a>
<h3>Network Floating License</h3>

<p>
To obtain a network floating license from Chemical Computing Group, you
must first install the MOE software from the CD-ROM.  Next, you must
choose a License Server computer.  The License Server should be on a
computer network accessible by the computers on which you want to run
MOE.  The License Server computer will run the <tt>lmgrd</tt> license
dispenser program.  It is a good idea to install the MOE software on the
License Server itself.
<p>
Once a License Server computer has been chosen,
log on to it and use the following instructions to determine its
hostname and FlexLM host ID.

<ol>
<li> The command <tt>hostname</tt> can be used to find the network name of
a computer:
<pre>
    user% <b>hostname</b>
    mars.chemcomp.com
</pre>
<li> Type the following line to determine the FlexLM host ID of the server
computer:
<pre>
    user% <b>/Applications/moe/bin/lmutil lmhostid</b>
    lmutil - Copyright (c) 1989-2004 by Macrovision Corporation. All rights reserved.
    The FLEXlm host ID of this machine is "00b0d0240936"
</pre>
</ol>

<p>
With this information, CCG can issue a network floating license.  Once issued,
you can install the license as follows.

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
The resulting <tt>license.dat</tt> file should look similar to:

<pre>
    SERVER hostname 693465a5 7788
    DAEMON chemcompd $MOE/bin/chemcompd
    FEATURE moe chemcompd 2010.10 31-dec-2010 4 F2FCD82496BD
</pre>

<p>
The <tt>SERVER</tt> line should contain the host name and FlexLM host ID that
you supplied to CCG; if not, then the license will not work.  You must now
edit the <tt>DAEMON</tt> line to replace <tt>$MOE</tt> with the
complete path to the MOE root directory where MOE is installed.  Assuming
that the directory is <tt>/Applications/moe</tt>, the final license file
should look like:

<pre>
    SERVER hostname 693465a5 7788
    DAEMON chemcompd /Applications/moe/bin/chemcompd
    FEATURE moe chemcompd 2010.10 31-dec-2010 4 F2FCD82496BD
</pre>

<p>
The <tt>FEATURE</tt> items in the license file specify the MOE software
(<tt>moe</tt>), the <tt>chemcompd</tt> class, the highest version of the
software enabled by the software key (2010.10), the expiration date of the key
(December 31, 2010), the number of tokens available (in this case, 4) and an
authentication code (<tt>F2FCD82496BD</tt>).

<p>
You are now ready to run the FlexLM License Manager.

<a name="StartlmgrdMacOSX"></a>
<h4>Starting the License Manager</h4>

<p>
Before running MOE, you must run the <tt>lmgrd</tt> license dispenser on the
chosen License Server computer.  If you are already running the FlexLM license
manager for other software products, you can add the contents of the MOE
<tt>license.dat</tt> license file to your existing master license file (add
only the <tt>DAEMON</tt> and <tt>FEATURE</tt> lines). For the change to take
effect, you will need to stop and restart the license manager program
<tt>lmgrd</tt>.  If you are not running FlexLM, log on to the License Server
(no need to be root) and type:

<p>
Assuming the MOE root directory to be
<tt>/Applications/moe</tt>:

<pre>
    user% <b>export MOE=/Applications/moe</b>
    user% <b>$MOE/bin/lmgrd -c $MOE/license.dat -l /tmp/lmgrd.log</b>
</pre>

<p>
<tt>lmgrd.log</tt> is a log file written by the license manager which contains
information on software usage and possible problems.

<a name="AutolmgrdMacOSX"></a>
<h4>Launching the License Manager Automatically</h4>

<p>It is a good idea to have the above <tt>lmgrd</tt> command issued in the
boot sequence of the License Server computer.

<p>On Mac, the license server process can be started automatically at
power up by registering a launched startup configuration file, located in:

<pre>
$MOE/bin-mppc/com.chemcomp.flexlm.plist
</pre>

<p>To use the script, the following procedure must be followed:

<ol>
<li>Edit the script file to match your environment. Modify each instance of
the path to MOE (default <tt>/Application/moe</tt>).
<li>As root, copy this script to <tt>/System/Library/LaunchDaemons</tt>, which is the
System-wide daemon provided by Mac OS X.
<li>Test the license server configuration with:
<pre>
    user% <b>launchctl load /System/Library/LaunchDaemons/com.chemcomp.flexlm.plist</b>
</pre>
<li>Verify whether the configuration was properly loaded with:
<pre>
    user% <b>launchctl list</b>
</pre>
<li>You can shutdown the server with:
<pre>
    user% <b>launchctl unload -w /System/Library/LaunchDaemons/com.chemcomp.flexlm.plist</b>
</pre>
<li>The MOE license server will be launched automatically when the computer is
rebooted.
</ol>

<a name="StoplmgrdMacOSX"></a>
<h4>Stopping the License Manager</h4>

<p>
The <tt>lmgrd</tt> program can be stopped with:

<pre>
    user% <b>$MOE/bin/lmutil lmdown -c $MOE/license.dat</b>
</pre>

<p>
MOE uses version 9.2.0d of <tt>lmgrd</tt>.  You do not need to be
<tt>root</tt> to run <tt>lmgrd</tt>.






<a name="InstallUnix">
<h2>Unix (Linux, Irix, Solaris)</h2>
<a name="CopyUnix"></a>
<h3>Step 1: Install MOE from the CD-ROM</h3>

<p>
<font color="#ff0000"><b>Important</b></font>&nbsp;&nbsp;

If a <tt>moe</tt> directory already exists on your system, it is likely that
a previous version is currently installed and that you are upgrading to a new
version.

<b>Do not delete the old version until the new one has been installed
successfully. Rename the old directory before doing the install and remove it
after a successful installation.</b>

For example, if the currently installed MOE is version 2008.10, then rename the
<tt>moe</tt> directory to <tt>moe2008_10</tt>.

<ol>
<li>
Insert the MOE CD-ROM in the drive and mount the directory (on many systems
this is done automatically).

<p>We will assume that the CD-ROM is mounted on <tt>/media/MOE_2010_10</tt>.

<p>
<li>
Open a command shell and launch the installer. Type:
<pre>
    user% <b>sh /media/MOE_2010_10/install.sh</b>
</pre>
<p>
Follow the instructions on the screen to install MOE. You will need write
permission into the installation directory; however, you do not need
<tt>root</tt> privileges on the computer.

<p>
<b>Note:</b> You can later change your mind about the installation
directory location or name: just copy or move the directory.

</ol>

<a name="KeyUnix"></a>
<h3>Step 2: Install the Software Key</h3>
    <ul>
    <li><a href="#KeyEvalUnix">Evaluation License</a>
    <li><a href="#KeyNodeUnix">Node-Locked License</a>
    <li><a href="#KeyFloatUnix">Network Floating License</a>
	<ul>
	<li><a href="#StartlmgrdUnix">Starting the License Manager</a>
	<li><a href="#StoplmgrdUnix">Stopping the License Manager</a>
	<li><a href="#AutolmgrdUnix">Launching the License Manager Automatically</a>
	<ul>
		<li><a href="#AutoLinux">Linux</a>
		<li><a href="#AutoIrix">Irix</a>
	</ul>
	</ul>
</ul>

<p>
The MOE license protection mechanism makes use of a license file
containing expiration dates, version restrictions, and possibly various
other license restrictions.  There are two steps required to install the
software key:

<ol>
<li>
The <tt>license.dat</tt> file in each installed MOE root directory must be
updated with the contents that you have been given by CCG (either by hard
copy or e-mail). You can use any ASCII text editor (such as <tt>emacs</tt> or
<tt>vi</tt>).

<p>
<li>
The FlexLM license manager <tt>lmgrd</tt> must be configured and run.  This
step is not required for evaluation licenses and node-locked licenses.  It
is only required for network floating licenses.

</ol>

<p>
The following command can be used to validate the key installation:

<pre>
    user% <b>/usr/local/moe/bin/moebatch -exec "LicenseInfo[];"</b>
</pre>

<p>
After a few seconds, you should see something like:

<pre>
     Feature: moe
     Version: 2010.10
     Expires: 31-dec-2010
         Key: 4E763DB0C667
      Server: isis.chemcomp.com
      Tokens: 3
</pre>

<p>
The <tt>Server</tt> field can be used to verify that you are connecting
to the correct server. See the
<a href="../moe/fcnref/licinfo.htm">LicenseInfo</a> function reference for
details about the software key information.

<a name="KeyEvalUnix"></a>
<h3>Evaluation License</h3>

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
An evaluation license file contains text similar to:

<pre>
    FEATURE moe chemcompd 2010.10 31-dec-2010 uncounted C0F256BA6F18 \
        HOSTID=DEMO
</pre>

<p>
The items in the license file specify the MOE software (<tt>moe</tt>),
the <tt>chemcompd</tt> class, the highest version of the software enabled
by the software key (2010.10), the expiration date of the key (December 31,
2010), the maximum number of copies that can be run simultaneously (in this
case, no limit), an authentication code (<tt>C0F256BA6F18</tt>) and a host ID
indicating that this is an evaluation license (<tt>HOSTID=DEMO</tt>).

<p>
No further configuration is required for evaluation licenses.

<a name="KeyNodeUnix"></a>
<h3>Node-Locked License</h3>

<p>
To obtain a node-locked license (a license restricting the use of MOE to a
particular computer) from Chemical Computing Group, you must first install
the MOE software from the CD-ROM and then determine the FlexLM host ID of the
computer on which you intend to run MOE by typing the following line:

<pre>
    user% <b>/usr/local/moe/bin/lmutil lmhostid</b>
    lmutil - Copyright (c) 1989-2004 by Macrovision Corporation. All rights reserved.
    The FLEXlm host ID of this machine is "00b0d0240936"
</pre>

<p>
With this information, CCG can issue a node-locked license.  Once issued,
you can install the license as follows.

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
A node-locked license file contains text similar to:

<pre>
    FEATURE moe chemcompd 2010.10 31-dec-2010 uncounted A7B8D85C5DDA \
        HOSTID=690c40d0
</pre>

<p>
The items in the license file specify the MOE software (<tt>moe</tt>),
the <tt>chemcompd</tt> class, the highest version of the software enabled
by the software key (2010.10), the expiration date of the key (December 31,
2010), the maximum number of copies that can be run simultaneously (in this
case, no limit), an authentication code (<tt>A7B8D85C5DDA</tt>) and a host ID
indicating that MOE can only run on the computer with FlexLM host ID 690c40d0
(as returned by <tt>lmutil</tt>). <b>Note:</b> The MOE software itself
need not be installed on this machine.

<p>
No further configuration is required for node-locked licenses.

<a name="KeyFloatUnix"></a>
<h3>Network Floating License</h3>

<p>
To obtain a network floating license from Chemical Computing Group, you
must first install the MOE software from the CD-ROM.  Next, you must
choose a License Server computer.  The License Server should be on a
computer network accessible by the computers on which you want to run
MOE.  The License Server computer will run the <tt>lmgrd</tt> license
dispenser program.  It is a good idea to install the MOE software on the
License Server itself.
<p>
Once a License Server computer has been chosen,
log on to it and use the following instructions to determine its
hostname and FlexLM host ID.

<ol>
<li> The command <tt>hostname</tt> can be used to find the network name of
a computer:
<pre>
    user% <b>hostname</b>
    mars.chemcomp.com
</pre>
<li> Type the following line to determine the FlexLM host ID of the server
computer:
<pre>
    user% <b>/usr/local/moe/bin/lmutil lmhostid</b>
    lmutil - Copyright (c) 1989-2004 by Macrovision Corporation. All rights reserved.
    The FLEXlm host ID of this machine is "00b0d0240936"
</pre>
</ol>

<p>
With this information, CCG can issue a network floating license.  Once issued,
you can install the license as follows.

<p>
Edit the <tt>license.dat</tt> file in the MOE root directory and replace
its contents with the license data supplied by CCG.  Be careful not to add
any extra spaces and make sure that you enter the data exactly as given.
The resulting <tt>license.dat</tt> file should look similar to:

<pre>
    SERVER hostname 693465a5 7788
    DAEMON chemcompd $MOE/bin/chemcompd
    FEATURE moe chemcompd 2010.10 31-dec-2010 4 F2FCD82496BD
</pre>

<p>
The <tt>SERVER</tt> line should contain the host name and FlexLM host ID that
you supplied to CCG; if not, then the license will not work.  You must now
edit the <tt>DAEMON</tt> line to replace <tt>$MOE</tt> with the
complete path to the MOE root directory where MOE is installed.  Assuming
that the directory is <tt>/usr/local/moe</tt>, the final license file
should look like:

<pre>
    SERVER hostname 693465a5 7788
    DAEMON chemcompd /usr/local/moe/bin/chemcompd
    FEATURE moe chemcompd 2010.10 31-dec-2010 4 F2FCD82496BD
</pre>

<p>
The <tt>FEATURE</tt> items in the license file specify the MOE software
(<tt>moe</tt>), the <tt>chemcompd</tt> class, the highest version of the
software enabled by the software key (2010.10), the expiration date of the key
(December 31, 2010), the number of tokens available (in this case, 4) and an
authentication code (<tt>F2FCD82496BD</tt>).

<p>
You are now ready to run the FlexLM License Manager.

<a name="StartlmgrdUnix"></a>
<h4>Starting the License Manager</h4>

<p>
Before running MOE, you must run the <tt>lmgrd</tt> license dispenser on the
chosen License Server computer.  If you are already running the FlexLM license
manager for other software products, you can add the contents of the MOE
<tt>license.dat</tt> license file to your existing master license file (add
only the <tt>DAEMON</tt> and <tt>FEATURE</tt> lines). For the change to take
effect, you will need to stop and restart the license manager program
<tt>lmgrd</tt>.  If you are not running FlexLM, log on to the License Server
(no need to be root) and type:

<p>
Assuming the MOE root directory to be
<tt>/usr/local/moe</tt>):

<pre>
    user% <b>setenv MOE /usr/local/moe</b>
    user% <b>$MOE/bin/lmgrd -c $MOE/license.dat -l /tmp/lmgrd.log</b>
</pre>
<p>
On some Linux systems replace the <tt>setenv</tt> command
with <tt>export&nbsp;MOE=/usr/local/moe</tt>.

<p>
<tt>lmgrd.log</tt> is a log file written by the license manager which contains
information on software usage and possible problems.

<a name="StoplmgrdUnix"></a>
<h4>Stopping the License Manager</h4>

<p>
The <tt>lmgrd</tt> program can be stopped with:

<pre>
    user% <b>$MOE/bin/lmutil lmdown -c $MOE/license.dat</b>
</pre>

<p>If you are using the <tt>lmgrd_init</tt> scripts described above,
you can use the same scripts to stop the license manager by issuing
the commands:

<pre>
    user% <b>/sbin/service lmgrd_init stop</b> (on Linux)
    user% <b>/etc/init.d/lmgrd_init stop</b>   (on SGI)
</pre>

<p>
MOE uses version 9.2.0d of <tt>lmgrd</tt>.  You do not need to be
<tt>root</tt> to run <tt>lmgrd</tt>.

<a name="AutolmgrdUnix"></a>
<h4>Launching the License Manager Automatically</h4>

<p>It is a good idea to have the above <tt>lmgrd</tt> command issued in the
boot sequence of the License Server computer.


<a name="AutoLinux"></a>
<h4>Linux</h4>

<p>
On Linux, the moe license daemon can be started automatically using the
init script located in:

<pre>
$MOE/bin-lnux/lmgrd_init
</pre>

<p>To use the script, the following procedure must be followed:

<ol>
<li>Edit the script file to match your environment:

<pre>
    MOE=/home/ccg/moe
    LOGFILE=/usr/tmp/lmgrd.log
    USERNAME=ccg
</pre>

<p>where:

<ul>
<li><tt>MOE</tt>: root of the MOE installation directory
<li><tt>LOGFILE</tt>: name of the log file used by the server
<li><tt>USERNAME</tt>: user owning the license daemon process
</ul>

<p>
<li>Login as root.

<p>
<li>Copy the script file into the <tt>init.d</tt> directory:

<pre>
    user% <b>cp lmgrd_init /etc/init.d/lmgrd_init</b>
</pre>

<p>
<li>Ensure that the script is executable:

<pre>
    user% <b>chmod +x /etc/init.d/lmgrd_init</b>
</pre>

<p>
<li> Register the lmgrd_init script so that it is run when the machine starts
and stops:

<pre>
    user% <b>chkconfig --add lmgrd_init</b>
    user% <b>chkconfig lmgrd_init on</b>
</pre>

If chkconfig is not available, the links can be created manually:

<pre>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc2.d/S99moe_lmstart</b>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc3.d/S99moe_lmstart</b>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc4.d/S99moe_lmstart</b>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc5.d/S99moe_lmstart</b>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc0.d/K10moe_lmstop</b>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc1.d/K10moe_lmstop</b>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc6.d/K10moe_lmstop</b>
</pre>
<p>
<li>Start the MOE license server:

<pre>
    user% <b>/sbin/service lmgrd_init start</b>
</pre>

If /sbin/service is not available, the script can be invoked directly:

<pre>
    user% <b>/etc/init.d/lmgrd_init start</b>
</pre>


</ol>


<a name="AutoIrix"></a>
<h4>Irix</h4>

<p>
On Irix, the moe license daemon can be started automatically using the
init script located in:

<pre>
$MOE/bin-sgi4/lmgrd_init
</pre>

<p>To use the script, the following procedure must be followed:

<ol>
<li>Edit the script file to match your environment:

<pre>
    MOE=/home/ccg/moe
    LOGFILE=/usr/tmp/lmgrd.log
    USERNAME=ccg
</pre>

<p>where:

<ul>
<li><tt>MOE</tt>: root of the MOE installation directory
<li><tt>LOGFILE</tt>: name of the log file used by the server
<li><tt>USERNAME</tt>: user owning the license daemon process
</ul>

<p>
<li>Login as root.

<p>
<li>Copy the script file into the <tt>init.d</tt> directory:

<pre>
    user% <b>cp lmgrd_init /etc/init.d/lmgrd_init</b>
</pre>

<p>
<li>Ensure that the script is executable:

<pre>
    user% <b>chmod +x /etc/init.d/lmgrd_init</b>
</pre>

<p>
<li> Make a symbolic links to the lmgrd_init script so that it is run when
the machine starts and stops:

<pre>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc2.d/S99moe_lmstart</b>
    user% <b>ln -s /etc/init.d/lmgrd_init /etc/rc0.d/K10moe_lmstop</b>
</pre>

<p>
<li>Start the MOE license server:

<pre>
    user% <b>/etc/init.d/lmgrd_init start</b>
</pre>

</ol>


<!-- ===================== DELETING MOE ===================== -->

<a name="Delete"></a><h2>Deleting MOE</h2>

<ol>
<li>Delete the <tt>$MOE</tt> root directory and all files and
directories under it. In this document we have assumed that <tt>$MOE</tt>
is <tt>/usr/local/moe</tt> on UNIX systems and <tt>c:\moe</tt> on
Windows systems.

<p>
<li>If you are not planning to re-install MOE, "unset" all MOE environment
variables in user shell configuration files (e.g. <tt>.cshrc</tt>) and
delete the <tt>.moe-rc</tt> and <tt>.moe-menus</tt> files in user home
directories.

<p>
<li>Delete any MOE additions to global license files (if necessary)
and/or delete the automatic start-up of <tt>$MOE/bin/lmgrd</tt> from the
boot scripts of the license management computer. Do not perform this step
if you plan to re-install MOE.

</ol>

<p>
The following files and extensions are used by MOE: </p>

<p>
<table class="noborder">
  <tr>
    <td valign="baseline"><tt>$MOE/bin-*/*</tt></td>
    <td valign="baseline">Architecture-specific executables</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/*.ff</tt></td>
    <td valign="baseline">Standard MOE data files</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/moe-menus</tt></td>
    <td valign="baseline">Start-up menu specification file</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/menu-*</tt></td>
    <td valign="baseline">Start-up menu include files</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/moe-rc</tt></td>
    <td valign="baseline">Start-up configuration file</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/matrix/*</tt></td>
    <td valign="baseline">Alignment similarity matrices</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/res/*.moe</tt></td>
    <td valign="baseline">PDB reader standard residues</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/segment.lis</tt></td>
    <td valign="baseline">Loop dictionary list of protein PDB codes</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/lib/svl/*.svl</tt></td>
    <td valign="baseline">Core application SVL program files</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/sample/*.svl</tt></td>
    <td valign="baseline">Sample application SVL program files</td>
  </tr><tr>
    <td valign="baseline"><tt>$MOE/sample/mol/*</tt></td>
    <td valign="baseline">Sample molecule and database files</td>
  </tr><tr>
    <td valign="baseline"><tt>$HOME/.moe-menus</tt></td>
    <td valign="baseline">User modifications to MOE menus (UNIX)</td>
  </tr><tr>
    <td valign="baseline"><tt>$HOME/moe-menus</tt></td>
    <td valign="baseline">User modifications to MOE menus (Windows)</td>
  </tr><tr>
    <td valign="baseline"><tt>$HOME/.moe-rc</tt></td>
    <td valign="baseline">User configuration file (UNIX)</td>
  </tr><tr>
    <td valign="baseline"><tt>$HOME/moe-rc</tt></td>
    <td valign="baseline">User configuration file (Windows)</td>
  </tr><tr>
    <td valign="baseline"><tt>moe-save.??????</tt></td>
    <td valign="baseline">Data preservation file</td>
  </tr><tr>
    <td valign="baseline"><tt>*.svl</tt></td>
    <td valign="baseline">SVL program file</td>
  </tr><tr>
    <td valign="baseline"><tt>*.moe</tt></td>
    <td valign="baseline">MOE molecule file</td>
  </tr><tr>
    <td valign="baseline"><tt>*.mdb</tt></td>
    <td valign="baseline">MOE molecular database file</td>
  </tr>
</table>
</center>


<!-- ===================== JAVA and JDBC ===================== -->

<a name="JDBC"></a>
<h2>Installing Java and JDBC Drivers</h2>

<p>The <a href="../svl/manual/jdbc_man.htm">SVL relational database
functions</a> provide both access to a wide variety of relational databases and
compatibility with a wide variety of database servers.  To use the relational
database functions, you must have Java (i.e. a Java Virtual Machine)
installed.


<h3><a name="Java">Installing Java</a></h3>

<p>To use the relational database functions, a Java Virtual Machine (JVM) must
be available. The required JVM for MOE is Sun Java version 1.4 or higher. Many
of the JDBC drivers available will have more strict requirements
than this, so the most recent version available for the platform is highly
recommended. If the Java executable is not specified by an 
<a href="#SVL_JVM">environment variable</a> then the system PATH will be
searched.

<p>A recent version of Java for most platforms can be obtained from <a
href="http://java.sun.com/javase/downloads/index.html">http://java.sun.com</a>.
Either the <tt>JRE</tt> or the full <tt>SDK</tt> version of Java may be
used.
<b>Note:</b> Third party JVMs (i.e. not from Sun)
may be incompatible with MOE.
</p>

<h3> <a name="JVM_OPTS">Options for Starting the JVM</a> </h3>

<p>Additional options to be used for starting the JVM may be supplied in the
<tt>moe-rc</tt> file.  If there is an entry in <tt>moe-rc</tt> corresponding to
<tt>jvm.commandOptions</tt> then it will be used directly when starting the
JVM.  For instance, it is possible to specify to the JVM that any internet
connections should be established through an internet proxy server using the
following SVL command (replace <tt>&lt;proxy&gt;</tt> with
the appropriate IP address and <tt>&lt;port&gt;</tt> with
the appropriate port number):

<pre>
svl&gt; SetRC [
	'jvm.commandOptions',
	'-DproxySet=true -Dhttp.proxyHost=&lt;proxy&gt; -Dhttp.proxyPort=&lt;port&gt;'
    ]
</pre>
<p>
The changes will take effect next time you restart MOE.

<h3><a name="SVL_JVM">Environment Variables</a> </h3>

<p>Once MOE and Java have been properly installed on the system MOE must be
informed of where the Java installation is located. If the system's
<tt>PATH</tt> environment variable contains a reference to the directory
containing the <tt>java</tt> executable then MOE will find it when
needed. Otherwise, the <tt>SVL_JVM</tt> environment variable in the table below
must be set appropriately.

<p>The following environment variables are used by the relational database
functions.  Setting these variables will override any default settings.

<p>
<table class="titlebar">
<tr>
<th>Variable</th>
<th>Description</th>
</tr>

<tr>
<td valign="baseline"><tt>CLASSPATH</tt></td>
<td valign="baseline">
Specifies the default search path used by all Java programs when looking for
Java class files. Java uses this environment variable independently of MOE, so
if the <tt>CLASSPATH</tt> variable is set, then it will be used to initialize
the JVM with the following three entries automatically appended:
<tt>$MOE/java/, $MOE/java/jdbc.jar, $MOE/java/svljava.jar</tt>.
</td>

</tr>
<tr><td valign="baseline"><tt>SVL_CLASSPATH</tt></td>

<td valign="baseline">
<tt>SVL_CLASSPATH</tt> overrides the <tt>CLASSPATH</tt> environment variable.
If this environment variable is set, then it is used exclusively with no
modification. Note that unlike for <tt>CLASSPATH</tt>, paths to
<tt>$MOE/java</tt>, <tt>$MOE/java/jdbc.jar</tt> and
<tt>$MOE/java/svljava.jar</tt> must be explicitly defined when using this
environment variable.
</td>

</tr>
<tr>
<td valign="baseline"><tt>SVL_JVM</tt></td>

<td valign="baseline">
Specifies the Java Virtual Machine (JVM) that SVL will start. Set this variable
to point to the Java executable to use. If this is not set in the environment
then it is expected that the command 'java' will be resolved in the current
PATH.
</td>

</tr>
<tr><td valign="baseline"><tt>SVL_JVM_LOG</tt></td>

<td valign="baseline">
Specifies the location and name of a log file for the system. If this variable
is set then it will be used as the name of the log file written to by the Java
Virtual Machine started by SVL, otherwise no log will be written. This is
useful for debugging purposes.
</td>

</tr>
</table>


<h3> <a name="Drivers">Installing the JDBC Drivers</a> </h3>

<p>A JDBC Driver corresponding to the type of database you wish to access is
required, in addition to having a sufficiently new JVM installed on the
system. JDBC drivers are not included with MOE. Because JDBC is a common
standard, JDBC drivers are available for free download from the web sites of
all the most popular database vendors. For example, the following table lists
the URLs where drivers can be found for several popular database products:

<p>
<table class="titlebar">
<tr><th>Database</th>
    <th>JDBC Driver Location</th>
</tr>

<tr><td valign="baseline">IBM DB2</td>
    <td valign="baseline">{DB2_INSTALL_DIR}/java/db2jcc.jar</td>
</tr>

<tr><td valign="baseline">Oracle</td>
    <td valign="baseline"><a
href="http://www.oracle.com/technology/tech/java/sqlj_jdbc/index.html">Oracle
JDBC driver</a> </td>
</tr>

<tr><td valign="baseline">Microsoft SQL</td>
    <td valign="baseline">
    <a href= "http://msdn.microsoft.com/en-us/data/aa937724.aspx">Microsoft SQL
    Server Driver for JDBC</a>
<!-- OBSOLETE
    <a href= "http://www.microsoft.com/sql/downloads/default.mspx">Microsoft SQL
    Server Driver for JDBC</a>
-->
    </td>
</tr>

<tr><td valign="baseline">MySQL</td>
    <td valign="baseline">
    <a href= "http://www.mysql.com/products/connector-j/index.html">MySQL
    Connector/J</a></td>
</tr>

</table>

<p>
Acquire the appropriate JDBC driver and install it on your system. Once the
driver has been installed ensure that <tt>CLASSPATH</tt> or
<tt>SVL_CLASSPATH</tt> refers to the appropriate installation locations. The
driver installation directory and the <tt>$MOE/java</tt> directory as well as
the necessary <tt>jar</tt> files must all appear in one of the
<tt>CLASSPATH</tt> variables for the system to function completely.

<p>
It is highly recommended that the documentation for each driver be read
carefully. Drivers from different vendors do not behave consistently and each
has its own set of supported and non-supported features. The documentation will
also specify the format of the URL (Uniform Resource Locater) expected by the
driver and the name by which the driver may be invoked.  Note that this
information is needed by the relational database functions for connecting to a
database using that driver.

<!-- ===================== RUNNING MOE ===================== -->

<a name="Run"></a>
<h2>Running MOE</h2>

<ul>
<li><a href="#RunGUI">Running MOE</a>
<li><a href="#RunBatch">Running MOE/batch</a>
<li><a href="#RunSwitch">Command Line Switches</a>
<li><a href="#RunEnv">Environment Variables</a>
</ul>

<a name="RunGUI"></a>
<h3>Running MOE</h3>

<p>
We will assume that the MOE root directory is <tt>/usr/local/moe</tt>
on UNIX systems and <tt>c:\moe</tt> on Windows systems.  To run the MOE
graphical environment on a UNIX system type:

<pre>
    user% <b>/usr/local/moe/bin/moe</b>
</pre>

<p>
in a terminal shell.  If you have put <tt>/usr/local/moe/bin</tt> into the
<tt>PATH</tt> environment variable then you must set the <tt>MOE</tt>
environment variable to <tt>/usr/local/moe</tt>.  If the MOE
Window does not appear, there is a problem with the
installation.  Consult the troubleshooting section below called
<a href="#Trouble">Common Problems</a>.

<p>
On Windows systems, create a shortcut on the Desktop to the executable

<p><tt>c:\moe\bin-i4w9\moe.exe</tt>

<p>Edit the properties of the shortcut
(right-click on the Desktop icon) and set the startup directory
to be your home directory.  When this is done, double-click on the MOE
icon on the desktop.  MOE can also be started by typing

<pre>
    c:\&gt; <b>c:\moe\bin-i4w9\moe.exe</b>
</pre>

<p>
in a Command Prompt window.  If the MOE Window does not
appear, there is a problem with the installation.  Consult the
troubleshooting section below called <a href="#Trouble">Common
Problems</a>.

<a name="RunBatch"></a>
<h3>Running MOE/batch</h3>

<p>
One of MOE's significant features is that it also runs in terminal mode, a
non-graphical version of the MOE software called MOE/batch.  In batch mode,
you can issue all the SVL functions (except, of course, graphical and
window-generating commands) as you would from the SVL command line in the
graphical version of MOE.   MOE/batch is typically used for background
calculations that do not require a graphical interface.

<p>
We will assume that the MOE root directory is <tt>/usr/local/moe</tt>
on UNIX systems and <tt>c:\moe</tt> on Windows systems.  To run MOE/batch on
a UNIX system type:

<pre>
    user% <b>/usr/local/moe/bin/moebatch</b>
</pre>

<p>
in a terminal shell.  If you have put <tt>/usr/local/moe/bin</tt> into the
<tt>PATH</tt> environment variable then you must set the <tt>MOE</tt>
environment variable to <tt>/usr/local/moe</tt>.  To run MOE/batch in a
Windows system, open an Command Prompt window and type:

<pre>
    user% <b>c:\moe\bin-i4w9\moebatch</b>
</pre>

<p>
In any event, when ready for an SVL command, MOE/batch will prompt with
<tt>moe&gt;</tt>:

<pre>
    moe&gt;
</pre>

<p>
If the <tt>moe&gt;</tt> prompt does not appear after a few seconds, then
there is a problem with the installation.  Consult the troubleshooting
section below called <a href="#Trouble">Common Problems</a>.
You can exit MOE/batch with

<pre>
    moe&gt; <b>Quit[]</b>
</pre>

<p>
which will return you to the system command prompt.  MOE/batch will also exit
when the end of file character is seen (<tt>Ctrl-D</tt> on UNIX and
<tt>Ctrl-Z</tt> on Windows).  The command history can be examined with
<tt>Ctrl-P</tt> for the previous command and <tt>Ctrl-N</tt> for the
next command.

<p>
MOE/batch is very much a script processing environment.  If you have an SVL
script file with a sequence of SVL commands called <tt>myscript.svl</tt>, you
can run them and quit MOE/batch upon completion by typing

<pre>
    user% <b>/usr/local/moe/bin/moebatch -script myscript.svl</b>
</pre>

<a name="RunSwitch"></a>
<a name="-accum"></a>
<a name="-accumfp"></a>
<a name="-boot"></a>
<a name="-exec"></a>
<a name="-ffdefault"></a>
<a name="-forcefield"></a>
<a name="-fsaa"></a>
<a name="-fsaa_mode"></a>
<a name="-gfx"></a>
<a name="-gfxvisual"></a>
<a name="-lic"></a>
<a name="-licwait"></a>
<a name="-noaccum"></a>
<a name="-nofsaa"></a>
<a name="-nolicwait"></a>
<a name="-mpu"></a>
<a name="-mpulog"></a>
<a name="-load"></a>
<a name="-opengl"></a>
<a name="-root"></a>
<a name="-run"></a>
<a name="-script"></a>
<a name="-setenv"></a>
<a name="-std"></a>
<a name="-stereo"></a>
<a name="-nostereo"></a>
<a name="-test"></a>
<a name="-tmp"></a>
<a name="-tty"></a>
<a name="-notty"></a>
<a name="-x11"></a>

<h3>Command Line Switches</h3>

<p>
When <tt>moe</tt> or <tt>moebatch</tt> are run from a command shell or
Command Prompt a number of <i>switches</i> or options are available.  These
are invoked by typing

<pre>
   user% <b>/usr/local/moe/bin/moe <i>switches</i></b>
   user% <b>/usr/local/moe/bin/moebatch <i>switches</i></b>
</pre>

<p>
where <i>switches</i> are one or more of the following items:

<p>
<table class="titlebar">
<tr>
<th>Switch</th>
<th>Description</th>
</tr>

<tr>
<td valign="baseline" width="20%">
<tt>-accum</tt><br />
<tt>-accumfp</tt><br />
<tt>-noaccum</tt>
</td>
<td valign="baseline">
If <tt>-accum</tt> is specified, the OpenGL accumulation buffer will
be used for anti-aliasing and focal blurring (this is the default).
If <tt>-accumfp</tt> is specified, a floating point precision accumulation
buffer will be used. This buffer is only available on modern graphics cards;
however, it is
only needed if there are problems with the normal OpenGL accumulation
buffer.
If <tt>-noaccum</tt>
is specified, the OpenGL accumulation buffer will not be used,
with the consequence
that high-quality anti-aliasing and focal blurring will be disabled.
<br />
<br />
Note: A faster but lower quality anti-aliasing may be accessible using
the <tt>-fsaa</tt> switch.

</td>
</tr>

<tr>
<td valign="baseline"><tt>-boot</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">
Specifies the SVL program that MOE runs immediately upon startup.  The
default is <tt>$MOE/lib/boot.svl</tt> for MOE and MOE/batch.
The default is <tt>$MOE/lib/boot_cgi.svl</tt> for MOE/web.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-exec</tt>&nbsp;<i>"expression"</i></td>
<td valign="baseline">
Upon startup, but after the <tt>MOE_SVL_LOAD</tt> files have been loaded
and the <tt>MOE_SVL_STARTSCRIPT</tt> has been executed, evaluate the specified
SVL expression, <i>expression</i>.
If used on the MOE/batch command line it will cause MOE/batch to
automatically terminate after <i>expression</i> is evaluated.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-ffdefault</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">
Use the parameters in the file <i>filename</i> when specific parameters
are not available in a force field.  By default MOE uses the defaults file
<tt>$MOE/lib/ffdefault.dat</tt>.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-forcefield</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">
Use <i>filename</i> as the default forcefield file instead of that specified
in the <tt>$MOE/lib/moe-rc</tt> file.
</td>
</tr>

<tr>
<td valign="baseline">
<tt>-fsaa</tt><br />
<tt>-nofsaa</tt><br />
<tt>-fsaa_mode</tt>&nbsp;<i>numsamples</i>
</td>
<td valign="baseline">
Specifying <tt>-fsaa</tt> enables graphics hardware anti-aliasing
(&quot;multisampling&quot;), if available.  Specifying
<tt>-nofsaa</tt> disables hardware anti-aliasing (this is the default).
The <tt>-fsaa_mode</tt> enables hardware anti-aliasing and
specifies the number of samples used; the higher the number,
the better the quality, but the slower the refresh rate.
<br />
<br />
Note: <tt>-fsaa</tt> provides a faster but lower quality
anti-aliasing than <tt>-accum</tt>.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-gfx</tt></td>
<td valign="baseline">
On startup, lists the available OpenGL-compatible visuals and displays the
default selection.
</td>
</tr>


<tr>
<td valign="baseline"><tt>-gfxvisual&nbsp;0xHH</tt></td>
<td valign="baseline">
Used to force the selection of a particular visual.
<tt>HH</tt> is the visual ID to be used.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-lic</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">Use <i>filename</i> as the license file.</td>
</tr>

<tr>
<td valign="baseline"><tt>-licwait</tt><br><tt>-nolicwait</tt></td>
<td valign="baseline">
If <tt>-licwait</tt> is specified on the command line then MOE will wait
until a license is available from the license manager.
If <tt>-nolicwait</tt> is specified then MOE will terminate upon detection
that no license is available (this is the default).
</td>
</tr>

<tr>
<td valign="baseline"><tt>-load</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">
Specifies an SVL source file or directory containing SVL source files to
be loaded automatically when MOE starts.  If <i>filename</i> specifies a
file then that file is loaded.  If <i>filename</i> specifies a directory
then all files ending in <tt>.svl</tt> in that directory will be loaded.
If the directory also contains any subdirectories ending with
<tt>.svl</tt>, those subdirectories will each be recursively searched for
files and subdirectories ending in <tt>.svl</tt>.  Files are loaded and
subdirectories are searched in alphabetical order.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-mpu</tt>&nbsp;<i>n</i></td>
<td valign="baseline">Start MOE in multiprocessor mode, using
<i>n</i> processors.
</tr>

<tr>
<td valign="baseline"><tt>-mpulog</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">When MOE is started in multiprocessor mode,
internal details of computations will be logged to
the specified file.  If the filename contains the character
<tt>#</tt>, then a series of logfiles will be written out,
each of whose name will be based on the original filename,
but with the <tt>#</tt> replaced by the host number.
</tr>

<tr>
<td valign="baseline"><tt>-opengl</tt></td>
<td valign="baseline">Use the OpenGL graphics rendering library (if available).</td>
</tr>

<tr>
<td valign="baseline"><tt>-root</tt>&nbsp;<i>path</i></td>
<td valign="baseline">
Set the path of the MOE installation directory.  This switch will override
any value set in the <tt>MOE</tt> environment variable.
The SVL constant <tt>MOE</tt> contains the path to the MOE root directory.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-run</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">
Run the specified SVL program after the boot program is run.
If used on the MOE/batch command line it will cause MOE/batch to
automatically terminate after the program is run.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-script</tt>&nbsp;<i>filename</i></td>
<td valign="baseline">
Run the specified SVL script after the boot program is run.
If used on the MOE/batch command line it will cause MOE/batch to
automatically terminate after the script terminates.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-setenv</tt>&nbsp;<i>name=value</i></td>
<td valign="baseline">Upon starting MOE, environment variable <tt>name</tt> will
be set to <tt>value</tt>.
</td>
</tr>


<tr>
<td valign="baseline"><tt>-std</tt></td>
<td valign="baseline">
Ignore any customizations. In particular, ignore the <tt>$HOME/.moe-menus</tt>
and <tt>$HOME/.moe-rc</tt> files and the environment variables
<tt>MOE_SVL_LOAD</tt> and <tt>MOE_SVL_STARTSCRIPT</tt>.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-stereo</tt><br><tt>-nostereo</tt></td>
<td valign="baseline">
Use <tt>-nostereo</tt> to disable the request for a stereo visual and
<tt>-stereo</tt> to insist upon it. By default MOE requests a stereo
visual to support OpenGL stereo, but on some platforms stereo
visuals have lower quality graphics (e.g. 12 bit vs. 24 bit).
</td>
</tr>

<tr>
<td valign="baseline"><tt>-test</tt></td>
<td valign="baseline">
After loading SVL files, print the version of MOE and the name and path of
the MOE root directory, then exit MOE.  This option is used primarily for
testing the MOE installation.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-tmp</tt>&nbsp;<i>path</i></td>
<td valign="baseline">
Set the path to the temporary file directory.  Write permission is required
for the directory.  This is the directory that MOE uses for temporary files.
This switch will override any value set in the <tt>MOE_TMP</tt>, <tt>TMP</tt>,
<tt>TEMP</tt> environment variables.  The SVL constant <tt>TMP</tt> contains
the path to the temporary directory.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-tty</tt><br><tt>-notty</tt></td>
<td valign="baseline">
The <tt>-tty</tt> switch causes MOE and MOE/batch to accept
terminal input. The <tt>-notty</tt> switch disables the terminal
input capability.
</td>
</tr>

<tr>
<td valign="baseline"><tt>-x11</tt></td>
<td valign="baseline">Use the X11 graphics rendering library (if available).
</td>
</tr>

</table>

<p>
In general, the command line switches are not required; however, in
certain circumstances they are useful.  For example, to run an SVL program
<tt>myprog.svl</tt> from MOE/batch one would type:

<pre>
    user% <b>/usr/local/moe/bin/moebatch -run myprog.svl</b>
</pre>

<p> If the program require arguments, one would type:

<pre>
    user% <b>/usr/local/moe/bin/moebatch -exec "run ['myprog.svl', ['in.mdb', 'out.mdb']]"</b>
</pre>

<p>
To use the alternative license file <tt>mylic.dat</tt> and run the
standard MOE forcing X11 graphics, one would type

<pre>
    user% <b>/usr/local/moe/bin/moe -lic mylic.dat -x11 -std</b>
</pre>

<p>
Finally, one can test the MOE installation with

<pre>
    user% <b>/usr/local/moe/bin/moebatch -test</b>
    MOE 2010.10 appears OK (/usr/local/moe)
</pre>

<p>
Note that the <tt>-test</tt> switch exits MOE automatically.

<a name="RunEnv"></a>
<h3>Environment Variables</h3>

<p>
Environment variables are used a) to specify an alternate MOE root
directory, or b) to modify how MOE starts up when customizations have been
made.  All of the MOE environment variables begin with <tt>MOE_</tt> and
are optional; that is, no environment variables are required to run MOE,
except on UNIX systems when the MOE root directory is included in the
<tt>PATH</tt> environment variable.  In this case, you <i>must</i> set the
environment variable <tt>MOE</tt>.

<p>
Typically, environment variables are set in a user's home directory shell
configuration file (e.g. <tt>.cshrc</tt>) on UNIX systems or in
<tt>autoexec.bat</tt> on Windows systems.  To set an environment variable
under UNIX type:

<pre>
    user% <b>setenv</b> <i>variable</i> <i>value</i>
</pre>

or for Macintosh and some Linux systems

<pre>
    user% <b>export</b> <i>variable</i>=<i>value</i>
</pre>


<p>
For example, <tt>setenv MOE /usr/local/moe</tt> would set the MOE root
directory variable to <tt>/usr/local/moe</tt>.  In subsequent shell commands,
the string of characters <tt>$MOE</tt> would be replaced by
<tt>/usr/local/moe</tt>.  To set an environment variable
under Windows type:

<pre>
    c:\windows> <b>set</b> <i>variable</i><b>=</b><i>value</i>
</pre>

<p>
in a Command Prompt window.  For example, <tt>set MOE=c:\moe</tt> would
set the MOE root directory variable to <tt>c:\moe</tt>.  In subsequent
DOS commands, the string of characters <tt>%MOE%</tt> would be replaced by
<tt>c:\moe</tt>.

<p>Alternatively, the Windows <b>Control Panel</b> offers a graphical
interface to manipulate environment variables. It can be accessed from
the <b>System Properties</b> panel <b>Advanced</b> section. Press the
<b>Environment Variables</b> button to launch the interface.
</p>

<p>Finally, the
<a class="svl" href="#-setenv">-setenv</a> runtime switch can be
used to set an environment variable when MOE is invoked.
</p>

<p>
The following environment variables are used by MOE:

<a name="HOME"></a>
<a name="HOMEPATH"></a>
<a name="HOMEDRIVE"></a>
<a name="MOE"></a>
<a name="MOE_SVL_LOAD"></a>
<a name="MOE_SVL_RUN"></a>
<a name="MOE_SVL_RUNPATH"></a>
<a name="MOE_SVL_STARTSCRIPT"></a>
<a name="MOE_TMP"></a>
<a name="TMP"></a>
<a name="TEMP"></a>
<p>
<table>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>

<tr>
<td valign="baseline"><tt>HOMEDRIVE</tt><br><tt>HOMEPATH</tt><br><tt>HOME</tt></td>
<td valign="baseline">
On Windows platforms MOE uses the environment variables <tt>HOMEDRIVE</tt> and
<tt>HOMEPATH</tt> to compose the user's home directory.  If either is not
defined then the <tt>HOME</tt> environment variable is used.  If <tt>HOME</tt>
is not defined then the current directory when MOE starts is used as the
user's home directory.
</tr>


<tr>
<td valign="baseline"><tt>MOE</tt></td>
<td valign="baseline">
Specifies the root directory containing all MOE subdirectories (do not include
a trailing slash or backslash).  This variable is only required if you are
running a MOE executable from a location other than the <tt>bin</tt> or one of
the <tt>bin-arch</tt> directories in the MOE root directory.  <b>Note!</b> On
UNIX systems: if MOE is put into the <tt>PATH</tt> then the <tt>MOE</tt>
environment variable <i>must</i> be set.
</tr>

<tr>
<td valign="baseline"><tt>MOE_SVL_LOAD</tt></td>
<td valign="baseline">
Specifies an SVL source file or directory containing SVL source files to
be loaded automatically when MOE starts.  These files will be loaded before
the <tt>-load</tt>, <tt>-run</tt> and <tt>-script</tt> command line switches
are executed.  If <tt>MOE_SVL_LOAD</tt> specifies a file then that file
is loaded.  If <tt>MOE_SVL_LOAD</tt> specifies a directory then all files
ending in <tt>.svl</tt> in that directory will be loaded.  If the
directory also contains any subdirectories ending with <tt>.svl</tt>,
those subdirectories will each be recursively searched for files and
subdirectories ending in <tt>.svl</tt>.  Files are loaded and
subdirectories are searched in alphabetical order.
If the local directory <tt>~/svl</tt> exists, all SVL files in that
directory will be loaded immediately after the
<tt>MOE_SVL_LOAD</tt> files are loaded.
</tr>

<tr>
<td valign="baseline"><tt>MOE_SVL_RUN</tt></td>
<td valign="baseline">
Specifies a single SVL source file to run automatically when MOE starts.
This file will be run after the files specified by <tt>MOE_SVL_LOAD</tt>
are loaded.
</tr>

<tr>
<td valign="baseline"><tt>MOE_SVL_RUNPATH</tt></td>
<td valign="baseline">
Specifies a list of directories to be searched when the
SVL command <tt>run</tt> is presented with a relative filename.  Directory
names must be separated by semicolons.  The directories are processed from
left to right.  The default is <tt>$MOE/lib/svl/run;~/svl/run</tt>.

</tr>

<tr>
<td valign="baseline"><tt>MOE_TMP</tt><br><tt>TMP</tt><br><tt>TEMP</tt></td>
<td valign="baseline">
Specifies the path to a directory that MOE will use for temporary files.
Write permission is required for the specified directory.  If this environment
variable is not specified MOE will use the path in the <tt>TMP</tt>
environment variable.  If the <tt>TMP</tt> variable is not defined, then
MOE uses <tt>TEMP</tt>.  if <tt>TEMP</tt> is not defined, MOE uses
<tt>/tmp</tt> on Unix systems and <tt>c:/Temp</tt> on Windows systems.
</tr>

<tr>
<td valign="baseline"><tt>MOE_SVL_STARTSCRIPT</tt></td>
<td valign="baseline">
Specifies an SVL script (list of SVL commands) to be executed when MOE
is started (but after the <tt>MOE_SVL_LOAD</tt> files have been loaded).
</tr>

</table>

<p>
Suppose that you have a collection of SVL files that you want loaded each time
MOE starts.  These SVL files may be local applications or customizations or
modifications of files sent to you by CCG support staff.  To perform this
loading on UNIX:

<pre>
    user% <b>cd $HOME</b>
    user% <b>mkdir my_svl</b>
    user% <b>setenv MOE_SVL_LOAD $HOME/my_svl</b>
</pre>

<p>
and copy the collection of SVL files to <tt>$HOME/my_svl</tt>.
(On Macintosh and some Linux systems replace the <tt>setenv</tt> command
with <tt>export&nbsp;MOE_SVL_LOAD=$MOE/mysval</tt>.)
When
MOE is subsequently run, all of the <tt>.svl</tt> files in that directory
will be automatically loaded.  On Windows systems, type

<pre>
    c:\windows&gt; <b>c:</b>
    c:\windows&gt; <b>cd \</b>
    c:\&gt; <b>mkdir my_svl</b>
    c:\&gt; <b>set MOE_SVL_LOAD=c:\my_svl</b>
</pre>

<p>
and copy the collection of SVL files to <tt>c:\my_svl</tt>.  When
MOE is subsequently run, all of the <tt>.svl</tt> files in that directory
will be automatically loaded.


<!-- ===================== License Info ===================== -->

<a name="LicenseInfo"></a>
<h2>License Information</h2>

<p>Information about the current license, including expiration date,
version limit (maximum version of MOE that can be run under the
current license), and number of tokens, is given by the
<b>License Info</b> panel.
</p>

<blockquote>
<span class="menu">MOE | Help | License Info</span>
</blockquote>

<p>
<center>
<img src="install/licenseinfo.png" alt="License Info panel" />
</center>
</p>

<!-- ===================== MOE DOCUMENTATION ===================== -->

<a name="Documentation"></a>
<h2>MOE Documentation</h2>

<p>Once you have MOE running you can access all of MOE's online
documentation by using the <b>Help</b> menu in MOE's main menu bar.




<!-- ===================== COMMON PROBLEMS ===================== -->

<a name="Trouble"></a>
<h2>Common Problems</h2>

<ul>
  <li> <a href="#Launch">MOE doesn't launch</a>
  <li><a href="#Flex"><a href="#Nolibgl">I get the error message "Cannot find libGL.so.1"
    when I start the MOE graphical environment.</a>
  <li><a href="#OpenGL">Problems using MOE with OpenGL drivers for Linux</a>
</ul>


<a name="Launch"></a><p><b>MOE doesn't launch</b>

<p>
If MOE is not working properly, it means that there is a problem with one
or more of:

<ol>
<li>The MOE files or environment variables
<li>The software keys or license manager
<li>The graphics system
</ol>

<p>
We will assume that MOE has been installed in <tt>/usr/local/moe</tt>
for UNIX systems and <tt>c:\moe</tt> for Windows systems.

<p>
The first step in troubleshooting the MOE installation is to unset the
<tt>MOE</tt> environment variable.  Often, the <tt>MOE</tt> variable is
specifying a directory other than the one intended (such as a previous
version of MOE).  On UNIX, type

<pre>
    user% <b>unsetenv MOE</b>
</pre>

<p>
On Macintosh and some Linux distribution, type:
<pre>
    user% <b>unset MOE</b>
</pre>

<p>On Windows, type (in an Command Prompt window):

<pre>
    c:\&gt; <b>set MOE=</b>
</pre>

<p>Next, on UNIX, type:

<pre>
    user% <b>/usr/local/moe/bin/moebatch -test</b>
</pre>

<p>On Windows, type:

<pre>
    c:\&gt; <b>c:\moe\bin-i4w9\moebatch.exe -test</b>
</pre>

<p>After a few seconds, you should see something like

<pre>
    MOE 2010.10 appears OK (/usr/local/moe)
</pre>

<p>
where <tt>2010.10</tt> is the version of MOE and <tt>/usr/local/moe</tt>
is the MOE root directory.  If this message appears (alone) then it means
that the software installation and license management files seem to be in
working order.  If this does not appear or other messages are printed, it
means that there is a problem with either the MOE files installation or
the license management system.  First make sure that the license manager
file <tt>license.dat</tt> is correct and make sure that the <tt>lmgrd</tt>
program is running and using the same license information (you may need to
restart <tt>lmgrd</tt>).

<p>
If you were able to start moebatch, try starting <tt>moe</tt> using the
same method.  The MOE Window should appear briefly and the same
message printed to the terminal window.  If the <tt>moebatch</tt> test
worked but the <tt>moe</tt> test did not, then it is likely that there is
a problem with the graphics.  Consult the list of common problems below.

<p>
If these tests work, try running <tt>moe</tt> or <tt>moebatch</tt> with the
<tt>-std</tt> switch.  If MOE runs, then it means that there is a problem
with local customization (menu files, default forcefields, new SVL code).




<a name="Flex"></a><p><b>I get the error message: Can't check
out license (##)</b>
<p>
This error message means that there is something wrong with the software key or
the license server.  First, make sure that your <tt>license.dat</tt> is correct
and that your key has not expired.  If your <tt>license.dat</tt> file is
correct and you have a valid license file, then consult the (##) in the error
message.  It is a code indicating the possible source of the problem:

<p>
<table>
<tr>
<td rowspan=2 valign="top" align="middle" width=65>
<font size=+1>-4</font>
<td bgcolor="#eeeeee"><b>Detail:</b><br>
MOE cannot be used because all copies of the software
enabled by your license are already in use.
<tr>
<td><b>Resolution:</b><br>
You can either wait until a copy of MOE is freed or call
Chemical Computing Group to discuss obtaining additional copies. This error
message can also be caused by a copy of MOE that did not terminate properly
and therefore did not return the license it was using to the license server.
In this case, it may take up to two hours before the license server makes
the license available again.

<tr>
<td rowspan=2 valign="top" align="middle"><font size=+1>-8</font>
<td bgcolor="#eeeeee"><b>Detail:</b><br>
The format of the license key is not recognized.
<tr>
<td><b>Resolution:</b><br>
Make sure the contents of your license file match exactly the software key
sent to you by Chemical Computing Group.

<tr>
<td rowspan=2 valign="top" align="middle">
<font size=+1>-10</font>
<td bgcolor="#eeeeee"><b>Detail:</b><br>
Your MOE license is expired, i.e. today's date is after the
expiration date in the license file.
<tr>
<td><b>Resolution:</b><br>
Contact Chemical Computing Group to renew your license.

<tr>
<td rowspan=2 valign="top" align="middle"><font size=+1>-15</font>
<td bgcolor="#eeeeee"><b>Detail:</b><br>
MOE cannot connect to the license server.
<tr>
<td><b>Resolution:</b><br>
First, make sure you can reach the license server computer using the
<tt>telnet</tt> or <tt>ping</tt> program. Next, verify that any firewall
between you and the license server allow connection on the port specified
by the SERVER line of the license file. Finally, confirm that lmgrd is running
by logging into the license server computer and listing all the active
processes.  If no process named <tt>lmgrd</tt> can be found then you need to
<a href="#">start the license server</a> using the instructions provided for
your platform.

<tr>
<td rowspan=2 valign="top" align="middle"><font size=+1>-88</font>
<td bgcolor="#eeeeee"><b>Detail:</b><br>
The date on your computer or on the license manager has been set back.
<tr>
<td><b>Resolution:</b><br>
Nothing can be done about this problem until the dates on the hard disk and
the system clock are consistent. The time difference is greater than
a day.

<tr>
<td rowspan=2 valign="top" align="middle"><font size=+1>-96</font>
<td bgcolor="#eeeeee"><b>Detail:</b><br>
Server machine is not responding.
<tr>
<td><b>Resolution:</b><br>
This problem usually occurs when the name of the license server is not
spelled correctly on the SERVER line of the license file. If this is not
the case then the license server is not running and needs to be
<a href="#">started</a> using the instructions provided for your platform.

<tr>
<td rowspan=2 valign="top" align="middle"><font size=+1>-97</font>
<td bgcolor="#eeeeee"><b>Detail:</b><br>
The desired vendor daemon (chemcompd) is down.
<tr>
<td><b>Resolution:</b><br>
The path to chemcompd on the DAEMON line of the license file needs to be
updated. For example, if MOE is installed in directory <tt>/usr/local/moe</tt>
on a UNIX system then the DAEMON line should read like this:
<pre>
    DAEMON chemcompd /usr/local/moe/bin/chemcompd
</pre>
On Windows, if MOE is installed in <tt>C:\moe</tt>, then the DAEMON line should
read like this:
<pre>
    DAEMON chemcompd c:\moe\bin-i4w9\chemcompd
</pre>
Once the license is updated stop and restart the server. If the path to
chemcompd is valid but you still get this error, the problem is most likely
caused by a leftover lock file. Search the license server temporary directory
for a file named <tt>chemcompd.lock</tt> and delete it.
<a href="#">Stop</a> and
<a href="#">restart</a> the server using instructions provided for your
platform.
</table>

<p>
Please refer to the complete
<a href="../flexuser/chap13.htm#wp896839">FlexLM Error Code Description</a>
list to get more information about any error codes not described here.

<p>
If the problem persists, try restarting the <tt>lmgrd</tt> program on the
License Server and make sure it is using the same <tt>license.dat</tt> file as
the MOE you are trying to run.


<a name="Nolibgl"></a><p><b>I get the error message "Cannot find libGL.so.1"
when I start the MOE graphical environment.</b>

<p> Your Linux distribution may not contain the OpenGL libraries.
These can be obtained from a number of sources, consult the website of
your graphics card manufacturer.

<a name="OpenGL"></a><p><b>Problems using MOE with OpenGL drivers for Linux</b>

<p>I have installed the OpenGL drivers for Linux for my video card.
MOE starts fine, except the window is completely black with a few lines
defining the location of the menus, etc. I can't see any text including
the initializing message that usually appears in the window on startup.
If I choose the x11 option, I can see the text but nothing else.
How can I fix this problem?

<p>Try starting the X-server in 15-, 16-, 24- and 32-bit modes.  You will
notice that, as you increase the color depth, you will improve the
visualization in MOE. For example, if you set the color to 16-bit, the
text will appear but you will not see the atoms unless you move them.  If
you increase to 24, you will see more atoms (but not all unless they are
rendered) but not surfaces, etc. However, if you jump up to 32-bit color
mode, you will see all the graphics objects and all the text in MOE.

<p><a href="../index.htm">MOE Table of Contents</a></p>
<hr noshade="noshade" />
<a href="http://www.chemcomp.com"><img src="../images/flogo.gif"
alt="CCG Logo"
align="left" width="30" height="30" border="1" hspace="5" vspace="3" /></a>
<font size="2">
<a href="../legal.html">Copyright</a> &copy; 1997-2010
<a href="http://www.chemcomp.com">Chemical Computing Group Inc.</a><br />
<a href="mailto:info@chemcomp.com"><i>info@chemcomp.com</i></a>
</font>
</body>
</html>
