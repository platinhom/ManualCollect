<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!--
!!    MOE 2010.10 On-Line Manuals
!!    COPYRIGHT (C) 2010
!!        CHEMICAL COMPUTING GROUP INC.  ALL RIGHTS RESERVED.
!!-->

<!--
!!	viewsetup.htm		Visualization Setup chapter
!!
!!	21-oct-2010 (mk) changes for 2010 release
!!	29-sep-2010 (cc) text edits for changes to Render Setup panel.
!!  	10-jun-2010 (mk) stereo + known issues updates
!!  	31-oct-2009 (mk) fix links
!!  	28-oct-2009 (mk) change how to import themes from file
!!  	27-oct-2009 (ac) edited
!!	19-oct-2009 (mk) created for new Visualization Setup panel
!!-->

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css"
href="../manstyle.css" />


<title>3D Visualization Setup</title>

<meta panel Visualization Setup>
<meta panel Stereo Settings>
<meta panel Graphics Card Information>

</head>

<body bgcolor="#ffffff">
<a href="../index.htm"><img src="../images/logo.gif"
alt="CCG Logo" align="right" width="174" height="55" border="0" /></a>
<h4>MOE 2010.10</h4>
<h2>3D Visualization Setup</h2>
<hr noshade="noshade" />

<ul>
<li><a href="#RealTimeRayTracing">High Quality Graphics</a></li>
<li><a href="#Examples">Creating Publication-Ready Images</a>
    <ul>
    <li><a class="example" href="#Examples">Schematic Style</a></li>
    <li><a class="example" href="#Examples2">Create and Use a New Visual Theme</a>
    </li>
    </ul>
</li>
<li><a href="#VisualizationSetup">Visualization Setup</a></li>
    <ul>
    <li><a href="#Themes">Themes</a></li>
    <li><a href="#LightMaterial">Light & Material</a></li>
    <li><a href="#Background">Background</a></li>
    <li><a href="#EffectsText">Effects & Text</a></li>
    <li><a href="#MoleculesRibbons">Molecules & Ribbons</a></li>
    </ul>
<li><a href="#StereoSettings">Stereo Settings</a></li>
<li><a href="#GraphicsCardInformation">Graphics Card Information</a></li>
<li><a href="#AntiAliasing">Anti-Aliasing</a></li>
<li><a href="#KnownIssues">Known Issues</a></li>
<li><a href="#SVLCommands">SVL Commands</a></li>
</ul>

<!-- ======================== HIGH QUALITY GRAPHICS ====================== -->

<a name="RealTimeRayTracing">
</a><h2>High Quality Graphics with Real-Time Ray-Tracing</h2>

<p>
MOE graphics can be run in three different modes depending on
the graphics card capabilities. MOE automatically checks the
graphics card abilities and chooses the best possible
graphics mode.

<center>
<table cellpadding="1">
<tr>
    <td>
    <img src="viewsetup/raytrace.png" alt="Ray Tracing" />
    <p class="caption">Ray Tracing</p>
    </td>
    <td>
    <img src="viewsetup/ppl.png" alt="Per-Pixel-Lighting" />
    <p class="caption">Per-Pixel-Lighting</p>
    </td>
    <td>
    <img src="viewsetup/classic.png" alt="Classic Rendering" />
    <p class="caption">Classic</p>
    </td>
</tr>
</table>
</center>

<h3>Real-Time Ray-Tracing</h3>
<p>
Real-Time Ray-Tracing is the default graphics mode in MOE.
It provides the highest visual quality by rendering atom spheres and 
bond cylinders with a ray-tracing algorithm executed directly on the
graphics card. For all other objects the lighting calculations are
done on every pixel for best visual quality. Both methods are implemented
with the OpenGL Shading Language (GLSL), an OpenGL extension which is
the cornerstone for current and future high-quality visualization.
</p>

<p>
<b>Note:</b> The real-time ray-tracing algorithm needs a modern graphics card 
(manufactured around or after 2006) with OpenGL version 2.1 and GLSL version
1.1 support. 
</p>

<h3>Per-Pixel-Lighting</h3>

<p>
This mode is the fallback for older graphics drivers, which do not fully
implement support for GLSL version 1.1. All graphics objects on the screen 
are rendered using triangle meshes (the traditional method). But the lighting
calculation is done for each pixel, which provides a superior visual
quality than standard OpenGL rendering.
</p>

<p>
<b>Note:</b>
The Per-Pixel-Lighting method requires basic GLSL support in the graphics
driver.
</p>

<h3>Classic Rendering</h3>
<p>
Very old graphics cards and drivers have no GLSL support. In such cases
traditional OpenGL rendering without extensions is used. The classic
mode has no special graphics card requirements.
</p>

<!-- ============================== EXAMPLES ============================= -->

<a name="Examples"></a><h2>Creating Publication-Ready Images</h2>

<div class="example">

<h2>Example 1: Schematic Style</h2>

<ol>
<p><li>
Clear the molecular data in MOE with
<span class="nobr"><b>MOE | File | Close</b></span>
and ensure that there are no running tasks (use the Cancel menu in the
MOE window).
</li></p>
<li><p>
Load the protein 1RO6 with
<span class="nobr"><b>MOE | File | Open</b></span>:
Select <tt>$MOE/sample/mol/1RO6.moe</tt>.
</p></li>
<li>
Change the rendering style:
    <p>
    <ul>
    <li><span class="nobr"><b>MOE | Render | Atoms | Ball And Stick</b></span></li>
    <li>Select the ligand:
    <span class="nobr"><b>MOE | Selection | Ligand</b></span></li>
    <li><span class="nobr"><b>MOE | Render | Atoms | Spacefill</b></span></li>
    <li>Zoom into the active site while the ligand is still selected with
    <span class="nobr"><b>MOE | Render | Center</b></span></li>
    <li>Unselect ligand atoms by clicking into empty space</li>
    </ul>
    </p>
</li>
<li><p>
Open the Visualization Setup panel:
<span class="nobr"><b>MOE | Render | Setup</b></span>
</p></li>
<li><p>
Load the <tt>Schematic</tt> theme from the <b>Theme</b> pulldown.
</p></li>
<li><p>
Open the Save Picture panel with the <b>Save Picture</b> option on the
bottom of the Visualization Setup panel. Make sure that
<tt>Portable Network Graphics (.png)</tt> is selected as the output 
<b>Format</b>.
</p></li>
<li><p>
Select <tt>Journal Small</tt> in the shortcut list of the <b>Dimension</b>
text field. That will set the output dimensions to 1050 x 750 pixels,
which translates to a 3.5 x 2.5 inch picture at 300 dpi (column sized journal
picture).
</p></li>
<li><p>
Check that the option <b>Anti-Alias Picture</b> is on, to ensure maximum
quality. Select a file name at the top (e.g. <tt>schematic.png</tt>) and then
press <b>Save</b>. The picture will be re-rendered with the desired 
dimensions and saved to the specified file.
</p>
<p>
<center>
<img src="viewsetup/schematic.png" alt="Schematic Drawing" />
</center>
</p>
<p><li>
Return to the default visualization settings using the
<b>Default Theme</b> button at the bottom of the Visualization Setup panel.
</p></li>
</ol>

</div>


<a name="Examples2"></a>
<div class="example">

<h2>Example 2: Create and Use a New Visual Theme</h2>

<ol>
<li><p>
Clear the molecular data in MOE with
<span class="nobr"><b>MOE | File | Close</b></span>
and ensure that there are no running tasks (use the Cancel menu in the
MOE window).
</p></li>
<li><p>
Load biotin and a biotin receptor with
<span class="nobr"><b>MOE | File | Open</b></span>:
Select <tt>$MOE/sample/mol/biotin_rec.moe</tt> and <tt>biotin.moe</tt>.
</p></li>
<li>
Change the rendering style of the active site:
    <p>
    <ul>
    <li>Select the ligand:
    <span class="nobr"><b>MOE | Selection | Ligand</b></span></li>
    <li>Zoom into the active site with
    <span class="nobr"><b>MOE | Render | Center</b></span> and the
    mouse wheel.</li>
    <li>
    <span class="nobr"><b>MOE | Render | Atoms | Ball and Stick</b></span>
    </li>
    <li>Unselect ligand atoms by clicking into empty space</li>
    </ul>
    </p>
</li>
<li><p>
Open the Visualization Setup panel:
<span class="nobr"><b>MOE | Render | Setup</b></span>
</p></li>
<li><p>
Make sure that the <tt>Standard</tt> theme is selected in the
<b>Theme</b> pulldown.
</p></li>
<li><p>
Change the lighting. Select the <b>Preset</b> <tt>2 Lights</tt> and
adjust light directions and colors to your liking. To change
the direction of the second light source, select it (<tt>Light 2</tt>) 
in the <b>Lights</b> radio buttons and rotate the trackball in the middle of
the panel.
</p></li>
<li><p>
Manipulate the material properties to make the hetero atoms
stand out a little bit more:
<ul>
<li>Increase the <b>Gloss</b> value of the <b>Material</b>
<tt>Atom Nucleus</tt>.
<li>Select the <tt>Carbon Nucleus</tt> material and decrease the <b>Gloss</b>
and (slightly) the <b>Shading</b> values.</li></ul>
</p></li>
<li><p>
Switch to the <b>Background</b> page of the panel and choose the
<tt>circular fade</tt> <b>Background Type</b>. 
</p></li>
<li><p>
Switch to the <b>Effects & Text</b> page of the panel.
Enable <b>Focal Blur</b> and set the blur value to <tt>0.7</tt>.
To set the focus point onto the ligand click with the middle mouse
button onto an atom in the ligand.
</p></li>
<li><p>
Notice the theme name <tt>Standard (modified)</tt> in blue.
We based the visual settings on the standard theme, but have not
yet saved the changes we made.
To save the visualization settings into a new user theme select <b>New</b>,
enter a new theme name (e.g. <tt>My Theme</tt>), and press <b>Save Theme</b>.
</p></li>
<li><p>
To create a picture, open the Save Picture panel with the 
<b>Save Picture</b> option on the bottom of the Visualization Setup panel.
Make sure that <tt>Portable Network Graphics (.png)</tt> is selected as
the output <b>Format</b>.
</p></li>
<li><p>
Select <tt>PowerPoint</tt> in the shortcut list of the <b>Dimension</b> text
field. This will set the output dimensions to 1000 x 750 pixels,
which is a good size for fullscreen pictures in a Microsoft PowerPoint slide.
</p></li>
<li><p>
Check that the options <b>Anti-Alias Picture</b> and
<b>High Quality Focal Blur</b> are on, to ensure maximum quality.
Select a file name at the top (e.g. <tt>mytheme.png</tt>) and then
press <b>Save</b>. The picture will be re-rendered with the desired 
dimensions and saved to the specified file.
</p>
<p>
<center>
<img src="viewsetup/mytheme.png" alt="Picture with Focal Blur Effect" />
</center>
</p>
</li>
<li><p>
Return to the default visualization settings using the
<b>Default Theme</b> button at the bottom of the Visualization Setup panel.
</p></li>
</ol>

</div>

<!-- ======================== VISUALIZATION SETUP ======================== -->

<a name="VisualizationSetup"></a><h2>Visualization Setup</h2>

<div class="floatright">
<img src="viewsetup/viewsetup.png" alt="Visualization Setup Panel" />
</div>

<p>
The Visualization Setup panel allows you to change lighting, material
properties, backgrounds, colors, and other visual settings in MOE. 
Most parameters in this panel are not accessible from the MOE menus.<br />
To open the Visualization Setup panel, choose
<span class="nobr"><b>MOE | Render | Setup</b></span>
in the MOE Window.
</p>

The panel consists of four pages:
<ul>
<li><a href="#LightMaterial">Light & Material</a></li>
<li><a href="#Background">Background</a></li>
<li><a href="#EffectsText">Effects & Text</a></li>
<li><a href="#MoleculesRibbons">Molecules & Ribbons</a></li>
</ul>

<p>
Each page contains options that are set using graphical devices such as
color pickers, sliders, spin buttons and text fields. When you change parameter
values using the graphical devices, the current sessional parameters
themselves are updated, and their new values are reflected immediately in
the MOE Window.

Settings currently in effect remain so for the duration of the session
and are lost when you close MOE unless they are saved beforehand in
a user theme.
</p>

<!-- ============================== THEMES =============================== -->

<a name="Themes"></a><h3>Themes</h3>

<p>
Themes are collections of visualization settings. All settings of the
Visualization Setup panel can be stored in a theme.
Loading a theme updates all visualization settings in the panel
and refreshes the molecule viewing area.
Multiple themes can be created.
Themes created by the user will be stored in the file
<tt>moe-themes</tt> (on Unix <tt>.moe-themes</tt>) in the user 
<tt>$HOME</tt> directory.
</p>

<p>
By default several standard system themes are already available in
the Visualization Setup panel. These themes are read-only and cannot
be deleted or overwritten by the user.
Any of the themes can be selected as the startup theme, which will be
loaded whenever MOE starts.
</p>

<br clear="both" />

<table cellpadding="5">
<tr>
<td valign="top"><b>Theme</b>

<td valign="top">
List of available visualization themes. The list includes system and
user themes. Selecting a theme name will load the associated
visualization settings into the panel and apply them immediately.
</tr>

<tr>

<td valign="top"><b>New</b>

<td valign="top">
<div class="floatright">
    <img src="viewsetup/savetheme.png"
    alt="Save New Theme" />
    <p class="caption">Choose Theme Name</p>
</div>
Save current visualization settings as a new theme into
the user's themes configuration file <tt>($HOME/moe-themes)</tt>. 
The <b>Theme</b> option menu will change into a text edit box to enter the
new theme name. New theme names with spaces in front or back will not
be accepted as well as names of existing system themes (which
cannot be overwritten).
</tr>

<tr>
<td valign="top"><b>Save</b>

<td valign="top">
Overwrite current theme with the modified visualization settings.
The <b>Save</b> option is only available if the selected theme
was modified and is a user theme, which can be overwritten.
<p>
<span class="tip"><b>Tip!</b></span>
To save changes in a system theme, create a new user theme
using the <b>New</b> option.
</p>
</tr>

<tr>
<td valign="top"><b>Delete</b>

<td valign="top">
Delete currently selected <b>Theme</b>. Only themes from the
user's themes file <tt>($HOME/moe-themes)</tt> can be deleted.
</tr>

<tr>
<td valign="top"><b>Undo</b>

<td valign="top">
Revert changes in the currently selected <b>Theme</b>. This
option is only available if the visualizations settings were
modified.
</tr>

<tr>
<td valign="top"><b><nobr>Use On Startup</nobr></b>

<td valign="top">
Select the current <b>Theme</b> to be loaded the next time MOE is started,
otherwise the <b>Default Theme</b> will be loaded. 
By default the system theme <tt>Standard</tt> is loaded on startup.
Modified themes need to be saved before they can be assigned as
startup theme.
</tr>

<tr>
<td valign="top"><b><nobr>Default Theme</nobr></b>

<td valign="top">
Load and apply the settings of the default startup theme.
The default theme is set with the <b>Use On Startup</b> option.
</tr>

<tr>
<td valign="top"><b><nobr>Save Picture</nobr></b>

<td valign="top">
Shortcut to
<a href="../apps/filesave.htm#Picture">Save Picture panel</a>
(<span class="nobr"><b>MOE | File | Save</b></span>).
</tr>
</table>

<div class="extra_info">
<h4>Import User Themes</h4>
<p>
User themes, created by others, can be imported using SVL functions.<br />
The list of themes in a <tt>moe-themes</tt> file is printed on the
command line with <span class="fcndef">ViewSetupList</span>.
</p>
<pre>
    svl&gt; <span class="fcndef">first ViewSetupList</span> 'moe-themes.joe'
    ['My Theme 1', 'My Theme 2']
</pre>

<p>In this case, the file <tt>moe-themes.joe</tt> is a copy of the
<tt>moe-themes</tt> file from another user's home directory.

<p>
The requested theme is loaded with the function 
<span class="fcndef">ViewSetupLoad</span>.
</p>
<pre>
    svl&gt; <span class="fcndef">ViewSetupLoad</span> ['My Theme 1', 'moe-themes.joe']
</pre>
<p>
To save the current settings as theme with the name <tt>'My New Theme'</tt>:
</p>
<pre>
    svl&gt; <span class="fcndef">ViewSetupSave</span> 'My New Theme'
</pre>
</div>

<!-- ==========================LIGHT & MATERIAL ========================== -->

<a name="LightMaterial"></a><h3>Light & Material</h3>

<p>
The light and material parameters in the Visualization Setup panel
determine how the surfaces of shaded objects (ribbons, atom spheres,
atom bonds, etc.) will look in the MOE Window.
For a shaded object, the color and shade of its surface is determined by:
</p>

<ul>
<li>The light illuminating the surface.</li>
<li>The surface's material properties.</li>
</ul>


<!-- =============================== LIGHTS ============================== -->

<h3>Lights</h3>

<div class="floatright">
    <img src="viewsetup/light.png"
    alt="Light Options of Visualization Setup Panel" />
    <p class="caption">Light Options</p>
</div>

<p>Directional illumination is provided in the MOE Window by
a maximum of three point light sources.  The positions and colors
of these sources are set up in the upper part of the Light & Material
page of the panel. Light directions can be easily set and adjusted
with a trackball widget. A variety of different preset lighting
situations are provided as well.
</p>

<br clear="both" />

<table cellpadding="5">
<tr>
<td valign="top"><b>Lights</b>

<td valign="top">
Select the Light source <b>Light 1</b>, <b>Light 2</b>, or <b>Light 3</b>
to configure. The small symbol on the right in each radio button shows
the current color of the light. A red X indicates that the light is off.
</tr>

<tr>
<td valign="top"><b>Preset</b>

<td valign="top">
Shortcut to a selection of different preset lighting setups.
The presets include setups with one, two, or three lights in
various positions and colors.
</tr>

<tr>
<td valign="top"><b>Color</b>

<td valign="top">
Color of the selected light source.
To dim a light select a darker color.
To turn a light off completely set its color to black.
</tr>

<tr>
<td valign="top"><span class="nobr"><b>X, Y, Z</b></span>

<td valign="top">
Direction of the selected light source.
Use the trackball to change the light direction. Alternatively,
the direction vector can be entered directly into the 
<b>X</b>, <b>Y</b>, or <b>Z</b> text boxes and applied 
by hitting <tt>Return</tt>.
</tr>
</table>

<!-- ============================== MATERIALS ============================ -->

<h3>Materials</h3>

<div class="floatright">
    <img src="viewsetup/material.png"
    alt="Material Options of Visualization Setup Panel" />
    <p class="caption">Material Options</p>
</div>

<p>
The principal material property affecting the appearance of a surface
is its reflectance, i.e. how light is reflected off its surface.
If the surface reflects various wavelengths of light differently, it
will appear to be colored.  If it is highly reflective, it will appear
bright.  Other material properties result in special effects: A shiny
surface may show specular highlights. A transparent surface may transmit
light.
The reflected light from a surface is a combination of ambient, diffuse
and specular contributions.
</p>

<p>
The influence of ambient, diffuse, or specular reflection coefficients and
especially their combinations are hard to picture.
Therefore the material parameter section of the panel combines
these material properties into two values:
<b>Shading</b> and <b>Gloss</b>.
</p>

<p>
Shading is a value between 0 and 255 which describes how three-dimensional
an object looks. At a value of 0 the object looks completely flat, the
direction of the light shining on it is irrelevant. At 255 the opposite is
true. The gloss value (0-255) defines how shiny/polished the object appears
(i.e. if <em>specular</em> highlights are visible on the surface).
Adjusting the shading and gloss values allows a wide variety of materials to be
simulated.
To help find the desired combination of shading and gloss, a set
of various material presets (e.g. metal, rubber, etc.) can be selected from
in the <b>Materials</b> settings panels.
</p>

<center>
<table cellpadding="10">
<tr>
    <td>
    <center>
    <img src="viewsetup/polished.png" alt="Material: Polished Metal" />
    <p class="caption">Polished Metal</p>
    </center>
    </td>
    <td>
    <center>
    <img src="viewsetup/brushed.png" alt="Material: Brushed Metal" />
    <p class="caption">Brushed Metal</p>
    </center>
    </td>
    <td>
    <center>
    <img src="viewsetup/rubber.png" alt="Material: Rubber" />
    <p class="caption">Rubber</p>
    </center>
    </td>
</tr>

<tr>
    <td>
    <center>
    <img src="viewsetup/plastic.png" alt="Material: Plastic" />
    <p class="caption">Plastic</p>
    </center>
    </td>
    <td>
    <center>
    <img src="viewsetup/pearl.png" alt="Material: Pearl" />
    <p class="caption">Pearl</p>
    </center>
    </td>
    <td>
    <center>
    <img src="viewsetup/glass.png" alt="Material: Glass" />
    <p class="caption">Glass</p>
    </center>
    </td>
</tr>

</table>
</center>


<p>
The Visualization Setup panel allows you to independently configure
the material properties of five different aspects of the molecular scene
via popup material panels:
</p>

<br clear="both" />

<center>
<table class="titlebar" border="1" width="90%" cellpadding="3">
    <tr>
	<th>Material</th>
	<th>Objects Affected by Material</th>
    </tr>

    <tr>
    <td valign="top"><b>Atom Nucleus</b>
    <td valign="top">
    Heteroatoms and attached hydrogens. The material
    applies to the atom spheres in the display modes 
    <span class="nobr"><tt>Space Filling,</tt></span>
    <span class="nobr"><tt>Ball and Stick,</tt></span> and
    <span class="nobr"><tt>Ball and Line</tt></span>.
    </tr>

    <tr>
    <td valign="top"><b>Carbon Nucleus</b>
    <td valign="top">
    Carbon atoms and attached hydrogens. The material
    applies to the atom spheres in the display modes 
    <span class="nobr"><tt>Space Filling,</tt></span>
    <span class="nobr"><tt>Ball and Stick,</tt></span> and
    <span class="nobr"><tt>Ball and Line</tt></span>.
    </tr>

    <tr>
    <td valign="top"><b>Atom Bond</b>
    <td valign="top">
    Atomic bonds, hydrogen bonds, and van der Waals contacts.
    </tr>

    <tr>
    <td valign="top"><b>Ribbon</b>
    <td valign="top">
    Protein and nucleic acid ribbons.
    </tr>

    <tr>
    <td valign="top"><b>Surface Default</b>
    <td valign="top">
    Default material of surfaces and other graphic objects.
    </tr>
</table>
</center>

<p>
Any changes to the material using the options in the selected
material panel is automatically applied. The following options
are available to configure the selected material:
</p>

<div class="floatright">
    <img src="viewsetup/matwidget.png"
    alt="Material Settings Panel" />
    <p class="caption">Material Settings Panel</p>
</div>


<table cellpadding="5">
<tr>
<td valign="top"><b>Preset Styles</b>

<td valign="top">
Selection of preset material styles. Selecting one of the preset materials
will set the <b>Shading</b>, <b>Gloss</b>, and <b>Brightness</b> values
for the selected material.
</tr>

<tr>
<td valign="top"><b>S (Shading)</b>

<td valign="top">
Value to determine the three-dimensional effect of the selected material.
It combines the ambient and diffuse reflectance into one value.
A low shading value makes object look <em>flat</em>.
</tr>

<tr>
<td valign="top"><b>G (Gloss)</b>

<td valign="top">
Controls the strength and appearance of specular highlights, 
which make objects appear shiny. A high value results in
a polished material look, while a low value is used for rough
looking materials.
</tr>

<tr>
<td valign="top"><b>B (Brightness)</b>

<td valign="top">
Overall amount of light reflected by the material.
</tr>

<tr>
<td valign="top"><b><span class="nobr">T (Transparency)</span></b>

<td valign="top">
The degree to which ribbons are transparent.
This option is only available when configuring the <b>Ribbon</b> material.
</tr>

<tr>
<td valign="top"><b>Reset</b>

<td valign="top">
Resets <b>Shading</b>, <b>Gloss</b>, and <b>Brightness</b>
(<b>Transparency</b> when available) to the settings when the materials panel
opened.
</tr>

<tr>
<td valign="top"><b>Save</b>

<td valign="top">
Save the current material settings as one of the preset styles.
</tr>
</table>

<p>
The following options can be used to link or transfer settings between
different material.
</p>

<table>
<tr>
<td valign="top"><b>Link Carbon to<br>Atom Material</b>

<td valign="top">
If enabled, changes to the <b>Atom Nucleus</b> material will
be immediately copied to the <b>Carbon Nucleus</b> material.
</tr>

<tr>
<td valign="top"><b>Inherit Bond Material From Atom</b>

<td valign="top">
If enabled, atomic bonds inherit the material from its atom nuclei. The
bonds will ignore in this case the <b>Atom Bond</b> material settings.
</tr>

<tr>
<td valign="top"><b>Reset All<br>
Visible Surfaces</b>

<td valign="top">
Reset the material of all visible surfaces with the current
<b>Surface Default</b> material.
</tr>


<tr>
<td valign="top"><b>Copy Material</b>

<td valign="top">
Copy the values of <b>Shading</b>, <b>Gloss</b>, or <b>Brightness</b>
from one material to one or all other material.
</tr>

</table>

<!-- ============================= BACKGROUND= =========================== -->

<a name="Background"></a><h3>Background</h3>

<p>
MOE allows the changing of background color and style. The 
<b>Background Type</b> radio buttons make it easy to
change very quickly between five basic backgrounds.
Depending on the specific selection, different options to
further customize the background are available. The
multi-colored backgrounds allow you to set up to three base
colors and the location of the center color or the
orientation of the color gradient.
</p>

<center>
    <img src="viewsetup/background.png"
    alt="Background Page of Visualization Setup Panel" />
    <p class="caption">Background Options</p>
</center>

<table cellpadding="5">

<tr>
<td valign="top"><b>Background Type</b>

<td valign="top">

<div class="floatleft">
    <img src="viewsetup/b1.png" alt="Black Background"  />
    <p class="caption">Black</p>
</div>

<div class="floatleft">
    <img src="viewsetup/b2.png" alt="White Background"  />
    <p class="caption">White</p>
</div>

<div class="floatleft">
    <img src="viewsetup/b3.png" alt="Fade Background"  />
    <p class="caption">Fade</p>
</div>

<div class="floatleft">
    <img src="viewsetup/b4.png" alt="Split Background"  />
    <p class="caption">Split</p>
</div>

<div class="floatleft">
    <img src="viewsetup/b5.png" alt="Circular Background"  />
    <p class="caption">Circular Fade</p>
</div>

<br clear="both" />

The rightmost button of the <b>Background Type</b> radio buttons restores
the background, which was set when the Visualization Setup panel was opened.
</tr>

<tr>
<td valign="top"><b>Background</b>

<td valign="top">
Color of a solid-colored background.
</tr>

<tr>
<td valign="top"><b>Text</b>

<td valign="top">
Color of atom labels and messages in the MOE Window.
</tr>

<tr>
<td valign="top"><b>Top<br />Center<br />Middle<br />Bottom<br />Border</b>

<td valign="top">
Base colors of multi-colored background types
(<b>Fade</b>, <b>Split</b>, and <b>Circular Fade</b>).
</tr>

<tr>
<td valign="top"><b>Fog</b>

<td valign="top">
Color of the fog when a multi-colored background is selected.
</tr>

<tr>
<td valign="top"><b>Rotate</b>

<td valign="top">
Rotate <b>Fade</b> or <b>Split</b> background by 90 degrees.
</tr>

<tr>
<td valign="top"><b>Fit</b>

<td valign="top">
If enabled, the background is stretched to fill the
screen regardless of the window dimensions.
</tr>

<tr>
<td valign="top"><b>Center</b>

<td valign="top">
Position of the center color of the <b>Split</b> and <b>Circular Fade</b>
background types.
</tr>

<tr>
<td valign="top"><b>Fog Start</b>

<td valign="top">
Point at which distance dependent fading (Depth Cueing) begins to take effect
(as a percentage of the system bounding box).
</tr>

<tr>
<td valign="top"><b>Fog Strength</b>

<td valign="top">
Strength of the distance dependent fading beyond <b>Fog Start</b>.
</tr>
</table>

<div class="extra_info">
<h4>Customize Background</h4>
<p>
Custom backgrounds can be created with SVL.
The background is a two-dimensional
<a href="../moe/fcnref/gobj.htm">graphics object</a>.
It is accessed with the special graphics object key
<tt>G_BACKGROUND_KEY</tt>. The following special considerations apply to
background vertex objects.

<ul>
<li> The background object key does not need to be created or destroyed.</li>
<li> The background object is a flat unshaded object. i.e. Z-coordinates 
and normals are ignored.</li>
</ul>
Example code to create a checkerboard background:
</p>
<pre>
function checkerboard []
  <span class="fcndef">GSetTitle</span> [G_BACKGROUND_KEY, ''];
  <span class="fcndef">GClearVertexData</span> G_BACKGROUND_KEY;
  local n = 8, x = igen n;	// 8x8 checkerboard
  local n2 = sqr n, x2 = igen n2; 
  <span class="fcndef">GVertex</span> [
    G_BACKGROUND_KEY,
    3,			// triangle segments
    cat rep [[1,2,3,2,4,3], n2] + stretch [4 * (x2 - 1), 6], // idx
    icolor select['darkgray','black',stretch [cat odd (x + [x]), 4]],
    [			// x,y,z
      cat rep[cat rep [[0,1,0,1], n] + stretch [x - 1, 4], n],
      cat rep [[0,0,1,1], n2] + stretch [x - 1, 4*n],
      rep[0, 4*n2]
    ] / (n/2) -1
  ];
endfunction
</pre> 
</div>

<!-- =========================== EFFECTS & TEXT ========================== -->

<a name="EffectsText"></a><h3>Effects & Text</h3>

<div class="floatright">
    <img src="viewsetup/effects.png"
    alt="Effects & Text Page of Visualization Setup Panel" />
    <p class="caption">Effects & Text Options</p>
</div>

<p>
The Effects & Text page contains graphic effects options to enhance
molecule pictures (e.g. focal blur and silhouette outline) as well as
the label text options.
</p>
<p>
The first two options (<b>Quality</b> and <b>Anti-Alias</b>)
control the overall render quality. With the <b>Quality</b> radio buttons
you can change the graphics mode.


<p>
<span class="tip"><b>Caution!</b></span> The optimal graphics mode is
determined automatically. Setting a higher graphics mode, which may
not be supported by the graphics card, can result in graphic artifacts
or slow rendering performance
(See <a href="#KnownIssues">Known Issues</a>).

<p>
<b>Anti-Alias</b> lets you switch the anti-alias modes. See the
<a href="#AntiAliasing">Full-Scene Anti-Aliasing</a> section for more
information about the high quality anti-alias mode.
</p>

<p>
<b>Note:</b> The <b>Quality</b> and <b>Anti-Alias</b> settings are <i>not</i>
saved in the user theme file.
</p>

<p>
The focal blur effect is useful to draw attention to a specific part of
a molecule (e.g. the active site) in static pictures.
The silhouette outline effect can be used to create schematic like
drawings of molecules.
</p>

<p>
The <b>Text & Labels</b> section of the page controls the size and color of
labels in
the MOE 3D window. By default atom labels (element symbols, atom names, 
residue names, etc.) scale together with the molecule on the screen.
The standard height of a label character is 0.5 angstroms. To ensure
readability, a minimum and maximum visible text size is enforced. This size
range can be specified.
In an alternative mode the label size is fixed relative to the size of the
menu font. In that mode the atom labels will not scale together with the
molecules.
</p>

<br clear="both" />

<table cellpadding="5">

<tr>
<td valign="top"><b>Quality</b>

<td valign="top">
Select graphics mode. The optimal setting is determined automatically.
Graphic artifacts can occur if a mode is selected which is not supported by
the graphics card/driver.
<p>
    <table border="1" width="90%" cellpadding="3">
    <tr>
	<td valign="top"><b>Classic</b>
	<td valign="top">
	MOE 2008 triangle-based graphics mode, 
	no special graphics card support needed.
    </tr>
    <tr>
	<td valign="top"><b><span class="nobr">Per Pixel Light</span></b>
	<td valign="top">
	Lighting is calculated on every pixel, not just the triangle vertices,
	which improves e.g. specular highlights. This mode uses OpenGL shading
	language features and requires a modern graphics card.
    </tr>
    <tr>
	<td valign="top"><b>Ray Tracing</b>
	<td valign="top">
	Real-time ray-tracing of spheres and cylinders + Per-Pixel-Lighting 
	surfaces. This mode uses OpenGL shading language features and 
	requires a modern graphics card.
    </tr>
    </table>
</p>

<p>
<span class="tip"><b>Tip!</b></span>
To override the automatic graphics mode determination permanently, set the
RC variable <tt>opengl.glsl.mode</tt> in your <tt>moe-rc</tt> file. Possible
values are: 0 = Classic, 1 = PerPixelLight, 2 = Ray Tracing. 
</p>
</tr>

<tr>
<td valign="top"><b>Anti-Alias</b>

<td valign="top">
Select anti-alias mode. 
To save your setting permanently use
<span class="nobr"><b>MOE | Render | Draw | Save As Default.</b></span>
<p>
    <table border="1" width="90%" cellpadding="3">
    <tr>
	<td valign="top"><b>Off</b>
	<td valign="top">Disable all anti-aliasing
    </tr>
    <tr>
	<td valign="top"><b>Lines Only</b>
	<td valign="top">Anti-alias only thin lines.
    </tr>
    <tr>
	<td valign="top"><b><span class="nobr">High Quality</span></b>
	<td valign="top">
	Enable
	<a href="#AntiAliasing">Full-Scene Accumulation Anti-Aliasing</a>.
	<span class="nobr">
	(equivalent to <b>MOE | Render | Draw | High Quality Anti-Alias</b>)
	</span>
    </tr>
    </table>
<p>
<span class="tip"><b>Tip!</b></span>
The number of accumulation samples used for high quality anti-alias can be
set with the SVL function
<a href="../moe/fcnref/quality.html" class="svl">AntiAlias</a>.
The default number of samples is <tt>4</tt>.

</p>
</tr>

<tr>
<td valign="top"><b>Focal Blur</b>

<td valign="top">
Amount and quality of the focal blur effect. The higher the value the
blurrier far objects get. A value of 0 disables the focal blur effect.
The quality setting controls the number of samples used to generate the
effect. Higher quality reduces the render speed.

<p>
The focal blur effect requires an OpenGL accumulation buffer.

<p>
<span class="tip"><b>Tip!</b></span>
To set the focal point, click with the middle mouse button onto an
atom at the desired focal point.
</p>
</tr>

<tr>
<td valign="top"><b>Silhouette</b>

<td valign="top">
Width (in angstroms) and color of silhouette outlines around objects.
The silhouette outline effect is only available if the <b>Ray Tracing</b>
graphics mode is used.
</tr>

<tr>
<td valign="top"><b>Bond Color</b>

<td valign="top">
If enabled, the colors of the atoms are interpolated across the bond
between them; i.e. the bond color fades between the two atom colors.
This effect is only available if the <b>Ray Tracing</b>
graphics mode is used.
</tr>

<tr>
<td valign="top"><b>Line Width</b>

<td valign="top">
The width of lines in graphics objects (in pixels). This option does not
affect the width of bond lines!
</tr>

<tr>
<td valign="top"><b>Text & Labels</b>

<td valign="top">
<div class="floatright">
    <img src="viewsetup/effects_fixedfont.png"
    alt="Fixed Size Text and Labels Options" />
    <p class="caption">Fixed Size Text &amp; Labels Options</p>
</div>

Choose between <b>Scalable</b> and <b>Fixed Size</b> fonts.
This will be the font used to display atom labels and text in
the MOE Window.
If <b>Scalable</b> is selected, atom labels will scale according
to the zoom level of the molecule in the MOE Window.
Otherwise, the labels are of constant size independent of the zoom.
</tr>

<tr>
<td valign="top"><b>Text Color</b>

<td valign="top">
Color of atom labels and text in the MOE Window.
</tr>

<tr>
<td valign="top"><b>Text Size</b>

<td valign="top">
Size of scalable labels and text (font height in angstroms).
</tr>

<tr>
<td valign="top"><b>Size Factor</b>

<td valign="top">
Multiplicative factor used to calculate the fixed-font label and text size.
The font size is calculated as
the MOE menu font dimensions multiplied by the specified value.
</tr>

<tr>
<td valign="top"><b><span class="nobr">Min Screen Size</span></b>

<td valign="top">
Set the minimum screen display size of scalable labels and text
in the MOE Window.
Labels and text will never be smaller than
the MOE menu font dimensions multiplied by the specified value. 
</tr>

<tr>
<td valign="top"><b><span class="nobr">Max Screen Size</span></b>

<td valign="top">
Set the maximum screen display size of scalable labels and text
in the MOE Window.
Labels and text will never be larger than the MOE menu font dimensions
multiplied by the specified value. 
</tr>
</table>

<!-- ========================= MOLECULES & RIBBONS ======================= -->

<a name="MoleculesRibbons"></a><h3>Molecules & Ribbons</h3>

<p>
The Molecules & Ribbons page of the Visualization Setup panel contains
the dimensions and color parameters of the molecular system as well as
the color and width settings of biopolymer ribbons.

</p>

<p>
<center>
    <img src="viewsetup/molecule.png"
    alt="Molecules & Ribbons Page of Visualization Setup Panel" />
    <p class="caption">Molecules & Ribbons Options</p>
</center>
</p>

<table cellpadding="5">
<tr>
<td valign="top"><b>Atom Color</b>

<td valign="top">
Set individual element colors <nobr>(<b>MOE | Footer | Atoms | Color: Element</b>).</nobr>
The element, whose colors will be changed, can be selected
in the periodic system pulldown next to the color widget.
</tr>

<tr>
<td valign="top"><b>Selected</b>

<td valign="top">
Color of the atom selection (when atoms are selected in the MOE window)
as well as the color of the atom drag selection box. 
</tr>

<tr>
<td valign="top"><b>Default</b> 

<td valign="top">
Element default color refers to the coloring of any elements which do
not have a color specified in the current theme. Element colors for individual
elements can be set and changed with the <b>Atom Color</b> option and
are stored as part of a theme.
</tr>

<tr>
<td valign="top"><b>Small Radius</b>

<td valign="top">
Radii of atom nuclei rendered in small-sphere mode
(Ball-and-Line or Ball-and-Stick display mode). The radii are specified
as a percentage of the atomic van der Waals radii.
At 100%, it is equivalent to that of Space-Filling (sphere) mode, which 
is 0.75 times the van der Waals radius.
</tr>

<tr>
<td valign="top"><b><nobr>Bond Cylinder</nobr></b>

<td valign="top">
Radius of bonds rendered as cylinders (Ball-and-Stick or Stick display mode)
in angstroms.
</tr>

<tr>
<td valign="top"><b>Bond Line</b>

<td valign="top">
Radius of a bond line (Ball-and-Line or Line display mode)
in angstroms. If the graphics <b>Quality</b> is set to <b>Classic</b>,
the value refers to the bond line width in pixels.
</tr>

<tr>
<td valign="top"><b>Meters</b>

<td valign="top">
Color of measurement meters <nobr>(<b>MOE | RHS | Measure | Meters</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>Constraints</b>

<td valign="top">
Color of constraint meters (<nobr><b>MOE | RHS | Constrain</b></nobr>).
</tr>

<tr>
<td valign="top"><b>Periodic Box</b>

<td valign="top">
Color of the periodic system box.
</tr>

<tr>
<td valign="top"><b>Axes</b>

<td valign="top">
Color of the coordinate axes <nobr>(<b>MOE | Render | Draw | 
Coordinate Axes</b>)</nobr>.
</tr>

<tr>
<td valign="top"><b><nobr>H-Bond Line (A)</nobr></b>

<td valign="top">
Radius of non-bonded lines (hydrogen bonds and van der Waals clashes) in angstroms.
</tr>

<tr>
<td valign="top"><b>H-Bonds</b>

<td valign="top">
Color of hydrogen bonds <nobr>(<b>MOE | Footer | Contacts</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>H-pi-Bonds</b>

<td valign="top">
Color of of hydrogen-pi bonds <nobr>(<b>MOE | Footer | Contacts</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>vdW Clashes</b>

<td valign="top">
Color of van der Waals clashes <nobr>(<b>MOE | Footer | Contacts</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>Ribbon Loop</b>

<td valign="top">
Ribbon color and width in angstroms of protein loops 
<nobr>(<b>MOE | Footer | Ribbon</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>Helix</b>

<td valign="top">
Ribbon color and width in angstroms of protein helices.
The parameter applies to all helix types (3-10, alpha, pi)
as well as nucleic acid helices <nobr>(<b>MOE | Footer | Ribbon</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>Strand</b>

<td valign="top">
Ribbon color and width in angstroms of protein strands 
<nobr>(<b>MOE | Footer | Ribbon</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>Turn</b>

<td valign="top">
Ribbon color and width in angstroms of protein turns.
The parameter applies to all turn types (3, 4, 5) 
<nobr>(<b>MOE | Footer | Ribbon</b>).</nobr>
</tr>

<tr>
<td valign="top"><b>Quality</b>

<td valign="top">
Ribbon quality combines the number of ribbon interpolation segments and 
sections into one value. A higher number of segments and sections 
increases the rendering quality of the ribbons.
</tr>
</table>

<!-- ========================== STEREO SETTINGS ========================== -->

<a name="StereoSettings"></a><h2>Stereo Settings</h2>

<p>
The Stereo Settings panel contains the parameters used to specify the
perspective projection and stereo parameters for the various 
<a href="../moe/gui/mainwin.htm#DisplayModes">Display Modes<br /></a> 
in MOE <nobr>(<b>MOE | Render | Stereo</b>).</nobr> To open the panel, select

<span class="nobr"><b>MOE | Render | Stereo | Settings.</b></span>
</p>

<center>
    <img src="viewsetup/stereo.png"
    alt="Stereo Settings Panel" />
    <p class="caption">Stereo Settings Panel</p>
</center>

<p>
It is  rarely necessary to change these parameters. In parallel projection 
mode (<span class="nobr"><b>MOE | Render | Stereo | Parallel</b></span>),
these parameters have no effect.
</p>

<table cellpadding="5">
<tr>
<td valign="top"><b>Eye Location</b>

<td valign="top">
Specifies the viewer's position with respect to the center of the monitor, 
in millimeters. The X-axis points right, the Y-axis points up, and the 
Z-axis points out of the monitor toward the viewer. A negative X-coordinate
and a negative Y-coordinate thus place the viewer below and to the left 
of the center of the monitor.
</tr>

<tr>
<td valign="top"><b>Separation</b>

<td valign="top">
Distance between the viewer's left and right eyes, in millimeters.
<b>Separation</b> and <b>Cross-Eye</b> are used to correct stereo mode
images.
</tr>

<tr>
<td valign="top"><b>Cross-Eye</b>

<td valign="top">
Exchange left and right eye in stereo mode.
The <b>Cross-Eye</b> option is needed on systems where the assignment of left
and right eyes in stereo mode is opposite to that in the MOE default setting.
</tr>

<tr>
<td valign="top"><span class="menu">Anaglyph Glasses</span>

<td valign="top">
Select the color combination of anaglyph glasses used in anaglyph stereo mode
(<span class="nobr"><b>Render | Stereo | Green-Magenta</b></span>).
The color choices are <b>Green-Magenta</b> (green on left eye) and 
<b>Red-Cyan</b> (red on left eye).
</tr>

<tr>
<td valign="top"><b><nobr>Left-Right Separation</nobr></b>

<td valign="top">
Controls the positioning of the two stereo images in Left-Right stereo mode
(<span class="nobr"><b>Render | Stereo | Left-Right</b></span>).
The separation is given as a percentage of the width of the 3D rendering area.
</tr>

<tr>
<td valign="top"><b>Over-Under Visible</b>

<td valign="top">
Controls the positioning of the two stereo images in Over-Under stereo mode
(<span class="nobr"><b>Render | Stereo | Over-Under</b></span>).
This parameter sets the amount of screen (in percentage of height),
which is visible when the stereo emitter is turned on for Over-Under stereo.
</tr>

<tr>
<td valign="top"><b>Offset</b>

<td valign="top">
Defines the number of pixels by which the lower half of the
screen is shifted in Over-Under stereo mode.
</tr>

<tr>
<td valign="top"><b>Save as Default</b>

<td valign="top">
Saves the current stereo and projection settings as the new default values
into the <tt>moe-rc</tt> file, stored in the home directory.
</tr>

<tr>
<td valign="top"><b><nobr>Restore Defaults</nobr></b>

<td valign="top">
Retrieves stereo and projections settings, which were saved using the
<b>Save as Default</b> option.
</tr>

<tr>
<td valign="top"><b><nobr>Standard Settings</nobr></b>

<td valign="top">
Reset stereo and projections settings to factory defaults.
</tr>
</table>

<div class="extra_info">
<h4>Correct Monitor Aspect Ratio</h4>
<p>
MOE relies on information given by the monitor to calculate the
pixel aspect ratio in the 3D MOE Window. Unfortunately some monitors report
back incorrect information. In such cases the molecules in the window
look stretched or squished. This can be corrected by setting a
RC-variable in the user's <tt>moe-rc</tt> file:
</p>
<pre>
vis.pixel_aspect_ratio = &lt;float&gt;    # default: 0.0
</pre>
<p>
The default value is 0.0, in which case MOE uses the information provided
by the monitor. A value of 1.0 will force square pixels. A pixel ratio
slightly above 1.0 will result in "wide" pixels, below 1.0 in "narrow" pixels.
</p>
</div>

<!-- ====================== GRAPHICS CARD INFORMATION ==================== -->

<a name="GraphicsCardInformation"></a><h2>Graphics Card Information</h2>

The Graphics Card Information panel gathers and reports information
about the installed graphics card and driver, as well as the current
status of MOE's 3D graphics system.
Similar information is available on the command line, if MOE is
started with the
<b><a class="svl" href="../install/install.htm#RunSwitch">-gfx</a></b>
command line switch. The panel information can be helpful, in case
of graphics problems.

<p>
To open the panel, select
<span class="nobr"><b>MOE | Help | OpenGL Info.</b></span>
</p>

<center>
    <img src="viewsetup/oglinfo.png"
    alt="Graphics Card Information Panel" />
    <p class="caption">Graphics Card Information Panel</p>
</center>


<table cellpadding="5">

<tr>
<td valign="top"><b>Copy To Clipboard</b>

<td valign="top">
Save the <b>OpenGL Information</b> text onto the clipboard.
</tr>

<tr>
<td valign="top"><b>Save To File</b>

<td valign="top">
Save the <b>OpenGL Information</b> text into a file.
</tr>

<tr>
<td valign="top"><b>Graphics Status</b>

<td valign="top">
The currently selected graphics mode and its status. If the graphics mode
is correctly initialized, the status is <b>OK</b>, otherwise it is
<b>Error</b>.

<p>
The color of the text gives additional information:

<table class="titlebar" border="1" width="90%" cellpadding="3">
    <tr>
	<th>Color</th>
	<th>Meaning</th>
    </tr>

    <tr>
	<td><b><font color="#00ff00">Green</font></b>
	<td>Graphics mode correctly initialized.
    </tr>

    <tr>
	<td><b><font color="#0000ff">Blue</font></b>
	<td>
	Selected graphics mode exceeds MOE recommendations for
	this graphics card, but was correctly initialized.
    </tr>

    <tr>
	<td><b><font color="#ff0000">Red</font></b>
	<td>
	Graphics mode initialization failed.<br />
	Please select another graphics mode.
    </tr>
</table>

</p>

</tr>

<tr>
<td valign="top"><b>OpenGL Information</b>

<td valign="top">

<table class="titlebar" border="1" width="90%" cellpadding="3">
    <tr>
	<th>Section</th>
	<th>Information</th>
    </tr>

    <tr>
	<td><b>Graphics Card Support</b>
	<td>
	Result of MOE's automatic graphics check and
	graphics mode recommendation.
    </tr>

    <tr>
	<td><b>OpenGL Details</b>
	<td>Details of graphics card and driver abilities.
    </tr>

    <tr>
	<td><b>OpenGL Shading Language</b>
	<td>
	Details about the OpenGL Shading Language (GLSL)
	implementation of the graphics driver.
    </tr>

    <tr>
	<td><b>OpenGL Shaders</b>
	<td>
	Status of the GLSL programs. 
    </tr>

    <tr>
	<td><b>OpenGL Visual</b>
	<td>
	Information about OpenGL visual.
	<p> 
	If <b>Include Details of Unused OpenGL Visuals</b>
	is on, a list of all available Visuals is added.
	A "+" in the first column indicates that
	the visual meets the minimum MOE requirements.
	The currently used visual is marked with an "=".
	</p>
    </tr>
</table>
</tr>

</table>

<br clear="both" />

<!-- ==================== FULL-SCENE ANTI-ANTIALIASING =================== -->

<a name="AntiAliasing"></a><h2>Full-Scene Anti-Aliasing</h2>

Anti-Aliasing is an important factor in producing high quality images. Without
anti-aliasing the human eye can see the pixilated nature of low-resolution
computer generated images. These visible artifacts are often referred to as
"jaggies" and appear as stair-like lines instead of smooth straight lines or
curves.

<center>
<table cellpadding="1">
<tr>
    <td>
    <img src="viewsetup/aliased.png" alt="Picture Without Anti-Aliasing" />
    <p class="caption"><b>NO</b> Anti-Aliasing (2x Magnification)</p>
    </td>
    <td>
    <img src="viewsetup/antialiased.png" alt="Picture With Anti-Aliasing" />
    <p class="caption">With Anti-Aliasing (2x Magnification)</p>
    </td>
</tr>
</table>
</center>


Different approaches exist to eliminate the aliasing artifacts:

<h3>Accumulation Anti-Aliasing</h3>

To enable accumulation anti-aliasing within MOE, turn on
<span class="nobr">
<b>MOE | Render | Draw | High Quality Anti-Alias</b></span> or,
equivalently, select <b>High Quality</b> from the
<span class="nobr">Effects &amp; Text</span> page of the
Visualization Setup panel
(<span class="menu">MOE | Render | Setup</span>).

<p>
The method renders the scene multiple times into a hidden
OpenGL accumulation buffer and then displays the average picture.
By default the scene is drawn 4 times for the interactive MOE window,
and 8-12 times when a snapshot is done 
(<span class="nobr"><b>MOE | File | Save</b></span>).
</p>

<p>
Due to the multiple redrawing of the scene, anti-aliased rendering is
slower than without anti-aliasing. Therefore by default the anti-aliasing
is done with a half second delay after the last screen update.
During rotation and manipulation of the molecule no anti-aliasing is
done, in order to speed up the screen refresh. The delayed anti-aliasing can be 
disabled with the option: <span class="nobr">
<b>MOE | Render | Draw | High Quality Rotation</b></span>.
</p>

<p>
High quality anti-aliasing requires, as described, an OpenGL accumulation
buffer. Therefore this method works only if such a buffer is provided
by the graphics card and driver
(see also <a href="#KnownIssues">Known Issues</a>).

Accumulation anti-aliasing delivers the best image quality possible, but
is slower than hardware anti-aliasing.
</p>

<a name="HardwareAntiAliasing"></a>
<h3>Hardware Anti-Aliasing</h3>

<p>
Modern graphics cards provide built-in methods for 
full-scene anti-aliasing (FSAA). Two common methods are
"Supersampling" and "Multisampling":
<ul>
<li>
Supersampling draws the scene internally at a higher resolution
and then down-samples it to the final displayed image. This results in
a high quality image comparable to the accumulation anti-aliasing.
</li>
<li>
Multisampling is a very fast specialized supersampling procedure,
which only does anti-aliasing on polygon edges.
</li>
</ul>
A multitude of sub-variants exist in graphics cards and drivers.
Hardware anti-aliasing in MOE can only be enabled with the
<b><a class="svl" href="../install/install.htm#RunSwitch">-fsaa</a></b>
command line switch. With the switch
<b><a class="svl" href="../install/install.htm#RunSwitch">-fsaa_mode<num></a></b>
one can request a specific number of samples (the higher, the better, but
also slower).
If MOE is started with the <tt>-fsaa</tt> command line switch,
<b>High Quality Anti-Alias</b> is switched off by default in the menu.
</p>

<div class="extra_info">
<h4>Configure Hardware Anti-Aliasing</h4>
<p>
Complete control over the hardware anti-aliasing is available only through
the graphics driver of the operating system.
</p>
<p>
On Linux, NVidia graphics cards can be forced to use a specific anti-aliasing
mode with the environment variable <tt> _GL_FSAA_MODE</tt>. 
Allowed settings range from 0 to 15 and can be determined with the NVidia
program

<pre>
    nvidia-settings --query=fsaa --verbose
</pre>

Setting <tt>__GL_FSAA_MODE</tt> will force every OpenGL program started
from that shell into this specific mode.
</p>
<p>
For further details on how to configure the hardware anti-aliasing of your
specific graphics card, please consult the documentation of your graphics
driver/card.
</p>
</div>

<!-- ============================ KNOWN ISSUES =========================== -->

<a name="KnownIssues"></a><h2>Known Issues</h2>

<p>
Graphics issues are often caused by outdated drivers. It is highly recommended
that the graphics drivers be updated to the newest possible version.
</p>

<p>
Following a list of known issues and their solutions.
</p>

<ul>
<p>
<li>Some older graphics drivers do not support the OpenGL
off-screen buffer used to save pictures. This problem can affect any operating
system. In such cases no panels may obscure the 
MOE 3D window while the picture is being saved or printed. Otherwise the 
obscuring
panel might be visible in the final picture. Updating the graphics driver
typically fixes
this problem.
</p><p>
<li>On Windows XP systems with NVidia drivers running in dual screen mode,
the accumulation buffer becomes corrupted when the 3D window crosses the monitor
border. The problem can be fixed by updating to a driver which supports OpenGL 
version 
2.1.2 or above, or disabling high quality anti-aliasing, or starting MOE with
the <b><a class="svl" href="../install/install.htm#RunSwitch">-noaccum</a></b>
switch.</li>
</p><p>
<li>On old NVidia Riva TNT graphics cards the accumulation buffer is very slow.
Please disable the accumulation buffer support by starting MOE with the 
<b><a class="svl" href="../install/install.htm#RunSwitch">-noaccum</a></b>
switch.</li>
</p><p>

<li>On computer systems with on-board Intel graphics cards
the accumulation buffer is often very slow. Please disable the
accumulation buffer support by starting MOE with the <b><a class="svl"
href="../install/install.htm#RunSwitch">-noaccum</a></b> switch if you
encounter performance problems.</li>

</p><p>
<li>On Unix systems, OpenGL remote display will not work correctly or at all
across operating systems (e.g. running MOE on a SGI system and displaying
the window on a Linux system).<br />
OpenGL remote display from the same operating system (e.g. Linux to Linux) will
support only the classic graphics mode.<br />
If the main screen is black when displaying on a Linux system with an NVidia
graphics card, and the remote system has a non-NVidia card, setting the
environment variable  LIBGL_NO_DRAWARRAYS to 1 prior to starting MOE might
fix the problem.
</li>
</p><p>
<li>On Linux systems with NVidia graphics cards, only the user logged in at 
the visual console has permissions to access the graphics card resources. If 
another user (e.g. guest account) tries to run MOE, the graphics driver 
will print an error message to the shell:
</p>
<pre>
NVIDIA: could not open the device file
         /def/nvidiactl (Permission denied)
NVIDIA: Direct rendering failed; attempting
         indirect rendering.
</pre>
<p>
Consult the NVidia driver README on how to configure the driver to enable 
more general access to the graphics card device.</li>
</p><p>
<li>On Linux systems with some NVidia graphics cards, graphics displays can
become corrupted, if hardware anti-aliasing
(moe <b><a class="svl" href="../install/install.htm#RunSwitch">-fsaa</a></b>)
is used in conjunction with fullscreen mode.</li>
</p><p>
<li>MacOS 10.3 is not supported.</li>
</p><p>
<li>MacOS 10.4 systems with ATI graphics cards do not support the ray-trace or
per-pixel-lighting graphics mode.</li>
</p><p>
<li>On MacOS 10.5.7 and above, the MOE 3D Window might flicker.
Disabling the stereo visual with the command line switch
<b><a class="svl" href="../install/install.htm#RunSwitch">-nostereo</a></b>
fixes the problem.</li>
</p><p>
<li>On MacOS 10.5.7, the OpenGL accumulation buffer support is broken.
High quality anti-aliasing and focal blur in the MOE 3D Window will not
work on such systems. The problem is fixed in MacOS 10.6.3 and/or the
<a href="http://xquartz.macosforge.org">XQuartz X11 server release 2.5.0</a>.
</li>
</ul>
<p>
</p>

<!-- ============================ SVL COMMANDS =========================== -->

<a name="SVLCommands"></a><h2>SVL Commands</h2>

<a href="../moe/fcnref/view.html">Molecule Viewing Functions</a><br />
<a href="../moe/fcnref/quality.html">Rendering Quality Functions</a><br />
<a href="../moe/fcnref/stereo.htm">Stereo Projection Functions</a><br />
<a href="../moe/fcnref/gobj.htm">Rendering Object Functions</a><br />

<!-- ============================== SEE ALSO ============================= -->

<h2>See Also</h2>

<a href="../moe/gui/mainwin.htm">The MOE Window</a><br />
<a href="../apps/filesave.htm">Saving the System</a><br />
<a href="../moe/fcnref/rc.htm">Configuration File Functions</a>


<p><a href="../index.htm">MOE Table of Contents</a></p>
<hr noshade="noshade" />
<a href="http://www.chemcomp.com"><img src="../images/flogo.gif"
alt="CCG Logo"
align="left" width="30" height="30" border="1" hspace="5" vspace="3" /></a>
<font size="2">
<a href="../legal.html">Copyright</a> &copy; 1997-2010
<a href="http://www.chemcomp.com">Chemical Computing Group Inc.</a><br />
<a href="mailto:info@chemcomp.com"><i>info@chemcomp.com</i></a>
</font>
</body>
</html>
