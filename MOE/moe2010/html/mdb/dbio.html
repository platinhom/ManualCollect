<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!--
!!    MOE 2010.10 On-Line Manuals
!!    COPYRIGHT (C) 2010
!!        CHEMICAL COMPUTING GROUP INC.  ALL RIGHTS RESERVED.
!!-->

<!--
!!	dbio.html
!!
!!	25-aug-2010 (kk) updated snaps; added maestro format
!!	07-oct-2008 (kk) minor edit
!!	29-aug-2006 (sb) rewrite for the new dbimport panel
!!	01-jun-2005 (jd) Depict as 2D option in export SD
-->

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css"
href="../manstyle.css" />



<meta panel Export Molecular Database>
<meta panel Import MDB Files>
<meta panel Import ASCII Files>
<meta panel Import SD Files>
<meta panel Import RG Files>
<meta panel Import Tripos Files>
<meta panel Import PDB Files>
<meta panel Import MacroModel Files>
<meta panel Import Maestro Files>
<meta panel Database Import />

<meta panel Merge Databases>
<meta panel Database Merge>

<title>Importing, Exporting, and Merging Databases</title>
</head>

<body bgcolor="#ffffff">
<a href="../index.htm"><img src="../images/logo.gif"
alt="CCG Logo" align="right" width="174" height="55" border="0" /></a>
<h4>MOE 2010.10</h4>
<h2>Importing, Exporting, and Merging Databases</h2>
<hr noshade="noshade" />

<ul>
<li><a href="#ImportingData">Importing Data</a>
</li>
<li><a href="#ImportPanel">Database Import Panel</a>
    <ul>
    <li><a href="#SourceList">Source List</a></li>
    <li><a href="#Fields">Import Fields</a></li>
    <li><a href="#ASCII">Delimited ASCII Databases</a></li>
    <li><a href="#RGF">RG Files</a></li>			
    </ul>
</li>

<li><a href="#ExportingData">Exporting Data</a>
</li>
<li><a href="#Merge">Merging Databases</a>
	<ul>
	<li><a href="#Step1">Step 1: Selecting the Databases to Merge</a>
	<li><a href="#Step2">Step 2: Specifying Key Fields</a>
	<li><a href="#Step3">Step 3: Selecting Fields</a>
	<li><a href="#Step4">Step 4: Selecting Merging Options</a>
	</ul>
</li>
<li><a href="#SVL">SVL Commands</a>
</li>
</ul>

<h2> <a name="ImportingData">Importing Data</a> </h2>

<p>MOE provides functionality to import and export data to and from molecular
databases.  The MDB format is MOE's native database format; this is the
format recognized by the MOE Database Viewer. Database files of other
formats, e.g. SD, RG, Tripos, Maestro or PDB, must first be converted
to MDB format using the Database Import panel in order to be viewed in MOE.

<p>The Database Import panel can be invoked from either the Open panel
(<span class="menu">MOE | File | Open</span>)
or the <b>File</b> menu in the
Database Viewer (<span class="menu">DBV | File | Import</span>).

<p>From the Open panel, select the files to import.  The files must all be
of the same format.  If multiple files of different types are selected,
there will be no available import operation.  Choose the Import button
under Operations.  The Database Import panel will open with the selected
files already loaded.

<p align="center">
<img src="dbio/panel.png" alt="db_Import Panel">
</p>

<p>Files of the following formats can be imported:

<ul>
<li>SD Files (.sdf)
<li>RG Files (.rgf)
<li>Tripos Files (.mol, .mol2)
<li>MacroModel Files (.mmd)
<li>Maestro Files (.mae)
<li>PDB Files (.ent, .pdb)
<li>CIF / MMCIF Files (.cif, .mmcif)
<li>Delimited ASCII (text files, .csv)
<li>MOE Database (.mdb)
<li>MOE Molecules (.moe)
</ul>

<p>Files of unknown type (i.e. not in the above list) will be imported as
raw ASCII data, on a line per line basis.

<p><b>Note:</b> Database formats vary in the kind of information they
can store.  Care must therefore be exercised to avoid data loss when
converting between formats. </p>

<h2> <a name="ImportPanel">Database Import Panel</a> </h2>

<p> The Database Import panel is divided into three sections.  The first
defines the destination database to which all imported data will be
written. The next lists the files to be imported (the <i>source</i> files), and
the last lists the fields chosen for import from those files.

<p><img src="dbio/dest.png" alt="destination database" class="floatright">

<p> The destination database is specified by either entering a name
directly in the <b>Destination</b> text field or pressing <b>Browse</b>
to open a file selection box.

<p>The following options are available:

<ul> <li><b>New Database</b>. If on, a new database of the specified
name will be created; any existing database with the same name will be
overwritten. If off, new fields and data will be appended to the
destination database if it already exists.

<p>
<li><b>Open Database Viewer</b>.  If on, the destination database will
be opened in a Database Viewer.

<p>
<li><b>Record Source File</b>.  If on, a field will be created in
the destination database called '$File' containing the name of the source file
from which the entry was imported.
</ul>

<h3> <a name="SourceList">Source List</a> </h3>

<p>
<img src="dbio/source.png" alt="Source Files" class="floatright">

<p>The <b>Source Files</b> section of the import panel allows you to specify
which files are to be imported and in what order.  The order in which
the files appear in the list is the order in which they will be imported.
To add a file, use the <b>Add...</b> button. To remove one or more files, first
select the files in the list then press the <b>Remove</b> button. To reorder
the files in the list, use the <b>Up</b>, <b>Down</b>, <b>Top</b>,
and <b>Bottom</b> buttons to move the files up one, down one, to the
top or to the bottom of the list, respectively.

<h4>File #</h4>

<p>Each of the files in the source list is assigned a number based
on its position in the list.  These numbers appear in the <b>Source
Files</b> list under the heading <b>#</b>.  The numbers are used in the
<a href="#Fields">Import Fields</a> list to indicate the files in which
that field occurs.

<h4>Expanding the View</h4>

<p>
<img src="dbio/expand.png" alt="Source Expansion View" class="floatright">

<p>Each source file may be displayed in an expanded view, where the field names
and types contained in that file are shown. This state can be toggled
either by double-clicking the source file in the list or by pressing the
<b>Expand</b> or <b>Collapse</b> buttons to expand or collapse the view for the
selected files.

<p>When a source file is in its collapsed view state, a <tt>+</tt> preceding
the <tt>Filetype</tt> will be displayed. In the expanded state, a <tt>-</tt>
will be displayed, and the names and types of the fields contained in that
file will be shown in lines immediately following, each prefixed with
a <tt>|</tt>.

<p>You can control how fields are to be named in the destination
database and how they are to be interpreted by selecting them in the
list and editing the <b>Field Name</b> and <b>Field Type</b> fields
that will appear below the list.  You can also specify that a field be
skipped altogether by choosing <b>Skip Import</b>.  For more details,
please refer to <a href="#Fields">Import Fields</a> below.

<h4>Filetype and Filename</h4>

<p>For each source file, the name and format is shown in the <b>Source
Files</b> list.  The filename is the string that was entered from the
<b>Add...</b> button or obtained from the invoking Open panel. Filenames
are truncated in the display if they are overly long.  The names of
files that are recognized to be in GZIP compressed format are displayed
differently from those of other files. GZIP compressed files will be
first automatically decompressed in order to determine their contents.
In the <b>Source Files</b> list, the root filename will appear prefixed
by the word <tt>gunzip:</tt> to indicate that the decompressed file will
exist only temporarily on the system, for the duration of the import.

<p>If a file was not recognized to be of a given type, you can force its type
by using the <b>Import&nbsp;Type</b> option menu. All recognized file
types are listed in this menu.

<h4>Scan and Cancel</h4>

<p>
<img src="dbio/scan_cancel.png" alt="Scan Source" class="floatright">

<p>Source files can be re-read for their field name and type content by
selecting them and then pressing <b>Scan</b>.  When files are initially added
to the source list, they are scanned for only a limited period of
time. Therefore the initial scan may not determine all of the actual fields
contained in the file. In such a case, re-scanning the file may be desirable.

<p>When a file is scanned, data is read from the file for the purpose of
determining the field names and types contained in the file. Some file formats
allow for additional or new fields to appear anywhere in the file; in this case
they may not be discovered until the entire file has been scanned. For sizable
files, this scanning process may take some time.  Please note that there is no
time limit imposed on the <b>Scan</b> operation -- there will be no timeout to
stop the scanning process.  Press <b>Cancel</b> to manually terminate scanning.

<p>While a file in the source list is being re-scanned, the <b>Range</b> column
in the <b>Source Files</b> list will display the word <tt>SCAN</tt> in the
first position to indicate that scanning is taking place. If you are satisfied
that no new fields will be discovered during re-scanning, press
<b>Cancel</b>.

<h4>Range</h4>

<p>
<img src="dbio/range.png" alt="Set Import Range" class="floatright">

<p>For each source file, you can specify a range of entries to import.
The default is all entries in the file.

<p>Select the desired files in the source list and then enter the range
of entries in the <b>Range</b> text field. The range is specified as
<span class="menu">[Start] - [End]</span>,
inclusive.  Press <tt>Enter</tt> or
<b>Apply</b> to put the range into effect; it will appear in the <b>Source
Files</b> list.  Clear the text field to import all entries.

<ul>
<li><b>[Start]</b>.  First entry to import.  If this value is
greater than the size of the imported file then no entries will be
imported.

<p>
<li><b>[End]</b>.  Last entry to import.  If this value is less than
the start entry then no entries will be imported.

<p>
<li><b>-</b> A hyphen must be used to separate the two range arguments. The
range arguments must be numeric.

</ul>

<h3> <a name="Fields">Import Fields</a> </h3>

<p>
<img src="dbio/fields.png" alt="Import Fields" class="floatright">

<p>The <b>Import Fields</b> list gives the structure of the destination
database. The field names and types listed here will appear in
the database when the import is complete.

<p>Each entry in the list shows, for a given field, the source list file
numbers of each file in which the field is found, the name of the field
as it will appear in the destination database, and the field type. Both
the field names and types may be modified by selecting fields in the list
and making the modifications in the controls found below the list.

<p>A field may be entirely omitted from import by selecting it and pressing the
<b>SKIP</b> button. Pressing this button will result in each field skipped
being highlighted and shown in expanded view in the <b>Source Files</b>
list.  Skipped fields are eliminated from the <b>Import Fields</b> list.
To recover a skipped field, select it from the <b>Source Files</b> list
and turn off <b>Skip Import</b>.

<p>Double-clicking on a field in the <b>Import Fields</b> list will cause
the <b>Source Files</b> list to expand the view of every source file
containing that field.

<h3> <a name="ASCII">Delimited ASCII Databases</a> </h3>

<p>
<img src="dbio/ascii.png" alt="ASCII Options" class="floatright">

<p>The delimited ASCII format provides the only true cross-platform method of
exchanging data, and is supported by most database packages.  A delimited ASCII
format data file is a text file containing data arranged in a table.  The first
line in the file may optionally contain the names (field titles) of the data
fields in the file.  The data table is arranged so that each field is a column
in the file; i.e. each line (row) in the file contains a data value for
every data field.  Data values in a given row are delimited from each other by
a separator character, for example, a comma.  If the data values themselves
contain the separator character, they must be additionally delimited.  In MOE,
<span class="nobr">double quotes (<b>&quot;</b>)</span>
are used for this purpose.

<p>The following is an example of data in an ASCII database: 

<pre>
    &quot;Name&quot;, &quot;Age&quot;, &quot;Height&quot;
    &quot;John&quot;, 41, 178.5
    &quot;Jeffrey&quot;, 37, 194
    &quot;George&quot;, 26, 172.3
    &quot;Joseph&quot;, 32, 181.6
</pre>

<p>This database is comma-delimited with quoted fields. The first line of the
database contains the field names. Quotes are not necessary in this example,
but would have been had one of the names contained a comma (ex: &quot;Smith,
John&quot;).

<p>When importing from an ASCII file into a MOE database, you must ensure that
the import data type of each field to be imported is correct.  MOE performs
automatic ASCII data type detection, however, these types may need to be
adjusted.  Note that <tt>'double'</tt> and <tt>'byte'</tt> types are not
recognized.

<p>If every entry in a field is recognized by
<a class="svl" href="../moe/fcnref/sm_build.html">sm_BuildSyntax</a>
as a valid SMILES string then the field will be imported as <tt>'molecule'</tt>
type, in which case a 3D molecule will be written. If any entries fail this test
then the entire field will be assumed to contain raw character data.

<p>
<img src="dbio/preview.png" alt="ASCII Preview" class="floatright">

<p>To help you decide what is the proper data type for a given field in the
ASCII file, the Import ASCII Files panel has a <b>Preview</b> button
which shows how the first few entries of the ASCII database will be imported
based on the current settings. The preview updates automatically as settings
are changed in the panel.

<p>You can modify the following ASCII specific options: 

<ul>
<li><b>Quotes</b>.  Turn this option on if field values in the ASCII
file are enclosed in <span class="nobr">double quotes (<b>&quot;</b>)</span>.
You can
consult the Preview panel to determine whether to turn this option on or off.

<p>
<li><b>Titles</b>.  Turn this option on if the first line in the
ASCII file gives the field names of the data contained in the file.  If
the option is off, the first line of the file will be interpreted as data,
in which case field names of the form <tt>Field_<i>n</i></tt>, where
<tt><i>n</i></tt> is a number, will be generated.  The field names are
displayed in the Import Fields list.

<p>
<li><b>Delimiter</b>.  Specify the delimiter (comma, space, tab or
semicolon) that is used to separate field values in the ASCII file.
Typically, commas are used.  Having the wrong delimiter will likely have
the effect of only one field being detected per line in the file.

<p><b>Note:</b> It is important to specify settings which match the contents
of the file.

<p>
<li><b>Depict</b>.  Specify the depiction algorithm used when building
a molecule from its SMILES string. 'None' does not change the atomic
coordinates, '2D' employs MOE's 2D depiction algorithm to generate flat
molecular coordinates, and '3D' attempts to build the molecule, avoiding ring
entanglement, followed by molecular energy minimization.

</ul>

<h3> <a name="RGF">RG Files</a> </h3>

<p>
<img src="dbio/rgfile.png" alt="RG File" class="floatright">

<p>Files of type <b>RG</b> contain a single molecule per entry. The molecular
data may be imported to any molecule field in an MDB by changing the default
field name. You can modify the following RG specific import options:

<ul>
<li><b>Depict 2D</b>. Specifies whether to use 3D coordinates or 2D depiction
coordinates for the molecular data.

<li><b>Add Hydrogens</b>. Turn this option on to include hydrogens
in the molecular data.
</ul>


<!-- 
<hr noshade>

<h3><a name="PDB">PDB Files</a></h3>

<p>PDB files may be imported into a MOE database or directly into the MOE
system.  To import a PDB file directly into the MOE system, choose the
<b>Load PDB File</b> button in the operations list in the Open panel.
To import PDB files into a MOE database, choose
<span class="menu">DBV | File | Import | PDB</span>.
Alternatively, you can use
<span class="menu">MOE | Open</span>
to select the files and choose the
<span class="menu">Import PDB File</span> operation.

<p> alt="Import PDB Files"

<p>You can modify the following PDB specific options: 

<ul>
<li><b>Auto-connect Atoms</b>.  If on, atoms will be automatically bonded after
CONECT records are applied.  This option is useful if CONECT records are
missing from a PDB file.  If off, no additional bonding is done.  Note that
atoms of amino acid residues are always automatically bonded.

<li><b>Import All Models</b>.  If on, all models in the PDB file will be
imported.  Each imported model will be assigned a unique chain tag.  If off,
only the first model in the file will be imported.

<li><b>Integrate SEQRES Data</b>.  If on, then after reconciling ATOM and
SEQRES records, empty residues implied in SEQRES records are created.  Also,
modified residues will be named by standard residue names as specified in
MODRES and SEQADV records.

<li><b>Ignore Waters</b>. If on, then all waters in the PDB file will be
ignored.

<li><b>Ignore Hetero</b>. If on, then all hetero residues in the PDB file will
be ignored.

<li><b>Auto-tag</b>.  If on, then any chain with an empty tag will receive the
name of the PDB file as its tag.  This ensures that chains which originate from
a single file are grouped together by their tags even in the case where no tag
is specified in the file.

<li><b>Create Separate Entries for Each Model</b>.  If on, each individual
model from a multiple model PDB file is written to a separate database entry.
Otherwise, all models are written into a single entry.  This option is
available only if Import All Models is on.
</ul>

<h3> <a name="SDF">SD File Format Specifics</a> </h3>

<p>To import SD files into a MOE database, choose
<b><span class="menu">DBV | File | Import | SD</span></b>.
Alternatively, you can use
<b><span class="menu">MOE | Open</span></b> to
select the files and choose the
<b><span class="menu">Import SD File</span></b> operation.

<p> alt="Import SD Files"

<p>The Standard Database File (SD) format allows for exactly one molecular
field and any number of numeric and character fields.

<p>You can modify the following SD specific options:

<ul>
<li>The <b>Scan</b> button allows you to have the entire SD file examined for
field names and types.  By default, MOE scans only the first few entries of the
SD file for new fields.  However, the SD file format permits a new field to be
introduced at any entry in the file.  Scanning only the first few entries may
thus result in fields introduced later in the file remaining undetected, and,
as a consequence, not being imported.

<li><b>Molecule Field</b>. Specifies the name of the molecule field to be
written in the database.

<li><b>Add Hydrogens to Molecules</b>.  Turn this option on to include
hydrogens in the molecular data to import.
</ul>

<hr noshade>
-->


<h2><a name="ExportingData">Exporting Data</a></h2>

<p>Start by either opening or creating a database in the
<a href="db.htm">Database Viewer</a>. To export data, choose
<span class="menu">DBV | File | Save As</span>. The following 
panel appears:

<p align="center">
<img src="dbio/export.png" alt="Export Molecular Database">
</p>

<ol>

<p><li>In the <b>Path</b> field, enter a filename for the exported data or
select an existing name from the list of files. Do not forget to add the
appropriate file extension. For
instance, add the extension <tt>.mdb</tt> when exporting the data as a MOE
molecular database.

<p><li>Choose <b>Selected Fields Only</b> to export data contained in
selected fields only.

<p><li>Choose <b>Selected Entries Only</b> to export data from selected
entries only.


<p><li>Select the <b>Output</b> format of the destination file:
<p><ul>
<p><li>MOE Database (.mdb)


<p><li>SD Files (.sdf)
<p>
<b>Note:</b> Since SD files allow only one molecule field, the first
molecule field encountered in the database will be exported and all
subsequent molecule fields will <i>not</i> be exported.  The name of the
exported molecule field is not saved in the SD file format.

<p>Note that field type information is not preserved. Thus, when reading
in an SD database, field types must be verified manually in the import
panel.


<p><li>SMILES/Text (.txt)

<p>
<b>Note:</b> Delimited ASCII format does not support molecule fields.
As a result, molecule fields are exported as SMILES strings.  Character
fields will be truncated at the first end of line character or the first
delimiter, whichever comes first.


<p><li>Tripos MOL2 (.mol2)
<p>
<b>Note:</b> Since MOL2 files allow only one molecule field, the first
molecule field encountered in the database will be exported and all
subsequent molecule fields will <i>not</i> be exported.  The name of the
exported molecule field is not saved in the MOL2 file format.
Non-molecule fields will not be exported.



<p><li>MacroModel (.mmd)
<p>
<b>Note:</b> Since MacroModel files allow only one molecule field, the first
molecule field encountered in the database will be exported and all
subsequent molecule fields will <i>not</i> be exported.  
The name of the
exported molecule field is not saved in the MacroModel file format.
Non-molecule fields will not be exported.

<p><li>Maestro Files (.mae)

</ul>

<p><li>If you are exporting as a MOE Molecular Database, you can choose
<b>Open Database Viewer on Completion</b> to display the newly created MDB
database file in a MOE Database Viewer.

<p><li>If you are exporting to a Delimited ASCII Database, the following
options are available:

<ul>

<p><li> Specify which delimiter character (comma, space,
tab or semicolon) is to be used to separate field values.  Typically,
commas are used.

<p><li><b>Quoted Fields</b>.  Turn this option on if you wish to enclose
each field value in quotes.  This is necessary if the field values contain
the delimiter character. In general, it is safest to always include
quotes, even though this increases the size of the file.

<p><li><b>Field Titles</b>.  Turn this option on if you wish that the
names of the exported database fields be written as the first line in the
ASCII file.  If you turn this option off, no field names are written.
</ul>

<p><li>If you are exporting to a SD File, the following
options are available:

<ul>
<p><li><b>Omit Hydrogen and Lone Pair Atoms</b>. Turn this option on to
suppress the output of hydrogen and lone pairs from all structures
written.

<p><li><b>Depict as 2D</b>. Turn this option on to rebuild the atomic
coordinates of each structure using a flat layout algorithm.
</ul>
  
<p><li>Press <b>OK</b>. MOE exports the data in the specified format.

</ol>


<a name="Merge"></a>
<h2><a name="Running">Merging Databases</a></h2>

The MOE Merge Databases functionality allows you to combine two databases
based on data they have in common.  The merge operation compares data from
specified fields in the two databases and, when a match is found, combines
the related entries.  As opposed to importing data from one database into
another, merging databases allows you to mesh related data from different
sources in order to form a new database or to modify an existing one. In
set theory terminology, the merge operation provides the proper mechanisms
to compute the union, the intersection and the difference of two
databases.

<p> The merge operation involves four steps, each of which
is depicted in a panel used by the Merge Databases wizard:

<p>
<table cellpadding=5 width=100%>
<tr>
<td valign="top">Step 1
<td valign="top">Database Selection panel
<td valign="top">Specifies which database files to use.
</tr>
<tr>
<td valign="top">Step 2
<td valign="top">Key Field Specification panel
<td valign="top">Defines the relationship between the databases.
</tr>
<tr>
<td valign="top">Step 3
<td valign="top">Field Selection panel
<td valign="top">Specifies what fields to merge.
</tr>

<tr>
<td valign="top">Step 4
<td valign="top">Merging Options panel
<td valign="top">Specifies what types of entries to merge.
</tr>

</table>

To begin the merge operation, open one of the databases in the <a
href="db.htm">Database Viewer</a> and choose
<nobr><b>DBV | File | Merge</nobr></b>.  This opens the Merge Databases
wizard and displays the first page, which is Database Selection (pictured
below).

<h3><a name="Step1"></a>Step 1: Selecting the Databases to Merge</h3>

The first page of the Merge Databases wizard is Database Selection.
In this panel, you specify the two databases to be merged and the
filename of the resulting merged database.
By default, whichever database is open in the Database Viewer and from
which the Merge command was launched becomes Input Database 1.
If no output database is specified, Output Database will be Input Database 1.
New entries are always created at the end of the output database.

<p>
<center>
<img src="dbio/dbmerge1.png" 
alt="Database Selection in Merge Databases Panel">
</center>

<p>
You can enter the paths and names of the databases in the text fields or
use the <b>Browse</b> buttons to select the desired files.

<p>If the <b>Open Database Viewer</b> option is selected, MOE will open the
output database in a Database Viewer allowing you to observe the
progression of the merge operation.

<p>Press <b>Next</b> to proceed to the next step.

<h3><a name="Step2"></a>Step 2: Specifying Key Fields</h3>

The second page of the Merge Databases wizard is Key Field Specification.
In this panel, you define the relationship between the input databases by
specifying pairs of related fields in Database 1 and Database 2.

<p> A <i>key field</i> is a database field which contains data that can be
used as identifiers for entries in the database. SMILES strings are used
as identifiers for molecule field data.  The merge operation considers two
entries related if and only if the values in all their key fields match.
Ideally, key fields should contain unique data (i.e. no duplicate
values, so that each entry has a unique identity). However, as this is
fairly uncommon, up to three key fields can be specified per database.
Although not all three keys need to be defined, it is necessary to define at
least one pair of key fields for the two databases. Undefined means that
the key will not be used.

<p><center><img src="dbio/dbmerge2.png" 
alt="Key Field Specification in Merge Databases Panel"></center>

<p>During the merge, MOE compares data in key1 field of database 1 with
data in key1 field of database 2.  Make sure that each pair of key fields
are of the same date type.
For example, you cannot compare data in a molecule field with data in a 
character field.

<p>If more than one entry in a database share key field values with one
or more entries in the second database, then the result of merging these
entries will be the Cartesian product of all these entries. That is, if two
entries in database 1 share the same key field values with three entries
in Database 2, then 2 &times 3 entries will be created.
  
<p>The <b>Use Selected Entries Only</b> option only applies to databases
currently open in a Database Viewer.  In this case, 
the merge operation will only
consider entries that are selected in the database.  If you intend on
performing a merge operation using selected entries in databases, open
both databases in Database Viewers and select the entries before starting
the merge.  If this option is on but no entries are selected, MOE will 
display an error message. At this point, 
you can return to previous steps, select entries and complete the merge 
successfully.

<p><b>Note:</b> If you specified an Output Database in the Database
Selection page (i.e. the output is neither Input Database 1 nor
Input Database 2), the merge operation will only create key fields of 
Database 1 in the output database.

<p>When you are done, press <b>Next</b> to proceed 
to the next step or <b>Previous</b> to return to the prior step.

<h3><a name="Step3"></a>Step 3: Selecting Fields</h3>

The third page of the Merge Databases wizard is Field Selection. 
In this panel, you select which fields are to be included when two entries
are merged. The list includes all the fields in both input databases, 
except those serving as key fields (defined in the previous step).
If no field is selected in the panel, the merge operation will
automatically import all fields.

<p><center><img src="dbio/dbmerge3.png" 
alt="Field Selection in Merge Databases Panel"></center>

<p> Selected fields will be created in the
output database.  If two fields have the same name,
they will be prefixed by the name of their parent database.

<p><b>Note:</b> If the Output Database is one of the input databases,
its fields will not appear since they already exist
in the output database.  

<p>When you are done, 
press <b>Next</b> to proceed to the next stage or <b>Previous</b> to return
to the prior step.

<h3><a name="Step4"></a>Step 4: Selecting Merging Options</h3>

<p>The fourth page of the Merge Databases wizard is Merging Options. This
panel lets you control which entries will appear in the output database.

<p><i>Shared entries</i> are entries that have the same values in
key fields of both databases. In other words, they are common in both
databases and "share" the same values in all the key fields.

<p><i>Unshared entries</i> are entries whose key field values are not 
found in the other database. In other words, unshared entries have 
unique key fields values.

<p><center><img src="dbio/dbmerge4.png"
alt="Merging Options in Merge Databases Panel">
</center>

<p>
<table width="100%">
<tr>
<td valign="top"><b>Import shared entries:</b>
<td valign="top">Imports entries that are shared by both input
databases. This is 
the intersection of the databases.

</tr>
<tr>
<td valign="top"><b>Import unshared entries of database 1:</b>
<td valign="top">Imports entries that are unique to input database 1. 
This is the difference between database 1 and database 2.

</tr>
<tr>
<td valign="top"><b>Import unshared entries of database 2:</b>
<td valign="top">Imports entries that are unique to input database 2. 
This is the difference between database 2 and database 1.
</tr>
</table>

<p><b>Note:</b> Selecting all three options is equivalent to the union of
database 1 and database 2.

<p>Press <b>Merge</b>. A status report indicates the progress 
of the merge operation.

<p><center>
<img src="dbio/dbmerge5.png" alt="Status Report on Merge Operation">
</center>

<p>For each input database, the status report gives the tally of
entries to process, entries processed to date, duplicate entries, and
unshared entries. Duplicate entries are entries that have
the same key field value. If three entries have the same key field value, 
there will be the original entry plus two duplicate entries.

<a name="SVL"></a><h2>SVL Commands</h2>

<a href="../moe/fcnref/introdb.html">Database Functions</a>


<h2>See Also</h2>

<p>
<a href="db.htm">Database Viewer</a><br />
<a href="dbedit.htm">Creating and Editing a Database</a>
</p>

<p><a href="../index.htm">MOE Table of Contents</a></p>
<hr noshade="noshade" />
<a href="http://www.chemcomp.com"><img src="../images/flogo.gif"
alt="CCG Logo"
align="left" width="30" height="30" border="1" hspace="5" vspace="3" /></a>
<font size="2">
<a href="../legal.html">Copyright</a> &copy; 1997-2010
<a href="http://www.chemcomp.com">Chemical Computing Group Inc.</a><br />
<a href="mailto:info@chemcomp.com"><i>info@chemcomp.com</i></a>
</font>
</body>
</html>
