<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!--
!!    MOE 2010.10 On-Line Manuals
!!    COPYRIGHT (C) 2010
!!        CHEMICAL COMPUTING GROUP INC.  ALL RIGHTS RESERVED.
!!-->

<!--
!!	cellfcn.htm			Cell Parameter functions
!!
!!	31-jan-2004 (pl) created
!!
!!	replaces: box.html
!!-->
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css"
href="../../manstyle.css" />


<title>Crystal Cell Functions</title>
<meta functions CellEnable, CellParameters, CellMatrices>
<meta functions CellImageRenderStyle, CellLatticeRenderStyle>
<meta functions CellLatticeReplicate, CellLatticeInset, CellOverlayPacked>
<meta functions CellCoordinateMode>
<meta functions SpaceGroupMatrix>
<meta functions SPACEGROUP_LATTICE, SPACEGROUP_LONGNAME, SPACEGROUP_NAME>
<meta functions SPACEGROUP_NUMBER,SPACEGROUP_POINTGROUP>
<meta functions SPACEGROUP_STDMONOCLINIC>
<meta functions SPACEGROUP_SYMMETRY,SPACEGROUP_SYMMETRYCOUNT>

<meta obsolete BoxSize, BoxEnable>
</head>
<body bgcolor="#ffffff">
<a href="../../index.htm"><img src="../../images/logo.gif"
alt="CCG Logo" align="right" width="174" height="55" border="0" /></a>
<h4>MOE 2010.10</h4>
<h2>Crystal Cell Functions</h2>
<hr noshade="noshade" />

<h2>Syntax</h2>

<pre>
    old_flag   = <a class="fcnlink" href="#CellEnable">CellEnable</a>     flag
    old_param  = <a class="fcnlink" href="#CellParameters">CellParameters</a> ['spacegroup', size, shape]
    [toC, toF] = <a class="fcnlink" href="#CellMatrices">CellMatrices</a>   ['spacegroup', size, shape]

    old_mode   = <a class="fcnlink" href="#CellCoordinateMode">CellCoordinateMode</a>     'mode'
    old_flag   = <a class="fcnlink" href="#CellOverlayPacked">CellOverlayPacked</a>      flag
    old_repl   = <a class="fcnlink" href="#CellLatticeReplicate">CellLatticeReplicate</a>   [nx, ny, nz]
    old_inset  = <a class="fcnlink" href="#CellLatticeInset">CellLatticeInset</a>       inset
    old_style  = <a class="fcnlink" href="#CellImageRenderStyle">CellImageRenderStyle</a>   ['atom_mode', 'label_mode', color]
    old_style  = <a class="fcnlink" href="#CellLatticeRenderStyle">CellLatticeRenderStyle</a> ['atom_mode', 'label_mode', color]

    <a class="fcnlink" href="#SPACEGROUP_LATTICE">SPACEGROUP_LATTICE</a>
    <a class="fcnlink" href="#SPACEGROUP_LONGNAME">SPACEGROUP_LONGNAME</a>
    <a class="fcnlink" href="#SPACEGROUP_NAME">SPACEGROUP_NAME</a>
    <a class="fcnlink" href="#SPACEGROUP_NUMBER">SPACEGROUP_NUMBER</a>
    <a class="fcnlink" href="#SPACEGROUP_POINTGROUP">SPACEGROUP_POINTGROUP</a>
    <a class="fcnlink" href="#SPACEGROUP_STDMONOCLINIC">SPACEGROUP_STDMONOCLINIC</a>
    <a class="fcnlink" href="#SPACEGROUP_SYMMETRY">SPACEGROUP_SYMMETRY</a>
    <a class="fcnlink" href="#SPACEGROUP_SYMMETRYCOUNT">SPACEGROUP_SYMMETRYCOUNT</a>

    matrices = <a class="fcnlink" href="#SpaceGroupMatrix">SpaceGroupMatrix</a> matrix_names
</pre>

<h3 class="obsolete">Obsolete</h3>

<pre>
    old_size = <a class="fcnlink" href="#BoxSize">BoxSize</a>   size
    old_flag = <a class="fcnlink" href="#BoxEnable">BoxEnable</a> flag
</pre>

<h2>Description</h2>

<p>
The Crystal Cell Functions affect the crystallographic parameters and how
the system will be rendered in MOE.  In addition, general crystallographic
utilities are provided for obtaining information about space groups.
</p>

<p>Please note that the <tt>Boxsize</tt> and <tt>BoxEnable</tt> functions
have been superseded by the <tt>CellParameters</tt> and <tt>CellEnable</tt>
functions.
</p>

<p><a name="CellMatrices"></a></p>
<p><a name="CellParameters"></a></p>
<p><a name="CellEnable"></a></p>
<p><hr noshade="noshade" />

<pre>
old_flag        = <span class="fcndef">CellEnable</span>     flag
old_param       = <span class="fcndef">CellParameters</span> ['spacegroup', size, shape]
[toXYZ, toFrac] = <span class="fcndef">CellMatrices</span>   ['spacegroup', size, shape]
</pre>
<p>
The periodic system is enabled with the <tt>CellEnable</tt> function.  If the
<tt>flag</tt> argument is [] then the enable status is unchanged, otherwise
it is set to the given value: 0 disables periodicity and 1 enables it.  In
all cases, the old value is returned.
The <tt>CellEnable</tt> function replaces the now obsolete
<tt>BoxEnable</tt> function.
<p>
The <tt>CellParameters</tt> function specifies the nature of the
crystallographic unit cell.  The <tt>'spacegroup'</tt> token must be one
of the values in <tt>SPACEGROUP_NAME</tt>.  The <tt>size</tt> argument is
a vector of length 3 containing the unit cell dimensions.  The <tt>shape</tt>
argument is a vector of length 3 containing the unit cell angles (in degrees).
If no arguments are given then the unit cell parameters are not changed.
In all cases, the old parameters are returned.
The <tt>CellParameters</tt> function replaces the now obsolete
<tt>BoxSize</tt> function.

<p>
The <tt>CellMatrices</tt> function returns the fractional-to-cartesian
and cartesian-to-fractional coordinate 3x3 matrices.  If the argument is
null then the current value of <tt>CellParameters</tt> are used.

<p><a name="CellLatticeRenderStyle"></a></p>
<p><a name="CellImageRenderStyle"></a></p>
<p><a name="CellLatticeInset"></a></p>
<p><a name="CellLatticeReplicate"></a></p>
<p><a name="CellOverlayPacked"></a></p>
<p><a name="CellCoordinateMode"></a></p>
<p><hr noshade="noshade" />

<pre>
old_mode  = <span class="fcndef">CellCoordinateMode</span>     'mode'
old_flag  = <span class="fcndef">CellOverlayPacked</span>      flag
old_repl  = <span class="fcndef">CellLatticeReplicate</span>   [nx, ny, nz]
old_inset = <span class="fcndef">CellLatticeInset</span>       inset
old_style = <span class="fcndef">CellImageRenderStyle</span>   ['atom_mode', 'label_mode', color]
old_style = <span class="fcndef">CellLatticeRenderStyle</span> ['atom_mode', 'label_mode', color]
</pre>
<p>
These functions control how MOE will render the molecular system according
to the specified crystal cell parameters.
<p>
<tt>CellCoordinateMode</tt> determines now atomic coordinates are modified
for display purposes (the actual coordinates are unchanged).  The <tt>mode</tt>
argument is a token can can be: <tt>'normal'</tt> means no coordinate
modification; <tt>'packed'</tt> means all atoms will be displayed within
the unit cell; <tt>'molecule'</tt> means that atoms will be composed into
molecules with their their center mass is within the unit cell.  If the
argument is null then the coordinate mode is unchanged.  In all cases, the
old mode token is returned.
<p>
<tt>CellOverlayPacked</tt> enables or disables (according to the argument)
the display of <tt>'packed'</tt> coordinate mode atoms in addition to the
rendering specified by <tt>CellCoordinateMode</tt>.  If the argument is
null then the overlay mode is unchanged; the old flag value is returned.
The rendering style of the overlay coordinates is given by
<tt>CellImageRenderStyle</tt>.
<p>
<tt>CellLatticeReplicate</tt> controls how many times (in each dimension)
the unit cell is replicated graphically.  The default is [1,1,1] meaning
a single unit cell.  A value of [2,3,4] will replicate the unit cell
twice along x, three times along y and four times along z.
If the argument is null then the replication amounts are left unchanged;
the old replication amounts are returned.
<p>
<tt>CellLatticeInset</tt> determines the location of the "primary" unit cell
when the unit cell is replicated with <tt>CellLatticeReplicate</tt>.  The
default value of <i>s</i> means that the primary cell is locate at
(<i>s</i>,<i>s</i>,<i>s</i>) in the lattice.  Cells other than the
primary cell are rendered according to the <tt>CellLatticeRenderStyle</tt>
parameters.
<p>
<tt>CellImageRenderStyle</tt> determines the appearance of atoms rendered
from symmetry operators of the current space group.  The asymmetric unit atoms
are rendered according to the values stored within the atom, residue and
chain objects.  If the argument is null then the render style is left
unchanged; the old style parameters are returned.  The arguments to
<tt>CellImageRenderStyle</tt> are:
<dl>
<dt><tt>atom_mode</tt>
<dd>
A token that determines how atoms are rendered: <tt>'inherit'</tt> means that
the symmetry atoms are rendered in the same manner as the asymmetric unit
atoms; <tt>'line'</tt> means that symmetry atoms are rendered in line mode;
<tt>'hidden'</tt> means that symmetry atoms will not be rendered.
<dt><tt>label_mode</tt>
<dd>
A token that determines how atom labels are rendered: <tt>'inherit'</tt>
means that the symmetry atoms will be labeled in the same way that the
asymmetric unit atoms are rendered; <tt>'hidden'</tt> means that symmetry
atoms will not be labeled.
<dt><tt>color</tt>
<dd>
The color value of symmetry atoms.  A value of -1 means that symmetry atoms
will be rendered with the same color as the asymmetric unit atoms.
A value of -1 means that the symmetry atoms will be rendered with a color
based on the symmetry operator number.  Other values mean that the
symmetry atoms will be rendered in the specified color.
</dl>
<p>
<tt>CellLatticeRenderStyle</tt> determines the appearance of atoms in
non-primary unit cells are rendered.  The arguments and return values are
the same as for <tt>CellImageRenderStyle</tt> except that the primary
unit cell is used as a data source instead of the "asymmetric unit".  Also,
the color value of -2 means that each non-primary atom will be rendered
with a color based upon the index of the unit cell in the lattice replication.

<p><a name="SPACEGROUP_SYMMETRYCOUNT"></a></p>
<p><a name="SPACEGROUP_SYMMETRY"></a></p>
<p><a name="SPACEGROUP_STDMONOCLINIC"></a></p>
<p><a name="SPACEGROUP_POINTGROUP"></a></p>
<p><a name="SPACEGROUP_NUMBER"></a></p>
<p><a name="SPACEGROUP_NAME"></a></p>
<p><a name="SPACEGROUP_LONGNAME"></a></p>
<p><a name="SPACEGROUP_LATTICE"></a></p>
<p><hr noshade="noshade" />

<pre>
<span class="fcndef">SPACEGROUP_LATTICE</span>
<span class="fcndef">SPACEGROUP_LONGNAME</span>
<span class="fcndef">SPACEGROUP_NAME</span>
<span class="fcndef">SPACEGROUP_NUMBER</span>
<span class="fcndef">SPACEGROUP_POINTGROUP</span>
<span class="fcndef">SPACEGROUP_STDMONOCLINIC</span>
<span class="fcndef">SPACEGROUP_SYMMETRY</span>
<span class="fcndef">SPACEGROUP_SYMMETRYCOUNT</span>
</pre>
<p>
The <tt>SPACEGROUP</tt> constants contain information on crystallographic
space groups.  They all have the same length and are indexed by a space
group index (which is not the same as the standard space group numbering
since there can be more than one name for a space group of a given 
standard number).  In the description that follows <i>x</i> denotes the
index into the <tt>SPACEGROUP</tt> constants.

<dl>
<dt><tt>SPACEGROUP_LATTICE(x)</tt>
<dd>
This is the lattice system of space group <i>x</i>.  The value is a token
and is one of <tt>'Triclinic'</tt>, <tt>'Monoclinic'</tt>,
<tt>'Orthorhombic'</tt>, <tt>'Tetragonal'</tt>, <tt>'Trigonal'</tt>,
<tt>'Rhombohedral'</tt>, <tt>'Hexagonal'</tt> or <tt>'Isometric'</tt>.
<p>
<dt><tt>SPACEGROUP_LONGNAME(x)</tt>
<dd>
This is the long (or verbose) name token of the space group <i>x</i> and is
used primarily for display purposes.
<p>
<dt><tt>SPACEGROUP_NAME(x)</tt>
<dd>
This is the "standard" short name token of the space group <i>x</i>.  The
short names are the names used for <tt>CellParameters</tt>.
<p>
<dt><tt>SPACEGROUP_NUMBER(x)</tt>
<dd>
This is the standard space group number for the space group <i>x</i>.
<p>
<dt><tt>SPACEGROUP_POINTGROUP(x)</tt>
<dd>
This is the lattice system of space group <i>x</i>.  The value is a token
and is one of
<tt>'1', '-1', '112', '11m', '112/m', '222', 'mm2', 'mmm', '4', '-4', '4/m',
'422', '4mm', '-42m', '4/mmm', '3', '-3', '32', '3m', '-3m', '6', '-6',
'6/m', '622', '6mm', '-6m2', '6/mmm', '23', '2/m-3', '432', '-43m'</tt>,
or <tt>'4/m-32/m'</tt>.
<p>
<dt><tt>SPACEGROUP_STDMONOCLINIC(x)</tt>
<dd>
This is a flag indicating whether or not space group <i>x</i> follows the
standard monoclinic conventions for choice for choice of fixed angle.
Standard monoclinic space groups set <i>gamma</i> to 90 degrees while
nonstandard monoclinic space groups set <i>beta</i> to 90 degrees.
<p>
<dt><tt>SPACEGROUP_SYMMETRY(x)</tt>
<dd>
This is a vector of tokens representing the symmetry operators for
space group <i>x</i>.   Each operator is encoded in the form a token
with the format 'row1,row2,row3'; each of the rows is a simple expression
like 'x+1/2' or '-z+3/4' expressing the coordinate formula for each dimension.
The identity operator is not included.
<p>
<dt><tt>SPACEGROUP_SYMMETRYCOUNT(x)</tt>
<dd>
This is the number of operators in <tt>SPACEGROUP_SYMMETRY(x)</tt>.  The
total number non-identity symmetry images for space group <i>x</i>.
</dl>

<p><a name="SpaceGroupMatrix"></a></p><p><hr noshade="noshade" />
<pre>matrices = <span class="fcndef">SpaceGroupMatrix</span> matrix_tokens
</pre>
<p>
The <tt>SpaceGroupMatrix</tt> function converts matrix encodings as found
in the <tt>SPACEGROUP_SYMMETRY</tt> constant.  For each token given
in <tt>matrix_tokens</tt> a 3x4 matrix will be returned encoding an
affine transformation intended for use on fractional coordinates.


<h2>References</h2>
<p>
<i>International Tables for Crystallography. Vol. A, Space-group Symmetry</i>;
5th ed. Hahn, Th., Ed., Kluwer Academic Publishers,
Dordrecht/Boston/London (2002). 
<p>
Smith, Joseph V.; <i>Geometrical and Structural Crystallography</i>;
John Wiley & Sons, Inc., New York (1982). 
<p>
Phillips, F.C.; <i>An Introduction to Crystallography</i>; 4th ed.,
Oliver and Boyd, Edinburgh (1971).
</table>

<!--
<h2>See Also</h2>
-->

<p><a href="../../index.htm">MOE Table of Contents</a>&nbsp;&nbsp;<a href="../../fcnindex.html">SVL Function Index</a></p>
<hr noshade="noshade" />
<a href="http://www.chemcomp.com"><img src="../../images/flogo.gif"
alt="CCG Logo"
align="left" width="30" height="30" border="1" hspace="5" vspace="3" /></a>
<font size="2">
<a href="../../legal.html">Copyright</a> &copy; 1997-2010
<a href="http://www.chemcomp.com">Chemical Computing Group Inc.</a><br />
<a href="mailto:info@chemcomp.com"><i>info@chemcomp.com</i></a>
</font>
</body>
</html>
