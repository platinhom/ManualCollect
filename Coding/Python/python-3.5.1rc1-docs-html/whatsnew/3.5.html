<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What’s New In Python 3.5 &mdash; Python 3.5.1rc1 documentation</title>
    
    <link rel="stylesheet" href="../static_/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../static_/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.1rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static_/jquery.js"></script>
    <script type="text/javascript" src="../static_/underscore.js"></script>
    <script type="text/javascript" src="../static_/doctools.js"></script>
    <script type="text/javascript" src="../static_/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Python 3.5.1rc1 documentation"
          href="../static_/opensearch.xml"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Python 3.5.1rc1 documentation" href="../index.html" />
    <link rel="up" title="What’s New in Python" href="index.html" />
    <link rel="next" title="What’s New In Python 3.4" href="3.4.html" />
    <link rel="prev" title="What’s New in Python" href="index.html" />
    <link rel="shortcut icon" type="image/png" href="../static_/py.png" />
    <script type="text/javascript" src="../static_/copybutton.js"></script>
    <script type="text/javascript" src="../static_/version_switch.js"></script>
    
 

  </head>
  <body>  
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.4.html" title="What’s New In Python 3.4"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="What’s New in Python"
             accesskey="P">previous</a> |</li>
        <li><img src="../static_/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &raquo;</li>
        <li>
          <span class="version_switcher_placeholder">3.5.1rc1</span>
          <a href="../index.html">Documentation</a> &raquo;
        </li>

          <li><a href="index.html" accesskey="U">What&#8217;s New in Python</a> &raquo;</li> 
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-s-new-in-python-3-5">
<h1>What&#8217;s New In Python 3.5<a class="headerlink" href="#what-s-new-in-python-3-5" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Editors:</th><td class="field-body">Elvis Pranskevichus &lt;<a class="reference external" href="mailto:elvis&#37;&#52;&#48;magic&#46;io">elvis<span>&#64;</span>magic<span>&#46;</span>io</a>&gt;, Yury Selivanov &lt;<a class="reference external" href="mailto:yury&#37;&#52;&#48;magic&#46;io">yury<span>&#64;</span>magic<span>&#46;</span>io</a>&gt;</td>
</tr>
</tbody>
</table>
<p>This article explains the new features in Python 3.5, compared to 3.4.
Python 3.5 was released on September 13, 2015. &nbsp;See the
<a class="reference external" href="https://docs.python.org/3.5/whatsnew/changelog.html">changelog</a> for a full
list of changes.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="target" id="index-0"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0478"><strong>PEP 478</strong></a> - Python 3.5 Release Schedule</p>
</div>
<div class="section" id="summary-release-highlights">
<h2>Summary &#8211; Release highlights<a class="headerlink" href="#summary-release-highlights" title="Permalink to this headline">¶</a></h2>
<p>New syntax features:</p>
<ul class="simple">
<li><a class="reference internal" href="#whatsnew-pep-492"><em>PEP 492</em></a>, coroutines with async and await syntax.</li>
<li><a class="reference internal" href="#whatsnew-pep-465"><em>PEP 465</em></a>, a new matrix multiplication operator: <tt class="docutils literal"><span class="pre">a</span> <span class="pre">&#64;</span> <span class="pre">b</span></tt>.</li>
<li><a class="reference internal" href="#whatsnew-pep-448"><em>PEP 448</em></a>, additional unpacking generalizations.</li>
</ul>
<p>New library modules:</p>
<ul class="simple">
<li><a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see PEP 484)."><tt class="xref py py-mod docutils literal"><span class="pre">typing</span></tt></a>: <a class="reference internal" href="#whatsnew-pep-484"><em>PEP 484 &#8211; Type Hints</em></a>.</li>
<li><a class="reference internal" href="../library/zipapp.html#module-zipapp" title="zipapp: Manage executable python zip archives"><tt class="xref py py-mod docutils literal"><span class="pre">zipapp</span></tt></a>: <a class="reference internal" href="#whatsnew-zipapp"><em>PEP 441 Improving Python ZIP Application Support</em></a>.</li>
</ul>
<p>New built-in features:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">bytes</span> <span class="pre">%</span> <span class="pre">args</span></tt>, <tt class="docutils literal"><span class="pre">bytearray</span> <span class="pre">%</span> <span class="pre">args</span></tt>: <a class="reference internal" href="#whatsnew-pep-461"><em>PEP 461</em></a> &#8211;
Adding <tt class="docutils literal"><span class="pre">%</span></tt> formatting to bytes and bytearray.</li>
<li>New <a class="reference internal" href="../library/stdtypes.html#bytes.hex" title="bytes.hex"><tt class="xref py py-meth docutils literal"><span class="pre">bytes.hex()</span></tt></a>, <a class="reference internal" href="../library/stdtypes.html#bytearray.hex" title="bytearray.hex"><tt class="xref py py-meth docutils literal"><span class="pre">bytearray.hex()</span></tt></a> and <a class="reference internal" href="../library/stdtypes.html#memoryview.hex" title="memoryview.hex"><tt class="xref py py-meth docutils literal"><span class="pre">memoryview.hex()</span></tt></a>
methods. (Contributed by Arnon Yaari in <a class="reference external" href="https://bugs.python.org/issue9951">issue 9951</a>.)</li>
<li><a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><tt class="xref py py-class docutils literal"><span class="pre">memoryview</span></tt></a> now supports tuple indexing (including multi-dimensional).
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue23632">issue 23632</a>.)</li>
<li>Generators have a new <tt class="docutils literal"><span class="pre">gi_yieldfrom</span></tt> attribute, which returns the
object being iterated by <tt class="docutils literal"><span class="pre">yield</span> <span class="pre">from</span></tt> expressions. (Contributed
by Benno Leslie and Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue24450">issue 24450</a>.)</li>
<li>A new <a class="reference internal" href="../library/exceptions.html#RecursionError" title="RecursionError"><tt class="xref py py-exc docutils literal"><span class="pre">RecursionError</span></tt></a> exception is now raised when maximum
recursion depth is reached.  (Contributed by Georg Brandl
in <a class="reference external" href="https://bugs.python.org/issue19235">issue 19235</a>.)</li>
</ul>
<p>CPython implementation improvements:</p>
<ul class="simple">
<li>When the <tt class="docutils literal"><span class="pre">LC_TYPE</span></tt> locale is the POSIX locale (<tt class="docutils literal"><span class="pre">C</span></tt> locale),
<a class="reference internal" href="../library/sys.html#sys.stdin" title="sys.stdin"><tt class="xref py py-data docutils literal"><span class="pre">sys.stdin</span></tt></a> and <a class="reference internal" href="../library/sys.html#sys.stdout" title="sys.stdout"><tt class="xref py py-data docutils literal"><span class="pre">sys.stdout</span></tt></a> now use the
<tt class="docutils literal"><span class="pre">surrogateescape</span></tt> error handler, instead of the <tt class="docutils literal"><span class="pre">strict</span></tt> error handler.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue19977">issue 19977</a>.)</li>
<li><tt class="docutils literal"><span class="pre">.pyo</span></tt> files are no longer used and have been replaced by a more flexible
scheme that includes the optimization level explicitly in <tt class="docutils literal"><span class="pre">.pyc</span></tt> name.
(See <a class="reference internal" href="#whatsnew-pep-488"><em>PEP 488 overview</em></a>.)</li>
<li>Builtin and extension modules are now initialized in a multi-phase process,
which is similar to how Python modules are loaded.
(See <a class="reference internal" href="#whatsnew-pep-489"><em>PEP 489 overview</em></a>.)</li>
</ul>
<p>Significant improvements in the standard library:</p>
<ul class="simple">
<li><a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><tt class="xref py py-class docutils literal"><span class="pre">collections.OrderedDict</span></tt></a> is now
<a class="reference internal" href="#whatsnew-ordereddict"><em>implemented in C</em></a>, which makes it
4 to 100 times faster.</li>
<li>The <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a> module gained
<a class="reference internal" href="#whatsnew-sslmemorybio"><em>support for Memory BIO</em></a>, which decouples SSL
protocol handling from network IO.</li>
<li>The new <a class="reference internal" href="../library/os.html#os.scandir" title="os.scandir"><tt class="xref py py-func docutils literal"><span class="pre">os.scandir()</span></tt></a> function provides a
<a class="reference internal" href="#whatsnew-pep-471"><em>better and significantly faster way</em></a>
of directory traversal.</li>
<li><a class="reference internal" href="../library/functools.html#functools.lru_cache" title="functools.lru_cache"><tt class="xref py py-func docutils literal"><span class="pre">functools.lru_cache()</span></tt></a> has been mostly
<a class="reference internal" href="#whatsnew-lrucache"><em>reimplemented in C</em></a>, yielding much better
performance.</li>
<li>The new <a class="reference internal" href="../library/subprocess.html#subprocess.run" title="subprocess.run"><tt class="xref py py-func docutils literal"><span class="pre">subprocess.run()</span></tt></a> function provides a
<a class="reference internal" href="#whatsnew-subprocess"><em>streamlined way to run subprocesses</em></a>.</li>
<li>The <a class="reference internal" href="../library/traceback.html#module-traceback" title="traceback: Print or retrieve a stack traceback."><tt class="xref py py-mod docutils literal"><span class="pre">traceback</span></tt></a> module has been significantly
<a class="reference internal" href="#whatsnew-traceback"><em>enhanced</em></a> for improved
performance and developer convenience.</li>
</ul>
<p>Security improvements:</p>
<ul class="simple">
<li>SSLv3 is now disabled throughout the standard library.
It can still be enabled by instantiating a <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><tt class="xref py py-class docutils literal"><span class="pre">ssl.SSLContext</span></tt></a>
manually.  (See <a class="reference external" href="https://bugs.python.org/issue22638">issue 22638</a> for more details; this change was
backported to CPython 3.4 and 2.7.)</li>
<li>HTTP cookie parsing is now stricter, in order to protect
against potential injection attacks. (Contributed by Antoine Pitrou
in <a class="reference external" href="https://bugs.python.org/issue22796">issue 22796</a>.)</li>
</ul>
<p>Windows improvements:</p>
<ul class="simple">
<li>A new installer for Windows has replaced the old MSI.
See <a class="reference internal" href="../using/windows.html#using-on-windows"><em>Using Python on Windows</em></a> for more information.</li>
<li>Windows builds now use Microsoft Visual C++ 14.0, and extension modules
should use the same.</li>
</ul>
<p>Please read on for a comprehensive list of user-facing changes, including many
other smaller improvements, CPython optimizations, deprecations, and potential
porting issues.</p>
</div>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pep-492-coroutines-with-async-and-await-syntax">
<span id="whatsnew-pep-492"></span><h3>PEP 492 - Coroutines with async and await syntax<a class="headerlink" href="#pep-492-coroutines-with-async-and-await-syntax" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-1"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0492"><strong>PEP 492</strong></a> greatly improves support for asynchronous programming in Python
by adding <a class="reference internal" href="../glossary.html#term-awaitable"><em class="xref std std-term">awaitable objects</em></a>,
<a class="reference internal" href="../glossary.html#term-coroutine-function"><em class="xref std std-term">coroutine functions</em></a>,
<a class="reference internal" href="../glossary.html#term-asynchronous-iterable"><em class="xref std std-term">asynchronous iteration</em></a>,
and <a class="reference internal" href="../glossary.html#term-asynchronous-context-manager"><em class="xref std std-term">asynchronous context managers</em></a>.</p>
<p>Coroutine functions are declared using the new <a class="reference internal" href="../reference/compound_stmts.html#async-def"><tt class="xref std std-keyword docutils literal"><span class="pre">async</span> <span class="pre">def</span></tt></a> syntax:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">async</span> <span class="k">def</span> <span class="nf">coro</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s">&#39;spam&#39;</span>
</pre></div>
</div>
<p>Inside a coroutine function, the new <a class="reference internal" href="../reference/expressions.html#await"><tt class="xref std std-keyword docutils literal"><span class="pre">await</span></tt></a> expression can be used
to suspend coroutine execution until the result is available.  Any object
can be <em>awaited</em>, as long as it implements the <a class="reference internal" href="../glossary.html#term-awaitable"><em class="xref std std-term">awaitable</em></a> protocol by
defining the <a class="reference internal" href="../reference/datamodel.html#object.__await__" title="object.__await__"><tt class="xref py py-meth docutils literal"><span class="pre">__await__()</span></tt></a> method.</p>
<p>PEP 492 also adds <a class="reference internal" href="../reference/compound_stmts.html#async-for"><tt class="xref std std-keyword docutils literal"><span class="pre">async</span> <span class="pre">for</span></tt></a> statement for convenient iteration
over asynchronous iterables.</p>
<p>An example of a rudimentary HTTP client written using the new syntax:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">http_get</span><span class="p">(</span><span class="n">domain</span><span class="p">):</span>
    <span class="n">reader</span><span class="p">,</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">open_connection</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>

    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
        <span class="n">b</span><span class="s">&#39;GET / HTTP/1.1&#39;</span><span class="p">,</span>
        <span class="n">b</span><span class="s">&#39;Host: %b&#39;</span> <span class="o">%</span> <span class="n">domain</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;latin-1&#39;</span><span class="p">),</span>
        <span class="n">b</span><span class="s">&#39;Connection: close&#39;</span><span class="p">,</span>
        <span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;&#39;</span>
    <span class="p">]))</span>

    <span class="n">async</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s">&#39;&gt;&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>

    <span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">http_get</span><span class="p">(</span><span class="s">&#39;example.com&#39;</span><span class="p">))</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Similarly to asynchronous iteration, there is a new syntax for asynchronous
context managers.  The following script:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">coro</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">lock</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s">&#39;coro {}: waiting for lock&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s">&#39;coro {}: holding the lock&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s">&#39;coro {}: releasing the lock&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<span class="n">lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
<span class="n">coros</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">coro</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">lock</span><span class="p">),</span> <span class="n">coro</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">lock</span><span class="p">))</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">coros</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>will output:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">coro</span> <span class="mi">2</span><span class="p">:</span> <span class="n">waiting</span> <span class="k">for</span> <span class="n">lock</span>
<span class="n">coro</span> <span class="mi">2</span><span class="p">:</span> <span class="n">holding</span> <span class="n">the</span> <span class="n">lock</span>
<span class="n">coro</span> <span class="mi">1</span><span class="p">:</span> <span class="n">waiting</span> <span class="k">for</span> <span class="n">lock</span>
<span class="n">coro</span> <span class="mi">2</span><span class="p">:</span> <span class="n">releasing</span> <span class="n">the</span> <span class="n">lock</span>
<span class="n">coro</span> <span class="mi">1</span><span class="p">:</span> <span class="n">holding</span> <span class="n">the</span> <span class="n">lock</span>
<span class="n">coro</span> <span class="mi">1</span><span class="p">:</span> <span class="n">releasing</span> <span class="n">the</span> <span class="n">lock</span>
</pre></div>
</div>
<p>Note that both <a class="reference internal" href="../reference/compound_stmts.html#async-for"><tt class="xref std std-keyword docutils literal"><span class="pre">async</span> <span class="pre">for</span></tt></a> and <a class="reference internal" href="../reference/compound_stmts.html#async-with"><tt class="xref std std-keyword docutils literal"><span class="pre">async</span> <span class="pre">with</span></tt></a> can only
be used inside a coroutine function declared with <a class="reference internal" href="../reference/compound_stmts.html#async-def"><tt class="xref std std-keyword docutils literal"><span class="pre">async</span> <span class="pre">def</span></tt></a>.</p>
<p>Coroutine functions are intended to be run inside a compatible event loop,
such as the <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio-event-loop"><em>asyncio loop</em></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-2"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0492"><strong>PEP 492</strong></a> &#8211; Coroutines with async and await syntax</dt>
<dd>PEP written and implemented by Yury Selivanov.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-465-a-dedicated-infix-operator-for-matrix-multiplication">
<span id="whatsnew-pep-465"></span><h3>PEP 465 - A dedicated infix operator for matrix multiplication<a class="headerlink" href="#pep-465-a-dedicated-infix-operator-for-matrix-multiplication" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-3"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0465"><strong>PEP 465</strong></a> adds the <tt class="docutils literal"><span class="pre">&#64;</span></tt> infix operator for matrix multiplication.
Currently, no builtin Python types implement the new operator, however, it
can be implemented by defining <a class="reference internal" href="../reference/datamodel.html#object.__matmul__" title="object.__matmul__"><tt class="xref py py-meth docutils literal"><span class="pre">__matmul__()</span></tt></a>, <a class="reference internal" href="../reference/datamodel.html#object.__rmatmul__" title="object.__rmatmul__"><tt class="xref py py-meth docutils literal"><span class="pre">__rmatmul__()</span></tt></a>,
and <a class="reference internal" href="../reference/datamodel.html#object.__imatmul__" title="object.__imatmul__"><tt class="xref py py-meth docutils literal"><span class="pre">__imatmul__()</span></tt></a> for regular, reflected, and in-place matrix
multiplication.  The semantics of these methods is similar to that of
methods defining other infix arithmetic operators.</p>
<p>Matrix multiplication is a notably common operation in many fields of
mathematics, science, engineering, and the addition of <tt class="docutils literal"><span class="pre">&#64;</span></tt> allows writing
cleaner code:</p>
<div class="highlight-python3"><div class="highlight"><pre>S = (H @ beta - r).T @ inv(H @ V @ H.T) @ (H @ beta - r)
</pre></div>
</div>
<p>instead of:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">S</span> <span class="o">=</span> <span class="n">dot</span><span class="p">((</span><span class="n">dot</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span> <span class="o">-</span> <span class="n">r</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
        <span class="n">dot</span><span class="p">(</span><span class="n">inv</span><span class="p">(</span><span class="n">dot</span><span class="p">(</span><span class="n">dot</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">V</span><span class="p">),</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">)),</span> <span class="n">dot</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span> <span class="o">-</span> <span class="n">r</span><span class="p">))</span>
</pre></div>
</div>
<p>NumPy 1.10 has support for the new operator:</p>
<div class="highlight-python3"><div class="highlight"><pre>&gt;&gt;&gt; import numpy

&gt;&gt;&gt; x = numpy.ones(3)
&gt;&gt;&gt; x
array([ 1., 1., 1.])

&gt;&gt;&gt; m = numpy.eye(3)
&gt;&gt;&gt; m
array([[ 1., 0., 0.],
       [ 0., 1., 0.],
       [ 0., 0., 1.]])

&gt;&gt;&gt; x @ m
array([ 1., 1., 1.])
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-4"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0465"><strong>PEP 465</strong></a> &#8211; A dedicated infix operator for matrix multiplication</dt>
<dd>PEP written by Nathaniel J. Smith; implemented by Benjamin Peterson.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-448-additional-unpacking-generalizations">
<span id="whatsnew-pep-448"></span><h3>PEP 448 - Additional Unpacking Generalizations<a class="headerlink" href="#pep-448-additional-unpacking-generalizations" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-5"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0448"><strong>PEP 448</strong></a> extends the allowed uses of the <tt class="docutils literal"><span class="pre">*</span></tt> iterable unpacking
operator and <tt class="docutils literal"><span class="pre">**</span></tt> dictionary unpacking operator.  It is now possible
to use an arbitrary number of unpackings in function calls:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">*</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="go">1 2 3 4 5</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">fn</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">fn</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="go">1 2 3 4</span>
</pre></div>
</div>
<p>Similarly, tuple, list, set, and dictionary displays allow multiple
unpackings:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">4</span>
<span class="go">(0, 1, 2, 3, 4)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">4</span><span class="p">]</span>
<span class="go">[0, 1, 2, 3, 4]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="o">*</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)}</span>
<span class="go">{0, 1, 2, 3, 4, 5, 6, 7}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}</span>
<span class="go">{&#39;x&#39;: 1, &#39;y&#39;: 2}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-6"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0448"><strong>PEP 448</strong></a> &#8211; Additional Unpacking Generalizations</dt>
<dd>PEP written by Joshua Landau; implemented by Neil Girdhar,
Thomas Wouters, and Joshua Landau.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-461-formatting-support-for-bytes-and-bytearray">
<span id="whatsnew-pep-461"></span><h3>PEP 461 - % formatting support for bytes and bytearray<a class="headerlink" href="#pep-461-formatting-support-for-bytes-and-bytearray" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-7"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0461"><strong>PEP 461</strong></a> adds support for the <tt class="docutils literal"><span class="pre">%</span></tt>
<a class="reference internal" href="../library/stdtypes.html#bytes-formatting"><em>interpolation operator</em></a> to <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><tt class="xref py py-class docutils literal"><span class="pre">bytes</span></tt></a>
and <a class="reference internal" href="../library/functions.html#bytearray" title="bytearray"><tt class="xref py py-class docutils literal"><span class="pre">bytearray</span></tt></a>.</p>
<p>While interpolation is usually thought of as a string operation, there are
cases where interpolation on <tt class="docutils literal"><span class="pre">bytes</span></tt> or <tt class="docutils literal"><span class="pre">bytearrays</span></tt> makes sense, and the
work needed to make up for this missing functionality detracts from the
overall readability of the code.  This issue is particularly important when
dealing with wire format protocols, which are often a mixture of binary
and ASCII compatible text.</p>
<p>Examples:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="s">&#39;Hello %b!&#39;</span> <span class="o">%</span> <span class="n">b</span><span class="s">&#39;World&#39;</span>
<span class="go">b&#39;Hello World!&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="s">&#39;x=%i y=%f&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
<span class="go">b&#39;x=1 y=2.500000&#39;</span>
</pre></div>
</div>
<p>Unicode is not allowed for <tt class="docutils literal"><span class="pre">%b</span></tt>, but it is accepted by <tt class="docutils literal"><span class="pre">%a</span></tt> (equivalent of
<tt class="docutils literal"><span class="pre">repr(obj).encode('ascii',</span> <span class="pre">'backslashreplace')</span></tt>):</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="s">&#39;Hello %b!&#39;</span> <span class="o">%</span> <span class="s">&#39;World&#39;</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">%b requires bytes, or an object that implements __bytes__, not &#39;str&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="s">&#39;price: %a&#39;</span> <span class="o">%</span> <span class="s">&#39;10€&#39;</span>
<span class="go">b&quot;price: &#39;10\\u20ac&#39;&quot;</span>
</pre></div>
</div>
<p>Note that <tt class="docutils literal"><span class="pre">%s</span></tt> and <tt class="docutils literal"><span class="pre">%r</span></tt> conversion types, although supported, should
only be used in codebases that need compatibility with Python 2.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-8"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0461"><strong>PEP 461</strong></a> &#8211; Adding % formatting to bytes and bytearray</dt>
<dd>PEP written by Ethan Furman; implemented by Neil Schemenauer and
Ethan Furman.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-484-type-hints">
<span id="whatsnew-pep-484"></span><h3>PEP 484 - Type Hints<a class="headerlink" href="#pep-484-type-hints" title="Permalink to this headline">¶</a></h3>
<p>Function annotation syntax has been a Python feature since version 3.0
(<span class="target" id="index-9"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3107"><strong>PEP 3107</strong></a>), however the semantics of annotations has been left undefined.</p>
<p>Experience has shown that the majority of function annotation
uses were to provide type hints to function parameters and return values.  It
became evident that it would be beneficial for Python users, if the
standard library included the base definitions and tools for type annotations.</p>
<p><span class="target" id="index-10"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0484"><strong>PEP 484</strong></a> introduces a <a class="reference internal" href="../glossary.html#term-provisional-api"><em class="xref std std-term">provisional module</em></a> to
provide these standard definitions and tools, along with some conventions
for situations where annotations are not available.</p>
<p>For example, here is a simple function whose argument and return type
are declared in the annotations:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="s">&#39;Hello &#39;</span> <span class="o">+</span> <span class="n">name</span>
</pre></div>
</div>
<p>While these annotations are available at runtime through the usual
<tt class="xref py py-attr docutils literal"><span class="pre">__annotations__</span></tt> attribute, <em>no automatic type checking happens at
runtime</em>.  Instead, it is assumed that a separate off-line type checker
(e.g. <a class="reference external" href="http://mypy-lang.org">mypy</a>) will be used for on-demand
source code analysis.</p>
<p>The type system supports unions, generic types, and a special type
named <a class="reference internal" href="../library/typing.html#typing.Any" title="typing.Any"><tt class="xref py py-class docutils literal"><span class="pre">Any</span></tt></a> which is consistent with (i.e. assignable to
and from) all types.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last">
<li><p class="first"><a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see PEP 484)."><tt class="xref py py-mod docutils literal"><span class="pre">typing</span></tt></a> module documentation</p>
</li>
<li><dl class="first docutils">
<dt><span class="target" id="index-11"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0484"><strong>PEP 484</strong></a> &#8211; Type Hints</dt>
<dd><p class="first last">PEP written by Guido van Rossum, Jukka Lehtosalo, and Łukasz Langa;
implemented by Guido van Rossum.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="target" id="index-12"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0483"><strong>PEP 483</strong></a> &#8211; The Theory of Type Hints</dt>
<dd><p class="first last">PEP written by Guido van Rossum</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="pep-471-os-scandir-function-a-better-and-faster-directory-iterator">
<span id="whatsnew-pep-471"></span><h3>PEP 471 - os.scandir() function &#8211; a better and faster directory iterator<a class="headerlink" href="#pep-471-os-scandir-function-a-better-and-faster-directory-iterator" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-13"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0471"><strong>PEP 471</strong></a> adds a new directory iteration function, <a class="reference internal" href="../library/os.html#os.scandir" title="os.scandir"><tt class="xref py py-func docutils literal"><span class="pre">os.scandir()</span></tt></a>,
to the standard library.  Additionally, <a class="reference internal" href="../library/os.html#os.walk" title="os.walk"><tt class="xref py py-func docutils literal"><span class="pre">os.walk()</span></tt></a> is now
implemented using <tt class="docutils literal"><span class="pre">scandir</span></tt>, which makes it 3 to 5 times faster
on POSIX systems and 7 to 20 times faster on Windows systems.  This is
largely achieved by greatly reducing the number of calls to <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><tt class="xref py py-func docutils literal"><span class="pre">os.stat()</span></tt></a>
required to walk a directory tree.</p>
<p>Additionally, <tt class="docutils literal"><span class="pre">scandir</span></tt> returns an iterator, as opposed to returning
a list of file names, which improves memory efficiency when iterating
over very large directories.</p>
<p>The following example shows a simple use of <a class="reference internal" href="../library/os.html#os.scandir" title="os.scandir"><tt class="xref py py-func docutils literal"><span class="pre">os.scandir()</span></tt></a> to display all
the files (excluding directories) in the given <em>path</em> that don&#8217;t start with
<tt class="docutils literal"><span class="pre">'.'</span></tt>. The <a class="reference internal" href="../library/os.html#os.DirEntry.is_file" title="os.DirEntry.is_file"><tt class="xref py py-meth docutils literal"><span class="pre">entry.is_file()</span></tt></a> call will generally
not make an additional system call:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-14"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0471"><strong>PEP 471</strong></a> &#8211; os.scandir() function &#8211; a better and faster directory iterator</dt>
<dd>PEP written and implemented by Ben Hoyt with the help of Victor Stinner.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-475-retry-system-calls-failing-with-eintr">
<span id="whatsnew-pep-475"></span><h3>PEP 475: Retry system calls failing with EINTR<a class="headerlink" href="#pep-475-retry-system-calls-failing-with-eintr" title="Permalink to this headline">¶</a></h3>
<p>An <a class="reference internal" href="../library/errno.html#errno.EINTR" title="errno.EINTR"><tt class="xref py py-data docutils literal"><span class="pre">errno.EINTR</span></tt></a> error code is returned whenever a system call, that
is waiting for I/O, is interrupted by a signal.  Previously, Python would
raise <a class="reference internal" href="../library/exceptions.html#InterruptedError" title="InterruptedError"><tt class="xref py py-exc docutils literal"><span class="pre">InterruptedError</span></tt></a> in such cases.  This meant that, when writing a
Python application, the developer had two choices:</p>
<ol class="arabic simple">
<li>Ignore the <tt class="docutils literal"><span class="pre">InterruptedError</span></tt>.</li>
<li>Handle the <tt class="docutils literal"><span class="pre">InterruptedError</span></tt> and attempt to restart the interrupted
system call at every call site.</li>
</ol>
<p>The first option makes an application fail intermittently.
The second option adds a large amount of boilerplate that makes the
code nearly unreadable.  Compare:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="nb">print</span><span class="p">(</span><span class="s">&quot;Hello World&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="k">while</span> <span class="k">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s">&quot;Hello World&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">except</span> <span class="ne">InterruptedError</span><span class="p">:</span>
        <span class="k">continue</span>
</pre></div>
</div>
<p><span class="target" id="index-15"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0475"><strong>PEP 475</strong></a> implements automatic retry of system calls on
<tt class="docutils literal"><span class="pre">EINTR</span></tt>.  This removes the burden of dealing with <tt class="docutils literal"><span class="pre">EINTR</span></tt>
or <a class="reference internal" href="../library/exceptions.html#InterruptedError" title="InterruptedError"><tt class="xref py py-exc docutils literal"><span class="pre">InterruptedError</span></tt></a> in user code in most situations and makes
Python programs, including the standard library, more robust.  Note that
the system call is only retried if the signal handler does not raise an
exception.</p>
<p>Below is a list of functions which are now retried when interrupted
by a signal:</p>
<ul class="simple">
<li><a class="reference internal" href="../library/functions.html#open" title="open"><tt class="xref py py-func docutils literal"><span class="pre">open()</span></tt></a> and <a class="reference internal" href="../library/io.html#io.open" title="io.open"><tt class="xref py py-func docutils literal"><span class="pre">io.open()</span></tt></a>;</li>
<li>functions of the <a class="reference internal" href="../library/faulthandler.html#module-faulthandler" title="faulthandler: Dump the Python traceback."><tt class="xref py py-mod docutils literal"><span class="pre">faulthandler</span></tt></a> module;</li>
<li><a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><tt class="xref py py-mod docutils literal"><span class="pre">os</span></tt></a> functions: <a class="reference internal" href="../library/os.html#os.fchdir" title="os.fchdir"><tt class="xref py py-func docutils literal"><span class="pre">fchdir()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.fchmod" title="os.fchmod"><tt class="xref py py-func docutils literal"><span class="pre">fchmod()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.fchown" title="os.fchown"><tt class="xref py py-func docutils literal"><span class="pre">fchown()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.fdatasync" title="os.fdatasync"><tt class="xref py py-func docutils literal"><span class="pre">fdatasync()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.fstat" title="os.fstat"><tt class="xref py py-func docutils literal"><span class="pre">fstat()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.fstatvfs" title="os.fstatvfs"><tt class="xref py py-func docutils literal"><span class="pre">fstatvfs()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.fsync" title="os.fsync"><tt class="xref py py-func docutils literal"><span class="pre">fsync()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.ftruncate" title="os.ftruncate"><tt class="xref py py-func docutils literal"><span class="pre">ftruncate()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.mkfifo" title="os.mkfifo"><tt class="xref py py-func docutils literal"><span class="pre">mkfifo()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.mknod" title="os.mknod"><tt class="xref py py-func docutils literal"><span class="pre">mknod()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.open" title="os.open"><tt class="xref py py-func docutils literal"><span class="pre">open()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.posix_fadvise" title="os.posix_fadvise"><tt class="xref py py-func docutils literal"><span class="pre">posix_fadvise()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.posix_fallocate" title="os.posix_fallocate"><tt class="xref py py-func docutils literal"><span class="pre">posix_fallocate()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.pread" title="os.pread"><tt class="xref py py-func docutils literal"><span class="pre">pread()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.pwrite" title="os.pwrite"><tt class="xref py py-func docutils literal"><span class="pre">pwrite()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.read" title="os.read"><tt class="xref py py-func docutils literal"><span class="pre">read()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.readv" title="os.readv"><tt class="xref py py-func docutils literal"><span class="pre">readv()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.sendfile" title="os.sendfile"><tt class="xref py py-func docutils literal"><span class="pre">sendfile()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.wait3" title="os.wait3"><tt class="xref py py-func docutils literal"><span class="pre">wait3()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.wait4" title="os.wait4"><tt class="xref py py-func docutils literal"><span class="pre">wait4()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.wait" title="os.wait"><tt class="xref py py-func docutils literal"><span class="pre">wait()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.waitid" title="os.waitid"><tt class="xref py py-func docutils literal"><span class="pre">waitid()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.waitpid" title="os.waitpid"><tt class="xref py py-func docutils literal"><span class="pre">waitpid()</span></tt></a>, <a class="reference internal" href="../library/os.html#os.write" title="os.write"><tt class="xref py py-func docutils literal"><span class="pre">write()</span></tt></a>,
<a class="reference internal" href="../library/os.html#os.writev" title="os.writev"><tt class="xref py py-func docutils literal"><span class="pre">writev()</span></tt></a>;</li>
<li>special cases: <a class="reference internal" href="../library/os.html#os.close" title="os.close"><tt class="xref py py-func docutils literal"><span class="pre">os.close()</span></tt></a> and <a class="reference internal" href="../library/os.html#os.dup2" title="os.dup2"><tt class="xref py py-func docutils literal"><span class="pre">os.dup2()</span></tt></a> now ignore
<a class="reference internal" href="../library/errno.html#errno.EINTR" title="errno.EINTR"><tt class="xref py py-data docutils literal"><span class="pre">EINTR</span></tt></a> errors; the syscall is not retried (see the PEP
for the rationale);</li>
<li><a class="reference internal" href="../library/select.html#module-select" title="select: Wait for I/O completion on multiple streams."><tt class="xref py py-mod docutils literal"><span class="pre">select</span></tt></a> functions: <a class="reference internal" href="../library/select.html#select.devpoll.poll" title="select.devpoll.poll"><tt class="xref py py-func docutils literal"><span class="pre">devpoll.poll()</span></tt></a>,
<a class="reference internal" href="../library/select.html#select.epoll.poll" title="select.epoll.poll"><tt class="xref py py-func docutils literal"><span class="pre">epoll.poll()</span></tt></a>,
<a class="reference internal" href="../library/select.html#select.kqueue.control" title="select.kqueue.control"><tt class="xref py py-func docutils literal"><span class="pre">kqueue.control()</span></tt></a>,
<a class="reference internal" href="../library/select.html#select.poll.poll" title="select.poll.poll"><tt class="xref py py-func docutils literal"><span class="pre">poll.poll()</span></tt></a>, <a class="reference internal" href="../library/select.html#select.select" title="select.select"><tt class="xref py py-func docutils literal"><span class="pre">select()</span></tt></a>;</li>
<li>methods of the <a class="reference internal" href="../library/socket.html#socket.socket" title="socket.socket"><tt class="xref py py-class docutils literal"><span class="pre">socket</span></tt></a> class: <a class="reference internal" href="../library/socket.html#socket.socket.accept" title="socket.socket.accept"><tt class="xref py py-meth docutils literal"><span class="pre">accept()</span></tt></a>,
<a class="reference internal" href="../library/socket.html#socket.socket.connect" title="socket.socket.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> (except for non-blocking sockets),
<a class="reference internal" href="../library/socket.html#socket.socket.recv" title="socket.socket.recv"><tt class="xref py py-meth docutils literal"><span class="pre">recv()</span></tt></a>, <a class="reference internal" href="../library/socket.html#socket.socket.recvfrom" title="socket.socket.recvfrom"><tt class="xref py py-meth docutils literal"><span class="pre">recvfrom()</span></tt></a>,
<a class="reference internal" href="../library/socket.html#socket.socket.recvmsg" title="socket.socket.recvmsg"><tt class="xref py py-meth docutils literal"><span class="pre">recvmsg()</span></tt></a>, <a class="reference internal" href="../library/socket.html#socket.socket.send" title="socket.socket.send"><tt class="xref py py-meth docutils literal"><span class="pre">send()</span></tt></a>,
<a class="reference internal" href="../library/socket.html#socket.socket.sendall" title="socket.socket.sendall"><tt class="xref py py-meth docutils literal"><span class="pre">sendall()</span></tt></a>, <a class="reference internal" href="../library/socket.html#socket.socket.sendmsg" title="socket.socket.sendmsg"><tt class="xref py py-meth docutils literal"><span class="pre">sendmsg()</span></tt></a>,
<a class="reference internal" href="../library/socket.html#socket.socket.sendto" title="socket.socket.sendto"><tt class="xref py py-meth docutils literal"><span class="pre">sendto()</span></tt></a>;</li>
<li><a class="reference internal" href="../library/signal.html#signal.sigtimedwait" title="signal.sigtimedwait"><tt class="xref py py-func docutils literal"><span class="pre">signal.sigtimedwait()</span></tt></a> and <a class="reference internal" href="../library/signal.html#signal.sigwaitinfo" title="signal.sigwaitinfo"><tt class="xref py py-func docutils literal"><span class="pre">signal.sigwaitinfo()</span></tt></a>;</li>
<li><a class="reference internal" href="../library/time.html#time.sleep" title="time.sleep"><tt class="xref py py-func docutils literal"><span class="pre">time.sleep()</span></tt></a>.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-16"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0475"><strong>PEP 475</strong></a> &#8211; Retry system calls failing with EINTR</dt>
<dd>PEP and implementation written by Charles-François Natali and
Victor Stinner, with the help of Antoine Pitrou (the French connection).</dd>
</dl>
</div>
</div>
<div class="section" id="pep-479-change-stopiteration-handling-inside-generators">
<span id="whatsnew-pep-479"></span><h3>PEP 479: Change StopIteration handling inside generators<a class="headerlink" href="#pep-479-change-stopiteration-handling-inside-generators" title="Permalink to this headline">¶</a></h3>
<p>The interaction of generators and <a class="reference internal" href="../library/exceptions.html#StopIteration" title="StopIteration"><tt class="xref py py-exc docutils literal"><span class="pre">StopIteration</span></tt></a> in Python 3.4 and
earlier was sometimes surprising, and could conceal obscure bugs.  Previously,
<tt class="docutils literal"><span class="pre">StopIteration</span></tt> raised accidentally inside a generator function was
interpreted as the end of the iteration by the loop construct driving the
generator.</p>
<p><span class="target" id="index-17"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0479"><strong>PEP 479</strong></a> changes the behavior of generators: when a <tt class="docutils literal"><span class="pre">StopIteration</span></tt>
exception is raised inside a generator, it is replaced with a
<a class="reference internal" href="../library/exceptions.html#RuntimeError" title="RuntimeError"><tt class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></tt></a> before it exits the generator frame.  The main goal of
this change is to ease debugging in the situation where an unguarded
<a class="reference internal" href="../library/functions.html#next" title="next"><tt class="xref py py-func docutils literal"><span class="pre">next()</span></tt></a> call raises <tt class="docutils literal"><span class="pre">StopIteration</span></tt> and causes the iteration controlled
by the generator to terminate silently. This is particularly pernicious in
combination with the <tt class="docutils literal"><span class="pre">yield</span> <span class="pre">from</span></tt> construct.</p>
<p>This is a backwards incompatible change, so to enable the new behavior,
a <a class="reference internal" href="../glossary.html#term-future"><em class="xref std std-term">__future__</em></a> import is necessary:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">generator_stop</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">([]))</span>
<span class="gp">... </span>    <span class="k">yield</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">())</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">2</span>, in <span class="n">gen</span>
<span class="gr">StopIteration</span>

<span class="go">The above exception was the direct cause of the following exception:</span>

<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">RuntimeError</span>: <span class="n">generator raised StopIteration</span>
</pre></div>
</div>
<p>Without a <tt class="docutils literal"><span class="pre">__future__</span></tt> import, a <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><tt class="xref py py-exc docutils literal"><span class="pre">PendingDeprecationWarning</span></tt></a> will be
raised whenever a <tt class="docutils literal"><span class="pre">StopIteration</span></tt> exception is raised inside a generator.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-18"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0479"><strong>PEP 479</strong></a> &#8211; Change StopIteration handling inside generators</dt>
<dd>PEP written by Chris Angelico and Guido van Rossum. Implemented by
Chris Angelico, Yury Selivanov and Nick Coghlan.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-485-a-function-for-testing-approximate-equality">
<span id="whatsnew-pep-485"></span><h3>PEP 485: A function for testing approximate equality<a class="headerlink" href="#pep-485-a-function-for-testing-approximate-equality" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-19"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0485"><strong>PEP 485</strong></a> adds the <a class="reference internal" href="../library/math.html#math.isclose" title="math.isclose"><tt class="xref py py-func docutils literal"><span class="pre">math.isclose()</span></tt></a> and <a class="reference internal" href="../library/cmath.html#cmath.isclose" title="cmath.isclose"><tt class="xref py py-func docutils literal"><span class="pre">cmath.isclose()</span></tt></a>
functions which tell whether two values are approximately equal or
&#8220;close&#8221; to each other.  Whether or not two values are considered
close is determined according to given absolute and relative tolerances.
Relative tolerance is the maximum allowed difference between <tt class="docutils literal"><span class="pre">isclose</span></tt>
arguments, relative to the larger absolute value:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="mf">4.99998</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">rel_tol</span><span class="o">=</span><span class="mi">1</span><span class="n">e</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">rel_tol</span><span class="o">=</span><span class="mi">1</span><span class="n">e</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>It is also possible to compare two values using absolute tolerance, which
must be a non-negative value:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="mf">4.99998</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">abs_tol</span><span class="o">=</span><span class="mf">0.00003</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">abs_tol</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-20"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0485"><strong>PEP 485</strong></a> &#8211; A function for testing approximate equality</dt>
<dd>PEP written by Christopher Barker; implemented by Chris Barker and
Tal Einat.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-486-make-the-python-launcher-aware-of-virtual-environments">
<span id="whatsnew-pep-486"></span><h3>PEP 486: Make the Python Launcher aware of virtual environments<a class="headerlink" href="#pep-486-make-the-python-launcher-aware-of-virtual-environments" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-21"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0486"><strong>PEP 486</strong></a> makes the Windows launcher (see <span class="target" id="index-22"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0397"><strong>PEP 397</strong></a>) aware of an active
virtual environment. When the default interpreter would be used and the
<tt class="docutils literal"><span class="pre">VIRTUAL_ENV</span></tt> environment variable is set, the interpreter in the virtual
environment will be used.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-23"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0486"><strong>PEP 486</strong></a> &#8211; Make the Python Launcher aware of virtual environments</dt>
<dd>PEP written and implemented by Paul Moore.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-488-elimination-of-pyo-files">
<span id="whatsnew-pep-488"></span><h3>PEP 488: Elimination of PYO files<a class="headerlink" href="#pep-488-elimination-of-pyo-files" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-24"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0488"><strong>PEP 488</strong></a> does away with the concept of <tt class="docutils literal"><span class="pre">.pyo</span></tt> files. This means that
<tt class="docutils literal"><span class="pre">.pyc</span></tt> files represent both unoptimized and optimized bytecode. To prevent the
need to constantly regenerate bytecode files, <tt class="docutils literal"><span class="pre">.pyc</span></tt> files now have an
optional <tt class="docutils literal"><span class="pre">opt-</span></tt> tag in their name when the bytecode is optimized. This has the
side-effect of no more bytecode file name clashes when running under either
<a class="reference internal" href="../using/cmdline.html#cmdoption-O"><em class="xref std std-option">-O</em></a> or <a class="reference internal" href="../using/cmdline.html#cmdoption-OO"><em class="xref std std-option">-OO</em></a>. Consequently, bytecode files generated from
<a class="reference internal" href="../using/cmdline.html#cmdoption-O"><em class="xref std std-option">-O</em></a>, and <a class="reference internal" href="../using/cmdline.html#cmdoption-OO"><em class="xref std std-option">-OO</em></a> may now exist simultaneously.
<a class="reference internal" href="../library/importlib.html#importlib.util.cache_from_source" title="importlib.util.cache_from_source"><tt class="xref py py-func docutils literal"><span class="pre">importlib.util.cache_from_source()</span></tt></a> has an updated API to help with
this change.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-25"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0488"><strong>PEP 488</strong></a> &#8211; Elimination of PYO files</dt>
<dd>PEP written and implemented by Brett Cannon.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-489-multi-phase-extension-module-initialization">
<span id="whatsnew-pep-489"></span><h3>PEP 489: Multi-phase extension module initialization<a class="headerlink" href="#pep-489-multi-phase-extension-module-initialization" title="Permalink to this headline">¶</a></h3>
<p><span class="target" id="index-26"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0489"><strong>PEP 489</strong></a> updates extension module initialization to take advantage of the
two step module loading mechanism introduced by <span class="target" id="index-27"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0451"><strong>PEP 451</strong></a> in Python 3.4.</p>
<p>This change brings the import semantics of extension modules that opt-in to
using the new mechanism much closer to those of Python source and bytecode
modules, including the ability to use any valid identifier as a module name,
rather than being restricted to ASCII.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><span class="target" id="index-28"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0489"><strong>PEP 489</strong></a> &#8211; Multi-phase extension module initialization</dt>
<dd>PEP written by Petr Viktorin, Stefan Behnel, and Nick Coghlan;
implemented by Petr Viktorin.</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="other-language-changes">
<h2>Other Language Changes<a class="headerlink" href="#other-language-changes" title="Permalink to this headline">¶</a></h2>
<p>Some smaller changes made to the core Python language are:</p>
<ul class="simple">
<li>Added the <tt class="docutils literal"><span class="pre">&quot;namereplace&quot;</span></tt> error handlers.  The <tt class="docutils literal"><span class="pre">&quot;backslashreplace&quot;</span></tt>
error handlers now work with decoding and translating.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19676">issue 19676</a> and <a class="reference external" href="https://bugs.python.org/issue22286">issue 22286</a>.)</li>
<li>The <a class="reference internal" href="../using/cmdline.html#cmdoption-b"><em class="xref std std-option">-b</em></a> option now affects comparisons of <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><tt class="xref py py-class docutils literal"><span class="pre">bytes</span></tt></a> with
<a class="reference internal" href="../library/functions.html#int" title="int"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23681">issue 23681</a>.)</li>
<li>New Kazakh <tt class="docutils literal"><span class="pre">kz1048</span></tt> and Tajik <tt class="docutils literal"><span class="pre">koi8_t</span></tt> <a class="reference internal" href="../library/codecs.html#standard-encodings"><em>codecs</em></a>.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue22682">issue 22682</a> and <a class="reference external" href="https://bugs.python.org/issue22681">issue 22681</a>.)</li>
<li>Property docstrings are now writable. This is especially useful for
<a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><tt class="xref py py-func docutils literal"><span class="pre">collections.namedtuple()</span></tt></a> docstrings.
(Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue24064">issue 24064</a>.)</li>
<li>Circular imports involving relative imports are now supported.
(Contributed by Brett Cannon and Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue17636">issue 17636</a>.)</li>
</ul>
</div>
<div class="section" id="new-modules">
<h2>New Modules<a class="headerlink" href="#new-modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="typing">
<h3>typing<a class="headerlink" href="#typing" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see PEP 484)."><tt class="xref py py-mod docutils literal"><span class="pre">typing</span></tt></a> <a class="reference internal" href="../glossary.html#term-provisional-api"><em class="xref std std-term">provisional</em></a> module
provides standard definitions and tools for function type annotations.
See <a class="reference internal" href="#whatsnew-pep-484"><em>Type Hints</em></a> for more information.</p>
</div>
<div class="section" id="zipapp">
<span id="whatsnew-zipapp"></span><h3>zipapp<a class="headerlink" href="#zipapp" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/zipapp.html#module-zipapp" title="zipapp: Manage executable python zip archives"><tt class="xref py py-mod docutils literal"><span class="pre">zipapp</span></tt></a> module (specified in <span class="target" id="index-29"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0441"><strong>PEP 441</strong></a>) provides an API and
command line tool for creating executable Python Zip Applications, which
were introduced in Python 2.6 in <a class="reference external" href="https://bugs.python.org/issue1739468">issue 1739468</a>, but which were not well
publicized, either at the time or since.</p>
<p>With the new module, bundling your application is as simple as putting all
the files, including a <tt class="docutils literal"><span class="pre">__main__.py</span></tt> file, into a directory <tt class="docutils literal"><span class="pre">myapp</span></tt>
and running:</p>
<div class="highlight-python3"><div class="highlight"><pre>$ python -m zipapp myapp
$ python myapp.pyz
</pre></div>
</div>
<p>The module implementation has been contributed by Paul Moore in
<a class="reference external" href="https://bugs.python.org/issue23491">issue 23491</a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="target" id="index-30"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0441"><strong>PEP 441</strong></a> &#8211; Improving Python ZIP Application Support</p>
</div>
</div>
</div>
<div class="section" id="improved-modules">
<h2>Improved Modules<a class="headerlink" href="#improved-modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="argparse">
<h3>argparse<a class="headerlink" href="#argparse" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/argparse.html#argparse.ArgumentParser" title="argparse.ArgumentParser"><tt class="xref py py-class docutils literal"><span class="pre">ArgumentParser</span></tt></a> class now allows to disable
<a class="reference internal" href="../library/argparse.html#prefix-matching"><em>abbreviated usage</em></a> of long options by setting
<a class="reference internal" href="../library/argparse.html#allow-abbrev"><em>allow_abbrev</em></a> to <tt class="docutils literal"><span class="pre">False</span></tt>.  (Contributed by Jonathan Paugh,
Steven Bethard, paul j3 and Daniel Eriksson in <a class="reference external" href="https://bugs.python.org/issue14910">issue 14910</a>.)</p>
</div>
<div class="section" id="asyncio">
<h3>asyncio<a class="headerlink" href="#asyncio" title="Permalink to this headline">¶</a></h3>
<p>Since the <a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O, event loop, coroutines and tasks."><tt class="xref py py-mod docutils literal"><span class="pre">asyncio</span></tt></a> module is <a class="reference internal" href="../glossary.html#term-provisional-api"><em class="xref std std-term">provisional</em></a>,
all changes introduced in Python 3.5 have also been backported to Python 3.4.x.</p>
<p>Notable changes in the <a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O, event loop, coroutines and tasks."><tt class="xref py py-mod docutils literal"><span class="pre">asyncio</span></tt></a> module since Python 3.4.0:</p>
<ul class="simple">
<li>New debugging APIs: <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.set_debug" title="asyncio.BaseEventLoop.set_debug"><tt class="xref py py-meth docutils literal"><span class="pre">loop.set_debug()</span></tt></a>
and <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.get_debug" title="asyncio.BaseEventLoop.get_debug"><tt class="xref py py-meth docutils literal"><span class="pre">loop.get_debug()</span></tt></a> methods.
(Contributed by Victor Stinner.)</li>
<li>The proactor event loop now supports SSL.
(Contributed by Antoine Pitrou and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22560">issue 22560</a>.)</li>
<li>A new <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.is_closed" title="asyncio.BaseEventLoop.is_closed"><tt class="xref py py-meth docutils literal"><span class="pre">loop.is_closed()</span></tt></a> method to
check if the event loop is closed.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue21326">issue 21326</a>.)</li>
<li>A new <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.create_task" title="asyncio.BaseEventLoop.create_task"><tt class="xref py py-meth docutils literal"><span class="pre">loop.create_task()</span></tt></a>
to conveniently create and schedule a new <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>
for a coroutine.  The <tt class="docutils literal"><span class="pre">create_task</span></tt> method is also used by all
asyncio functions that wrap coroutines into tasks, such as
<a class="reference internal" href="../library/asyncio-task.html#asyncio.wait" title="asyncio.wait"><tt class="xref py py-func docutils literal"><span class="pre">asyncio.wait()</span></tt></a>, <a class="reference internal" href="../library/asyncio-task.html#asyncio.gather" title="asyncio.gather"><tt class="xref py py-func docutils literal"><span class="pre">asyncio.gather()</span></tt></a>, etc.
(Contributed by Victor Stinner.)</li>
<li>A new <a class="reference internal" href="../library/asyncio-protocol.html#asyncio.WriteTransport.get_write_buffer_limits" title="asyncio.WriteTransport.get_write_buffer_limits"><tt class="xref py py-meth docutils literal"><span class="pre">transport.get_write_buffer_limits()</span></tt></a>
method to inquire for <em>high-</em> and <em>low-</em> water limits of the flow
control.
(Contributed by Victor Stinner.)</li>
<li>The <a class="reference internal" href="../library/asyncio-task.html#asyncio.async" title="asyncio.async"><tt class="xref py py-func docutils literal"><span class="pre">async()</span></tt></a> function is deprecated in favor of
<a class="reference internal" href="../library/asyncio-task.html#asyncio.ensure_future" title="asyncio.ensure_future"><tt class="xref py py-func docutils literal"><span class="pre">ensure_future()</span></tt></a>.
(Contributed by Yury Selivanov.)</li>
<li>New <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.set_task_factory" title="asyncio.BaseEventLoop.set_task_factory"><tt class="xref py py-meth docutils literal"><span class="pre">loop.set_task_factory()</span></tt></a>
and <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.get_task_factory" title="asyncio.BaseEventLoop.get_task_factory"><tt class="xref py py-meth docutils literal"><span class="pre">loop.set_task_factory()</span></tt></a>
methods to customize the task factory that
<a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.create_task" title="asyncio.BaseEventLoop.create_task"><tt class="xref py py-meth docutils literal"><span class="pre">loop.create_task()</span></tt></a> method uses.
(Contributed by Yury Selivanov.)</li>
<li>New <a class="reference internal" href="../library/asyncio-queue.html#asyncio.Queue.join" title="asyncio.Queue.join"><tt class="xref py py-meth docutils literal"><span class="pre">Queue.join()</span></tt></a> and
<a class="reference internal" href="../library/asyncio-queue.html#asyncio.Queue.task_done" title="asyncio.Queue.task_done"><tt class="xref py py-meth docutils literal"><span class="pre">Queue.task_done()</span></tt></a> queue methods.
(Contributed by Victor Stinner.)</li>
<li>The <tt class="docutils literal"><span class="pre">JoinableQueue</span></tt> class was removed, in favor of the
<a class="reference internal" href="../library/asyncio-queue.html#asyncio.Queue" title="asyncio.Queue"><tt class="xref py py-class docutils literal"><span class="pre">asyncio.Queue</span></tt></a> class.
(Contributed by Victor Stinner.)</li>
</ul>
<p>Updates in 3.5.1:</p>
<ul class="simple">
<li>The <a class="reference internal" href="../library/asyncio-task.html#asyncio.ensure_future" title="asyncio.ensure_future"><tt class="xref py py-func docutils literal"><span class="pre">ensure_future()</span></tt></a> function and all functions that
use it, such as <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.BaseEventLoop.run_until_complete" title="asyncio.BaseEventLoop.run_until_complete"><tt class="xref py py-meth docutils literal"><span class="pre">loop.run_until_complete()</span></tt></a>,
now accept all kinds of <a class="reference internal" href="../glossary.html#term-awaitable"><em class="xref std std-term">awaitable objects</em></a>.
(Contributed by Yury Selivanov.)</li>
</ul>
</div>
<div class="section" id="bz2">
<h3>bz2<a class="headerlink" href="#bz2" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/bz2.html#bz2.BZ2Decompressor.decompress" title="bz2.BZ2Decompressor.decompress"><tt class="xref py py-meth docutils literal"><span class="pre">BZ2Decompressor.decompress</span></tt></a>
method now accepts an optional <em>max_length</em> argument to limit the maximum
size of decompressed data. (Contributed by Nikolaus Rath in <a class="reference external" href="https://bugs.python.org/issue15955">issue 15955</a>.)</p>
</div>
<div class="section" id="cgi">
<h3>cgi<a class="headerlink" href="#cgi" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">FieldStorage</span></tt> class now supports the <a class="reference internal" href="../glossary.html#term-context-manager"><em class="xref std std-term">context manager</em></a>
protocol.  (Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue20289">issue 20289</a>.)</p>
</div>
<div class="section" id="cmath">
<h3>cmath<a class="headerlink" href="#cmath" title="Permalink to this headline">¶</a></h3>
<p>A new function <a class="reference internal" href="../library/cmath.html#cmath.isclose" title="cmath.isclose"><tt class="xref py py-func docutils literal"><span class="pre">isclose()</span></tt></a> provides a way to test for approximate
equality.  (Contributed by Chris Barker and Tal Einat in <a class="reference external" href="https://bugs.python.org/issue24270">issue 24270</a>.)</p>
</div>
<div class="section" id="code">
<h3>code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/code.html#code.InteractiveInterpreter.showtraceback" title="code.InteractiveInterpreter.showtraceback"><tt class="xref py py-func docutils literal"><span class="pre">InteractiveInterpreter.showtraceback()</span></tt></a>
method now prints the full chained traceback, just like the interactive
interpreter.  (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue17442">issue 17442</a>.)</p>
</div>
<div class="section" id="collections">
<h3>collections<a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h3>
<p id="whatsnew-ordereddict">The <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><tt class="xref py py-class docutils literal"><span class="pre">OrderedDict</span></tt></a> class is now implemented in C, which
makes it 4 to 100 times faster.  (Contributed by Eric Snow in <a class="reference external" href="https://bugs.python.org/issue16991">issue 16991</a>.)</p>
<p><tt class="xref py py-meth docutils literal"><span class="pre">OrderedDict.items()</span></tt>,
<tt class="xref py py-meth docutils literal"><span class="pre">OrderedDict.keys()</span></tt>,
<tt class="xref py py-meth docutils literal"><span class="pre">OrderedDict.values()</span></tt> views now support
<a class="reference internal" href="../library/functions.html#reversed" title="reversed"><tt class="xref py py-func docutils literal"><span class="pre">reversed()</span></tt></a> iteration.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19505">issue 19505</a>.)</p>
<p>The <a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><tt class="xref py py-class docutils literal"><span class="pre">deque</span></tt></a> class now defines
<a class="reference internal" href="../library/collections.html#collections.deque.index" title="collections.deque.index"><tt class="xref py py-meth docutils literal"><span class="pre">index()</span></tt></a>, <a class="reference internal" href="../library/collections.html#collections.deque.insert" title="collections.deque.insert"><tt class="xref py py-meth docutils literal"><span class="pre">insert()</span></tt></a>, and
<a class="reference internal" href="../library/collections.html#collections.deque.copy" title="collections.deque.copy"><tt class="xref py py-meth docutils literal"><span class="pre">copy()</span></tt></a>, and supports the <tt class="docutils literal"><span class="pre">+</span></tt> and <tt class="docutils literal"><span class="pre">*</span></tt> operators.
This allows deques to be recognized as a <a class="reference internal" href="../library/collections.abc.html#collections.abc.MutableSequence" title="collections.abc.MutableSequence"><tt class="xref py py-class docutils literal"><span class="pre">MutableSequence</span></tt></a>
and improves their substitutability for lists.
(Contributed by Raymond Hettinger in <a class="reference external" href="https://bugs.python.org/issue23704">issue 23704</a>.)</p>
<p>Docstrings produced by <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><tt class="xref py py-func docutils literal"><span class="pre">namedtuple()</span></tt></a> can now be updated:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;Point&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="n">Point</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">+=</span> <span class="s">&#39;: Cartesian coodinate&#39;</span>
<span class="n">Point</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s">&#39;abscissa&#39;</span>
<span class="n">Point</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s">&#39;ordinate&#39;</span>
</pre></div>
</div>
<p>(Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue24064">issue 24064</a>.)</p>
<p>The <a class="reference internal" href="../library/collections.html#collections.UserString" title="collections.UserString"><tt class="xref py py-class docutils literal"><span class="pre">UserString</span></tt></a> class now implements the
<a class="reference internal" href="../library/pickle.html#object.__getnewargs__" title="object.__getnewargs__"><tt class="xref py py-meth docutils literal"><span class="pre">__getnewargs__()</span></tt></a>, <a class="reference internal" href="../reference/datamodel.html#object.__rmod__" title="object.__rmod__"><tt class="xref py py-meth docutils literal"><span class="pre">__rmod__()</span></tt></a>, <a class="reference internal" href="../library/stdtypes.html#str.casefold" title="str.casefold"><tt class="xref py py-meth docutils literal"><span class="pre">casefold()</span></tt></a>,
<a class="reference internal" href="../library/stdtypes.html#str.format_map" title="str.format_map"><tt class="xref py py-meth docutils literal"><span class="pre">format_map()</span></tt></a>, <a class="reference internal" href="../library/stdtypes.html#str.isprintable" title="str.isprintable"><tt class="xref py py-meth docutils literal"><span class="pre">isprintable()</span></tt></a>, and <a class="reference internal" href="../library/stdtypes.html#str.maketrans" title="str.maketrans"><tt class="xref py py-meth docutils literal"><span class="pre">maketrans()</span></tt></a>
methods to match the corresponding methods of <a class="reference internal" href="../library/stdtypes.html#str" title="str"><tt class="xref py py-class docutils literal"><span class="pre">str</span></tt></a>.
(Contributed by Joe Jevnik in <a class="reference external" href="https://bugs.python.org/issue22189">issue 22189</a>.)</p>
</div>
<div class="section" id="collections-abc">
<h3>collections.abc<a class="headerlink" href="#collections-abc" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">Sequence.index()</span></tt> method now
accepts <em>start</em> and <em>stop</em> arguments to match the corresponding methods
of <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><tt class="xref py py-class docutils literal"><span class="pre">tuple</span></tt></a>, <a class="reference internal" href="../library/stdtypes.html#list" title="list"><tt class="xref py py-class docutils literal"><span class="pre">list</span></tt></a>, etc.
(Contributed by Devin Jeanpierre in <a class="reference external" href="https://bugs.python.org/issue23086">issue 23086</a>.)</p>
<p>A new <a class="reference internal" href="../library/collections.abc.html#collections.abc.Generator" title="collections.abc.Generator"><tt class="xref py py-class docutils literal"><span class="pre">Generator</span></tt></a> abstract base class. (Contributed
by Stefan Behnel in <a class="reference external" href="https://bugs.python.org/issue24018">issue 24018</a>.)</p>
<p>New <a class="reference internal" href="../library/collections.abc.html#collections.abc.Awaitable" title="collections.abc.Awaitable"><tt class="xref py py-class docutils literal"><span class="pre">Awaitable</span></tt></a>, <a class="reference internal" href="../library/collections.abc.html#collections.abc.Coroutine" title="collections.abc.Coroutine"><tt class="xref py py-class docutils literal"><span class="pre">Coroutine</span></tt></a>,
<a class="reference internal" href="../library/collections.abc.html#collections.abc.AsyncIterator" title="collections.abc.AsyncIterator"><tt class="xref py py-class docutils literal"><span class="pre">AsyncIterator</span></tt></a>, and
<a class="reference internal" href="../library/collections.abc.html#collections.abc.AsyncIterable" title="collections.abc.AsyncIterable"><tt class="xref py py-class docutils literal"><span class="pre">AsyncIterable</span></tt></a> abstract base classes.
(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue24184">issue 24184</a>.)</p>
<p>For earlier Python versions, a backport of the new ABCs is available in an
external <a class="reference external" href="https://pypi.python.org/pypi/backports_abc">PyPI package</a>.</p>
</div>
<div class="section" id="compileall">
<h3>compileall<a class="headerlink" href="#compileall" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/compileall.html#module-compileall" title="compileall: Tools for byte-compiling all Python source files in a directory tree."><tt class="xref py py-mod docutils literal"><span class="pre">compileall</span></tt></a> option, <tt class="samp docutils literal"><span class="pre">-j</span> <em><span class="pre">N</span></em></tt>, allows to run <em>N</em> workers
sumultaneously to perform parallel bytecode compilation.
The <a class="reference internal" href="../library/compileall.html#compileall.compile_dir" title="compileall.compile_dir"><tt class="xref py py-func docutils literal"><span class="pre">compile_dir()</span></tt></a> function has a corresponding <tt class="docutils literal"><span class="pre">workers</span></tt>
parameter.  (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue16104">issue 16104</a>.)</p>
<p>Another new option, <tt class="docutils literal"><span class="pre">-r</span></tt>, allows to control the maximum recursion
level for subdirectories.  (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue19628">issue 19628</a>.)</p>
<p>The <tt class="docutils literal"><span class="pre">-q</span></tt> command line option can now be specified more than once, in
which case all output, including errors, will be suppressed.  The corresponding
<tt class="docutils literal"><span class="pre">quiet</span></tt> parameter in <a class="reference internal" href="../library/compileall.html#compileall.compile_dir" title="compileall.compile_dir"><tt class="xref py py-func docutils literal"><span class="pre">compile_dir()</span></tt></a>,
<a class="reference internal" href="../library/compileall.html#compileall.compile_file" title="compileall.compile_file"><tt class="xref py py-func docutils literal"><span class="pre">compile_file()</span></tt></a>, and <a class="reference internal" href="../library/compileall.html#compileall.compile_path" title="compileall.compile_path"><tt class="xref py py-func docutils literal"><span class="pre">compile_path()</span></tt></a> can now
accept an integer value indicating the level of output suppression.
(Contributed by Thomas Kluyver in <a class="reference external" href="https://bugs.python.org/issue21338">issue 21338</a>.)</p>
</div>
<div class="section" id="concurrent-futures">
<h3>concurrent.futures<a class="headerlink" href="#concurrent-futures" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.map" title="concurrent.futures.Executor.map"><tt class="xref py py-meth docutils literal"><span class="pre">Executor.map()</span></tt></a> method now accepts a
<em>chunksize</em> argument to allow batching of tasks to improve performance when
<a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><tt class="xref py py-meth docutils literal"><span class="pre">ProcessPoolExecutor()</span></tt></a> is used.
(Contributed by Dan O&#8217;Reilly in <a class="reference external" href="https://bugs.python.org/issue11271">issue 11271</a>.)</p>
<p>The number of workers in the <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><tt class="xref py py-class docutils literal"><span class="pre">ThreadPoolExecutor</span></tt></a>
constructor is optional now.  The default value is 5 times the number of CPUs.
(Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue21527">issue 21527</a>.)</p>
</div>
<div class="section" id="configparser">
<h3>configparser<a class="headerlink" href="#configparser" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../library/configparser.html#module-configparser" title="configparser: Configuration file parser."><tt class="xref py py-mod docutils literal"><span class="pre">configparser</span></tt></a> now provides a way to customize the conversion
of values by specifying a dictionary of converters in the
<a class="reference internal" href="../library/configparser.html#configparser.ConfigParser" title="configparser.ConfigParser"><tt class="xref py py-class docutils literal"><span class="pre">ConfigParser</span></tt></a> constructor, or by defining them
as methods in <tt class="docutils literal"><span class="pre">ConfigParser</span></tt> subclasses.  Converters defined in
a parser instance are inherited by its section proxies.</p>
<p>Example:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">configparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span><span class="p">[</span><span class="s">&#39;list&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">(</span><span class="n">converters</span><span class="o">=</span><span class="n">conv</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">read_string</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s">[s]</span>
<span class="gp">... </span><span class="s">list = a b c d e f g</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="s">&#39;list&#39;</span><span class="p">)</span>
<span class="go">&#39;a b c d e f g&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="s">&#39;list&#39;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">section</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="s">&#39;s&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">section</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s">&#39;list&#39;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;]</span>
</pre></div>
</div>
<p>(Contributed by Łukasz Langa in <a class="reference external" href="https://bugs.python.org/issue18159">issue 18159</a>.)</p>
</div>
<div class="section" id="contextlib">
<h3>contextlib<a class="headerlink" href="#contextlib" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/contextlib.html#contextlib.redirect_stderr" title="contextlib.redirect_stderr"><tt class="xref py py-func docutils literal"><span class="pre">redirect_stderr()</span></tt></a> <a class="reference internal" href="../glossary.html#term-context-manager"><em class="xref std std-term">context manager</em></a> (similar to
<a class="reference internal" href="../library/contextlib.html#contextlib.redirect_stdout" title="contextlib.redirect_stdout"><tt class="xref py py-func docutils literal"><span class="pre">redirect_stdout()</span></tt></a>) makes it easier for utility scripts to
handle inflexible APIs that write their output to <a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><tt class="xref py py-data docutils literal"><span class="pre">sys.stderr</span></tt></a> and
don&#8217;t provide any options to redirect it:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">contextlib</span><span class="o">,</span> <span class="nn">io</span><span class="o">,</span> <span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">redirect_stderr</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&#39;warning&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
<span class="go">&#39;WARNING:root:warning\n&#39;</span>
</pre></div>
</div>
<p>(Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue22389">issue 22389</a>.)</p>
</div>
<div class="section" id="csv">
<h3>csv<a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/csv.html#csv.csvwriter.writerow" title="csv.csvwriter.writerow"><tt class="xref py py-meth docutils literal"><span class="pre">writerow()</span></tt></a> method now supports arbitrary iterables,
not just sequences.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23171">issue 23171</a>.)</p>
</div>
<div class="section" id="curses">
<h3>curses<a class="headerlink" href="#curses" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/curses.html#curses.update_lines_cols" title="curses.update_lines_cols"><tt class="xref py py-func docutils literal"><span class="pre">update_lines_cols()</span></tt></a> function updates the <span class="target" id="index-31"></span><tt class="xref std std-envvar docutils literal"><span class="pre">LINES</span></tt>
and <span class="target" id="index-32"></span><tt class="xref std std-envvar docutils literal"><span class="pre">COLS</span></tt> environment variables.  This is useful for detecting
manual screen resizing.  (Contributed by Arnon Yaari in <a class="reference external" href="https://bugs.python.org/issue4254">issue 4254</a>.)</p>
</div>
<div class="section" id="dbm">
<h3>dbm<a class="headerlink" href="#dbm" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../library/dbm.html#dbm.dumb.open" title="dbm.dumb.open"><tt class="xref py py-func docutils literal"><span class="pre">dumb.open</span></tt></a> always creates a new database when the flag
has the value <tt class="docutils literal"><span class="pre">&quot;n&quot;</span></tt>.  (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue18039">issue 18039</a>.)</p>
</div>
<div class="section" id="difflib">
<h3>difflib<a class="headerlink" href="#difflib" title="Permalink to this headline">¶</a></h3>
<p>The charset of HTML documents generated by
<a class="reference internal" href="../library/difflib.html#difflib.HtmlDiff.make_file" title="difflib.HtmlDiff.make_file"><tt class="xref py py-meth docutils literal"><span class="pre">HtmlDiff.make_file()</span></tt></a>
can now be customized by using a new <em>charset</em> keyword-only argument.
The default charset of HTML document changed from <tt class="docutils literal"><span class="pre">&quot;ISO-8859-1&quot;</span></tt>
to <tt class="docutils literal"><span class="pre">&quot;utf-8&quot;</span></tt>.
(Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue2052">issue 2052</a>.)</p>
<p>The <a class="reference internal" href="../library/difflib.html#difflib.diff_bytes" title="difflib.diff_bytes"><tt class="xref py py-func docutils literal"><span class="pre">diff_bytes()</span></tt></a> function can now compare lists of byte
strings.  This fixes a regression from Python 2.
(Contributed by Terry J. Reedy and Greg Ward in <a class="reference external" href="https://bugs.python.org/issue17445">issue 17445</a>.)</p>
</div>
<div class="section" id="distutils">
<h3>distutils<a class="headerlink" href="#distutils" title="Permalink to this headline">¶</a></h3>
<p>Both the <tt class="docutils literal"><span class="pre">build</span></tt> and <tt class="docutils literal"><span class="pre">build_ext</span></tt> commands now accept a <tt class="docutils literal"><span class="pre">-j</span></tt> option to
enable parallel building of extension modules.
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue5309">issue 5309</a>.)</p>
<p>The <a class="reference internal" href="../library/distutils.html#module-distutils" title="distutils: Support for building and installing Python modules into an existing Python installation."><tt class="xref py py-mod docutils literal"><span class="pre">distutils</span></tt></a> module now supports <tt class="docutils literal"><span class="pre">xz</span></tt> compression, and can be
enabled by passing <tt class="docutils literal"><span class="pre">xztar</span></tt> as an argument to <tt class="docutils literal"><span class="pre">bdist</span> <span class="pre">--format</span></tt>.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue16314">issue 16314</a>.)</p>
</div>
<div class="section" id="doctest">
<h3>doctest<a class="headerlink" href="#doctest" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/doctest.html#doctest.DocTestSuite" title="doctest.DocTestSuite"><tt class="xref py py-func docutils literal"><span class="pre">DocTestSuite()</span></tt></a> function returns an empty
<a class="reference internal" href="../library/unittest.html#unittest.TestSuite" title="unittest.TestSuite"><tt class="xref py py-class docutils literal"><span class="pre">unittest.TestSuite</span></tt></a> if <em>module</em> contains no docstrings, instead of
raising <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt></a>.  (Contributed by Glenn Jones in <a class="reference external" href="https://bugs.python.org/issue15916">issue 15916</a>.)</p>
</div>
<div class="section" id="email">
<h3>email<a class="headerlink" href="#email" title="Permalink to this headline">¶</a></h3>
<p>A new policy option <a class="reference internal" href="../library/email.policy.html#email.policy.Policy.mangle_from_" title="email.policy.Policy.mangle_from_"><tt class="xref py py-attr docutils literal"><span class="pre">Policy.mangle_from_</span></tt></a>
controls whether or not lines that start with <tt class="docutils literal"><span class="pre">&quot;From</span> <span class="pre">&quot;</span></tt> in email bodies are
prefixed with a <tt class="docutils literal"><span class="pre">&quot;&gt;&quot;</span></tt> character by generators.  The default is <tt class="docutils literal"><span class="pre">True</span></tt> for
<a class="reference internal" href="../library/email.policy.html#email.policy.compat32" title="email.policy.compat32"><tt class="xref py py-attr docutils literal"><span class="pre">compat32</span></tt></a> and <tt class="docutils literal"><span class="pre">False</span></tt> for all other policies.
(Contributed by Milan Oberkirch in <a class="reference external" href="https://bugs.python.org/issue20098">issue 20098</a>.)</p>
<p>A new
<a class="reference internal" href="../library/email.message.html#email.message.Message.get_content_disposition" title="email.message.Message.get_content_disposition"><tt class="xref py py-meth docutils literal"><span class="pre">Message.get_content_disposition()</span></tt></a>
method provides easy access to a canonical value for the
<em class="mailheader">Content-Disposition</em> header.
(Contributed by Abhilash Raj in <a class="reference external" href="https://bugs.python.org/issue21083">issue 21083</a>.)</p>
<p>A new policy option <a class="reference internal" href="../library/email.policy.html#email.policy.EmailPolicy.utf8" title="email.policy.EmailPolicy.utf8"><tt class="xref py py-attr docutils literal"><span class="pre">EmailPolicy.utf8</span></tt></a>
can be set to <tt class="docutils literal"><span class="pre">True</span></tt> to encode email headers using the UTF-8 charset instead
of using encoded words.  This allows <tt class="docutils literal"><span class="pre">Messages</span></tt> to be formatted according to
<span class="target" id="index-33"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6532.html"><strong>RFC 6532</strong></a> and used with an SMTP server that supports the <span class="target" id="index-34"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6531.html"><strong>RFC 6531</strong></a>
<tt class="docutils literal"><span class="pre">SMTPUTF8</span></tt> extension.  (Contributed by R. David Murray in
<a class="reference external" href="https://bugs.python.org/issue24211">issue 24211</a>.)</p>
<p>The <a class="reference internal" href="../library/email.mime.html#email.mime.text.MIMEText" title="email.mime.text.MIMEText"><tt class="xref py py-class docutils literal"><span class="pre">mime.text.MIMEText</span></tt></a> constructor now
accepts a <a class="reference internal" href="../library/email.charset.html#email.charset.Charset" title="email.charset.Charset"><tt class="xref py py-class docutils literal"><span class="pre">charset.Charset</span></tt></a> instance.
(Contributed by Claude Paroz and Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue16324">issue 16324</a>.)</p>
</div>
<div class="section" id="enum">
<h3>enum<a class="headerlink" href="#enum" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/enum.html#enum.Enum" title="enum.Enum"><tt class="xref py py-class docutils literal"><span class="pre">Enum</span></tt></a> callable has a new parameter <em>start</em> to
specify the initial number of enum values if only <em>names</em> are provided:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Animal</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="s">&#39;Animal&#39;</span><span class="p">,</span> <span class="s">&#39;cat dog&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Animal</span><span class="o">.</span><span class="n">cat</span>
<span class="go">&lt;Animal.cat: 10&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Animal</span><span class="o">.</span><span class="n">dog</span>
<span class="go">&lt;Animal.dog: 11&gt;</span>
</pre></div>
</div>
<p>(Contributed by Ethan Furman in <a class="reference external" href="https://bugs.python.org/issue21706">issue 21706</a>.)</p>
</div>
<div class="section" id="faulthandler">
<h3>faulthandler<a class="headerlink" href="#faulthandler" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/faulthandler.html#faulthandler.enable" title="faulthandler.enable"><tt class="xref py py-func docutils literal"><span class="pre">enable()</span></tt></a>, <a class="reference internal" href="../library/faulthandler.html#faulthandler.register" title="faulthandler.register"><tt class="xref py py-func docutils literal"><span class="pre">register()</span></tt></a>,
<a class="reference internal" href="../library/faulthandler.html#faulthandler.dump_traceback" title="faulthandler.dump_traceback"><tt class="xref py py-func docutils literal"><span class="pre">dump_traceback()</span></tt></a> and
<a class="reference internal" href="../library/faulthandler.html#faulthandler.dump_traceback_later" title="faulthandler.dump_traceback_later"><tt class="xref py py-func docutils literal"><span class="pre">dump_traceback_later()</span></tt></a> functions now accept file
descriptors in addition to file-like objects.
(Contributed by Wei Wu in <a class="reference external" href="https://bugs.python.org/issue23566">issue 23566</a>.)</p>
</div>
<div class="section" id="functools">
<h3>functools<a class="headerlink" href="#functools" title="Permalink to this headline">¶</a></h3>
<p id="whatsnew-lrucache">Most of the <a class="reference internal" href="../library/functools.html#functools.lru_cache" title="functools.lru_cache"><tt class="xref py py-func docutils literal"><span class="pre">lru_cache()</span></tt></a> machinery is now implemented in C, making
it significantly faster.  (Contributed by Matt Joiner, Alexey Kachayev, and
Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue14373">issue 14373</a>.)</p>
</div>
<div class="section" id="glob">
<h3>glob<a class="headerlink" href="#glob" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/glob.html#glob.iglob" title="glob.iglob"><tt class="xref py py-func docutils literal"><span class="pre">iglob()</span></tt></a> and <a class="reference internal" href="../library/glob.html#glob.glob" title="glob.glob"><tt class="xref py py-func docutils literal"><span class="pre">glob()</span></tt></a> functions now support recursive
search in subdirectories, using the <tt class="docutils literal"><span class="pre">&quot;**&quot;</span></tt> pattern.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue13968">issue 13968</a>.)</p>
</div>
<div class="section" id="gzip">
<h3>gzip<a class="headerlink" href="#gzip" title="Permalink to this headline">¶</a></h3>
<p>The <em>mode</em> argument of the <a class="reference internal" href="../library/gzip.html#gzip.GzipFile" title="gzip.GzipFile"><tt class="xref py py-class docutils literal"><span class="pre">GzipFile</span></tt></a> constructor now
accepts <tt class="docutils literal"><span class="pre">&quot;x&quot;</span></tt> to request exclusive creation.
(Contributed by Tim Heaney in <a class="reference external" href="https://bugs.python.org/issue19222">issue 19222</a>.)</p>
</div>
<div class="section" id="heapq">
<h3>heapq<a class="headerlink" href="#heapq" title="Permalink to this headline">¶</a></h3>
<p>Element comparison in <a class="reference internal" href="../library/heapq.html#heapq.merge" title="heapq.merge"><tt class="xref py py-func docutils literal"><span class="pre">merge()</span></tt></a> can now be customized by
passing a <a class="reference internal" href="../glossary.html#term-key-function"><em class="xref std std-term">key function</em></a> in a new optional <em>key</em> keyword argument,
and a new optional <em>reverse</em> keyword argument can be used to reverse element
comparison:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">heapq</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;9&#39;</span><span class="p">,</span> <span class="s">&#39;777&#39;</span><span class="p">,</span> <span class="s">&#39;55555&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;88&#39;</span><span class="p">,</span> <span class="s">&#39;6666&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">heapq</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">))</span>
<span class="go">[&#39;9&#39;, &#39;88&#39;, &#39;777&#39;, &#39;6666&#39;, &#39;55555&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">heapq</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="k">True</span><span class="p">))</span>
<span class="go">[&#39;55555&#39;, &#39;6666&#39;, &#39;777&#39;, &#39;88&#39;, &#39;9&#39;]</span>
</pre></div>
</div>
<p>(Contributed by Raymond Hettinger in <a class="reference external" href="https://bugs.python.org/issue13742">issue 13742</a>.)</p>
</div>
<div class="section" id="http">
<h3>http<a class="headerlink" href="#http" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/http.html#http.HTTPStatus" title="http.HTTPStatus"><tt class="xref py py-class docutils literal"><span class="pre">HTTPStatus</span></tt></a> enum that defines a set of
HTTP status codes, reason phrases and long descriptions written in English.
(Contributed by Demian Brecht in <a class="reference external" href="https://bugs.python.org/issue21793">issue 21793</a>.)</p>
</div>
<div class="section" id="http-client">
<h3>http.client<a class="headerlink" href="#http-client" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../library/http.client.html#http.client.HTTPConnection.getresponse" title="http.client.HTTPConnection.getresponse"><tt class="xref py py-meth docutils literal"><span class="pre">HTTPConnection.getresponse()</span></tt></a>
now raises a <a class="reference internal" href="../library/http.client.html#http.client.RemoteDisconnected" title="http.client.RemoteDisconnected"><tt class="xref py py-exc docutils literal"><span class="pre">RemoteDisconnected</span></tt></a> exception when a
remote server connection is closed unexpectedly.  Additionally, if a
<a class="reference internal" href="../library/exceptions.html#ConnectionError" title="ConnectionError"><tt class="xref py py-exc docutils literal"><span class="pre">ConnectionError</span></tt></a> (of which <tt class="docutils literal"><span class="pre">RemoteDisconnected</span></tt>
is a subclass) is raised, the client socket is now closed automatically,
and will reconnect on the next request:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">http.client</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">HTTPConnection</span><span class="p">(</span><span class="s">&#39;www.python.org&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">retries</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">)</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">http</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">RemoteDisconnected</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>(Contributed by Martin Panter in <a class="reference external" href="https://bugs.python.org/issue3566">issue 3566</a>.)</p>
</div>
<div class="section" id="idlelib-and-idle">
<h3>idlelib and IDLE<a class="headerlink" href="#idlelib-and-idle" title="Permalink to this headline">¶</a></h3>
<p>Since idlelib implements the IDLE shell and editor and is not intended for
import by other programs, it gets improvements with every release.  See
<tt class="file docutils literal"><span class="pre">Lib/idlelib/NEWS.txt</span></tt> for a cumulative list of changes since 3.4.0,
as well as changes made in future 3.5.x releases. This file is also available
from the IDLE <em class="menuselection">Help ‣ About IDLE</em> dialog.</p>
</div>
<div class="section" id="imaplib">
<h3>imaplib<a class="headerlink" href="#imaplib" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4" title="imaplib.IMAP4"><tt class="xref py py-class docutils literal"><span class="pre">IMAP4</span></tt></a> class now supports the <a class="reference internal" href="../glossary.html#term-context-manager"><em class="xref std std-term">context manager</em></a> protocol.
When used in a <a class="reference internal" href="../reference/compound_stmts.html#with"><tt class="xref std std-keyword docutils literal"><span class="pre">with</span></tt></a> statement, the IMAP4 <tt class="docutils literal"><span class="pre">LOGOUT</span></tt>
command will be called automatically at the end of the block.
(Contributed by Tarek Ziadé and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue4972">issue 4972</a>.)</p>
<p>The <a class="reference internal" href="../library/imaplib.html#module-imaplib" title="imaplib: IMAP4 protocol client (requires sockets)."><tt class="xref py py-mod docutils literal"><span class="pre">imaplib</span></tt></a> module now supports <span class="target" id="index-35"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc5161.html"><strong>RFC 5161</strong></a> (ENABLE Extension)
and <span class="target" id="index-36"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6855.html"><strong>RFC 6855</strong></a> (UTF-8 Support) via the <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.enable" title="imaplib.IMAP4.enable"><tt class="xref py py-meth docutils literal"><span class="pre">IMAP4.enable()</span></tt></a>
method.  A new <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.utf8_enabled" title="imaplib.IMAP4.utf8_enabled"><tt class="xref py py-attr docutils literal"><span class="pre">IMAP4.utf8_enabled</span></tt></a>
attribute tracks whether or not <span class="target" id="index-37"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6855.html"><strong>RFC 6855</strong></a> support is enabled.
(Contributed by Milan Oberkirch, R. David Murray, and Maciej Szulik in
<a class="reference external" href="https://bugs.python.org/issue21800">issue 21800</a>.)</p>
<p>The <a class="reference internal" href="../library/imaplib.html#module-imaplib" title="imaplib: IMAP4 protocol client (requires sockets)."><tt class="xref py py-mod docutils literal"><span class="pre">imaplib</span></tt></a> module now automatically encodes non-ASCII string usernames
and passwords using UTF-8, as recommended by the RFCs.  (Contributed by Milan
Oberkirch in <a class="reference external" href="https://bugs.python.org/issue21800">issue 21800</a>.)</p>
</div>
<div class="section" id="imghdr">
<h3>imghdr<a class="headerlink" href="#imghdr" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/imghdr.html#imghdr.what" title="imghdr.what"><tt class="xref py py-func docutils literal"><span class="pre">what()</span></tt></a> function now recognizes the
<a class="reference external" href="http://www.openexr.com">OpenEXR</a> format
(contributed by Martin Vignali and Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue20295">issue 20295</a>),
and the <a class="reference external" href="https://en.wikipedia.org/wiki/WebP">WebP</a> format
(contributed by Fabrice Aneche and Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue20197">issue 20197</a>.)</p>
</div>
<div class="section" id="importlib">
<h3>importlib<a class="headerlink" href="#importlib" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/importlib.html#importlib.util.LazyLoader" title="importlib.util.LazyLoader"><tt class="xref py py-class docutils literal"><span class="pre">util.LazyLoader</span></tt></a> class allows for
lazy loading of modules in applications where startup time is important.
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue17621">issue 17621</a>.)</p>
<p>The <a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader.source_to_code" title="importlib.abc.InspectLoader.source_to_code"><tt class="xref py py-func docutils literal"><span class="pre">abc.InspectLoader.source_to_code()</span></tt></a>
method is now a static method.  This makes it easier to initialize a module
object with code compiled from a string by running
<tt class="docutils literal"><span class="pre">exec(code,</span> <span class="pre">module.__dict__)</span></tt>.
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue21156">issue 21156</a>.)</p>
<p>The new <a class="reference internal" href="../library/importlib.html#importlib.util.module_from_spec" title="importlib.util.module_from_spec"><tt class="xref py py-func docutils literal"><span class="pre">util.module_from_spec()</span></tt></a>
function is now the preferred way to create a new module.  As opposed to
creating a <a class="reference internal" href="../library/types.html#types.ModuleType" title="types.ModuleType"><tt class="xref py py-class docutils literal"><span class="pre">types.ModuleType</span></tt></a> instance directly, this new function
will set the various import-controlled attributes based on the passed-in
spec object.  (Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue20383">issue 20383</a>.)</p>
</div>
<div class="section" id="inspect">
<h3>inspect<a class="headerlink" href="#inspect" title="Permalink to this headline">¶</a></h3>
<p>Both the <a class="reference internal" href="../library/inspect.html#inspect.Signature" title="inspect.Signature"><tt class="xref py py-class docutils literal"><span class="pre">Signature</span></tt></a> and <a class="reference internal" href="../library/inspect.html#inspect.Parameter" title="inspect.Parameter"><tt class="xref py py-class docutils literal"><span class="pre">Parameter</span></tt></a> classes are
now picklable and hashable.  (Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue20726">issue 20726</a>
and <a class="reference external" href="https://bugs.python.org/issue20334">issue 20334</a>.)</p>
<p>A new
<a class="reference internal" href="../library/inspect.html#inspect.BoundArguments.apply_defaults" title="inspect.BoundArguments.apply_defaults"><tt class="xref py py-meth docutils literal"><span class="pre">BoundArguments.apply_defaults()</span></tt></a>
method provides a way to set default values for missing arguments:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s">&#39;ham&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ba</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ba</span><span class="o">.</span><span class="n">apply_defaults</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ba</span><span class="o">.</span><span class="n">arguments</span>
<span class="go">OrderedDict([(&#39;a&#39;, &#39;spam&#39;), (&#39;b&#39;, &#39;ham&#39;), (&#39;args&#39;, ())])</span>
</pre></div>
</div>
<p>(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue24190">issue 24190</a>.)</p>
<p>A new class method
<a class="reference internal" href="../library/inspect.html#inspect.Signature.from_callable" title="inspect.Signature.from_callable"><tt class="xref py py-meth docutils literal"><span class="pre">Signature.from_callable()</span></tt></a> makes
subclassing of <a class="reference internal" href="../library/inspect.html#inspect.Signature" title="inspect.Signature"><tt class="xref py py-class docutils literal"><span class="pre">Signature</span></tt></a> easier.  (Contributed
by Yury Selivanov and Eric Snow in <a class="reference external" href="https://bugs.python.org/issue17373">issue 17373</a>.)</p>
<p>The <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><tt class="xref py py-func docutils literal"><span class="pre">signature()</span></tt></a> function now accepts a <em>follow_wrapped</em>
optional keyword argument, which, when set to <tt class="docutils literal"><span class="pre">False</span></tt>, disables automatic
following of <tt class="docutils literal"><span class="pre">__wrapped__</span></tt> links.
(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue20691">issue 20691</a>.)</p>
<p>A set of new functions to inspect
<a class="reference internal" href="../glossary.html#term-coroutine-function"><em class="xref std std-term">coroutine functions</em></a> and
<a class="reference internal" href="../glossary.html#term-coroutine"><em class="xref std std-term">coroutine objects</em></a> has been added:
<a class="reference internal" href="../library/inspect.html#inspect.iscoroutine" title="inspect.iscoroutine"><tt class="xref py py-func docutils literal"><span class="pre">iscoroutine()</span></tt></a>, <a class="reference internal" href="../library/inspect.html#inspect.iscoroutinefunction" title="inspect.iscoroutinefunction"><tt class="xref py py-func docutils literal"><span class="pre">iscoroutinefunction()</span></tt></a>,
<a class="reference internal" href="../library/inspect.html#inspect.isawaitable" title="inspect.isawaitable"><tt class="xref py py-func docutils literal"><span class="pre">isawaitable()</span></tt></a>, <a class="reference internal" href="../library/inspect.html#inspect.getcoroutinelocals" title="inspect.getcoroutinelocals"><tt class="xref py py-func docutils literal"><span class="pre">getcoroutinelocals()</span></tt></a>,
and <a class="reference internal" href="../library/inspect.html#inspect.getcoroutinestate" title="inspect.getcoroutinestate"><tt class="xref py py-func docutils literal"><span class="pre">getcoroutinestate()</span></tt></a>.
(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue24017">issue 24017</a> and <a class="reference external" href="https://bugs.python.org/issue24400">issue 24400</a>.)</p>
<p>The <a class="reference internal" href="../library/inspect.html#inspect.stack" title="inspect.stack"><tt class="xref py py-func docutils literal"><span class="pre">stack()</span></tt></a>, <a class="reference internal" href="../library/inspect.html#inspect.trace" title="inspect.trace"><tt class="xref py py-func docutils literal"><span class="pre">trace()</span></tt></a>,
<a class="reference internal" href="../library/inspect.html#inspect.getouterframes" title="inspect.getouterframes"><tt class="xref py py-func docutils literal"><span class="pre">getouterframes()</span></tt></a>, and <a class="reference internal" href="../library/inspect.html#inspect.getinnerframes" title="inspect.getinnerframes"><tt class="xref py py-func docutils literal"><span class="pre">getinnerframes()</span></tt></a>
functions now return a list of named tuples.
(Contributed by Daniel Shahaf in <a class="reference external" href="https://bugs.python.org/issue16808">issue 16808</a>.)</p>
</div>
<div class="section" id="io">
<h3>io<a class="headerlink" href="#io" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/io.html#io.BufferedIOBase.readinto1" title="io.BufferedIOBase.readinto1"><tt class="xref py py-meth docutils literal"><span class="pre">BufferedIOBase.readinto1()</span></tt></a>
method, that uses at most one call to the underlying raw stream&#8217;s
<a class="reference internal" href="../library/io.html#io.RawIOBase.read" title="io.RawIOBase.read"><tt class="xref py py-meth docutils literal"><span class="pre">RawIOBase.read()</span></tt></a> or
<a class="reference internal" href="../library/io.html#io.RawIOBase.readinto" title="io.RawIOBase.readinto"><tt class="xref py py-meth docutils literal"><span class="pre">RawIOBase.readinto()</span></tt></a> methods.
(Contributed by Nikolaus Rath in <a class="reference external" href="https://bugs.python.org/issue20578">issue 20578</a>.)</p>
</div>
<div class="section" id="ipaddress">
<h3>ipaddress<a class="headerlink" href="#ipaddress" title="Permalink to this headline">¶</a></h3>
<p>Both the <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv4Network" title="ipaddress.IPv4Network"><tt class="xref py py-class docutils literal"><span class="pre">IPv4Network</span></tt></a> and <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Network" title="ipaddress.IPv6Network"><tt class="xref py py-class docutils literal"><span class="pre">IPv6Network</span></tt></a> classes
now accept an <tt class="docutils literal"><span class="pre">(address,</span> <span class="pre">netmask)</span></tt> tuple argument, so as to easily construct
network objects from existing addresses:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ipaddress</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ipaddress</span><span class="o">.</span><span class="n">IPv4Network</span><span class="p">((</span><span class="s">&#39;127.0.0.0&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="go">IPv4Network(&#39;127.0.0.0/8&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ipaddress</span><span class="o">.</span><span class="n">IPv4Network</span><span class="p">((</span><span class="s">&#39;127.0.0.0&#39;</span><span class="p">,</span> <span class="s">&#39;255.0.0.0&#39;</span><span class="p">))</span>
<span class="go">IPv4Network(&#39;127.0.0.0/8&#39;)</span>
</pre></div>
</div>
<p>(Contributed by Peter Moody and Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue16531">issue 16531</a>.)</p>
<p>A new <tt class="xref py py-attr docutils literal"><span class="pre">reverse_pointer</span></tt> attribute for the
<a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv4Network" title="ipaddress.IPv4Network"><tt class="xref py py-class docutils literal"><span class="pre">IPv4Network</span></tt></a> and <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Network" title="ipaddress.IPv6Network"><tt class="xref py py-class docutils literal"><span class="pre">IPv6Network</span></tt></a> classes
returns the name of the reverse DNS PTR record:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ipaddress</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">addr</span> <span class="o">=</span> <span class="n">ipaddress</span><span class="o">.</span><span class="n">IPv4Address</span><span class="p">(</span><span class="s">&#39;127.0.0.1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">addr</span><span class="o">.</span><span class="n">reverse_pointer</span>
<span class="go">&#39;1.0.0.127.in-addr.arpa&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">addr6</span> <span class="o">=</span> <span class="n">ipaddress</span><span class="o">.</span><span class="n">IPv6Address</span><span class="p">(</span><span class="s">&#39;::1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">addr6</span><span class="o">.</span><span class="n">reverse_pointer</span>
<span class="go">&#39;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa&#39;</span>
</pre></div>
</div>
<p>(Contributed by Leon Weber in <a class="reference external" href="https://bugs.python.org/issue20480">issue 20480</a>.)</p>
</div>
<div class="section" id="json">
<h3>json<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/json.html#module-json.tool" title="json.tool"><tt class="xref py py-mod docutils literal"><span class="pre">json.tool</span></tt></a> command line interface now preserves the order of keys in
JSON objects passed in input.  The new <tt class="docutils literal"><span class="pre">--sort-keys</span></tt> option can be used
to sort the keys alphabetically. (Contributed by Berker Peksag
in <a class="reference external" href="https://bugs.python.org/issue21650">issue 21650</a>.)</p>
<p>JSON decoder now raises <a class="reference internal" href="../library/json.html#json.JSONDecodeError" title="json.JSONDecodeError"><tt class="xref py py-exc docutils literal"><span class="pre">JSONDecodeError</span></tt></a> instead of
<a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt></a> to provide better context information about the error.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19361">issue 19361</a>.)</p>
</div>
<div class="section" id="linecache">
<h3>linecache<a class="headerlink" href="#linecache" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/linecache.html#linecache.lazycache" title="linecache.lazycache"><tt class="xref py py-func docutils literal"><span class="pre">lazycache()</span></tt></a> function can be used to capture information
about a non-file-based module to permit getting its lines later via
<a class="reference internal" href="../library/linecache.html#linecache.getline" title="linecache.getline"><tt class="xref py py-func docutils literal"><span class="pre">getline()</span></tt></a>. This avoids doing I/O until a line is actually
needed, without having to carry the module globals around indefinitely.
(Contributed by Robert Collins in <a class="reference external" href="https://bugs.python.org/issue17911">issue 17911</a>.)</p>
</div>
<div class="section" id="locale">
<h3>locale<a class="headerlink" href="#locale" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/locale.html#locale.delocalize" title="locale.delocalize"><tt class="xref py py-func docutils literal"><span class="pre">delocalize()</span></tt></a> function can be used to convert a string into
a normalized number string, taking the <tt class="docutils literal"><span class="pre">LC_NUMERIC</span></tt> settings into account:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">locale</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_NUMERIC</span><span class="p">,</span> <span class="s">&#39;de_DE.UTF-8&#39;</span><span class="p">)</span>
<span class="go">&#39;de_DE.UTF-8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">delocalize</span><span class="p">(</span><span class="s">&#39;1.234,56&#39;</span><span class="p">)</span>
<span class="go">&#39;1234.56&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_NUMERIC</span><span class="p">,</span> <span class="s">&#39;en_US.UTF-8&#39;</span><span class="p">)</span>
<span class="go">&#39;en_US.UTF-8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">delocalize</span><span class="p">(</span><span class="s">&#39;1,234.56&#39;</span><span class="p">)</span>
<span class="go">&#39;1234.56&#39;</span>
</pre></div>
</div>
<p>(Contributed by Cédric Krier in <a class="reference external" href="https://bugs.python.org/issue13918">issue 13918</a>.)</p>
</div>
<div class="section" id="logging">
<h3>logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p>All logging methods (<a class="reference internal" href="../library/logging.html#logging.Logger" title="logging.Logger"><tt class="xref py py-class docutils literal"><span class="pre">Logger</span></tt></a> <a class="reference internal" href="../library/logging.html#logging.Logger.log" title="logging.Logger.log"><tt class="xref py py-meth docutils literal"><span class="pre">log()</span></tt></a>,
<a class="reference internal" href="../library/logging.html#logging.Logger.exception" title="logging.Logger.exception"><tt class="xref py py-meth docutils literal"><span class="pre">exception()</span></tt></a>, <a class="reference internal" href="../library/logging.html#logging.Logger.critical" title="logging.Logger.critical"><tt class="xref py py-meth docutils literal"><span class="pre">critical()</span></tt></a>,
<a class="reference internal" href="../library/logging.html#logging.Logger.debug" title="logging.Logger.debug"><tt class="xref py py-meth docutils literal"><span class="pre">debug()</span></tt></a>, etc.), now accept exception instances
as an <em>exc_info</em> argument, in addition to boolean values and exception
tuples:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;exception&#39;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">ex</span><span class="p">)</span>
<span class="go">ERROR:root:exception</span>
</pre></div>
</div>
<p>(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue20537">issue 20537</a>.)</p>
<p>The <a class="reference internal" href="../library/logging.handlers.html#logging.handlers.HTTPHandler" title="logging.handlers.HTTPHandler"><tt class="xref py py-class docutils literal"><span class="pre">handlers.HTTPHandler</span></tt></a> class now
accepts an optional <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><tt class="xref py py-class docutils literal"><span class="pre">ssl.SSLContext</span></tt></a> instance to configure SSL
settings used in an HTTP connection.
(Contributed by Alex Gaynor in <a class="reference external" href="https://bugs.python.org/issue22788">issue 22788</a>.)</p>
<p>The <a class="reference internal" href="../library/logging.handlers.html#logging.handlers.QueueListener" title="logging.handlers.QueueListener"><tt class="xref py py-class docutils literal"><span class="pre">handlers.QueueListener</span></tt></a> class now
takes a <em>respect_handler_level</em> keyword argument which, if set to <tt class="docutils literal"><span class="pre">True</span></tt>,
will pass messages to handlers taking handler levels into account.
(Contributed by Vinay Sajip.)</p>
</div>
<div class="section" id="lzma">
<h3>lzma<a class="headerlink" href="#lzma" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/lzma.html#lzma.LZMADecompressor.decompress" title="lzma.LZMADecompressor.decompress"><tt class="xref py py-meth docutils literal"><span class="pre">LZMADecompressor.decompress()</span></tt></a>
method now accepts an optional <em>max_length</em> argument to limit the maximum
size of decompressed data.
(Contributed by Martin Panter in <a class="reference external" href="https://bugs.python.org/issue15955">issue 15955</a>.)</p>
</div>
<div class="section" id="math">
<h3>math<a class="headerlink" href="#math" title="Permalink to this headline">¶</a></h3>
<p>Two new constants have been added to the <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><tt class="xref py py-mod docutils literal"><span class="pre">math</span></tt></a> module: <a class="reference internal" href="../library/math.html#math.inf" title="math.inf"><tt class="xref py py-data docutils literal"><span class="pre">inf</span></tt></a>
and <a class="reference internal" href="../library/math.html#math.nan" title="math.nan"><tt class="xref py py-data docutils literal"><span class="pre">nan</span></tt></a>.  (Contributed by Mark Dickinson in <a class="reference external" href="https://bugs.python.org/issue23185">issue 23185</a>.)</p>
<p>A new function <a class="reference internal" href="../library/math.html#math.isclose" title="math.isclose"><tt class="xref py py-func docutils literal"><span class="pre">isclose()</span></tt></a> provides a way to test for approximate
equality. (Contributed by Chris Barker and Tal Einat in <a class="reference external" href="https://bugs.python.org/issue24270">issue 24270</a>.)</p>
<p>A new <a class="reference internal" href="../library/math.html#math.gcd" title="math.gcd"><tt class="xref py py-func docutils literal"><span class="pre">gcd()</span></tt></a> function has been added.  The <a class="reference internal" href="../library/fractions.html#fractions.gcd" title="fractions.gcd"><tt class="xref py py-func docutils literal"><span class="pre">fractions.gcd()</span></tt></a>
function is now deprecated. (Contributed by Mark Dickinson and Serhiy
Storchaka in <a class="reference external" href="https://bugs.python.org/issue22486">issue 22486</a>.)</p>
</div>
<div class="section" id="multiprocessing">
<h3>multiprocessing<a class="headerlink" href="#multiprocessing" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../library/multiprocessing.html#multiprocessing.sharedctypes.synchronized" title="multiprocessing.sharedctypes.synchronized"><tt class="xref py py-func docutils literal"><span class="pre">sharedctypes.synchronized()</span></tt></a>
objects now support the <a class="reference internal" href="../glossary.html#term-context-manager"><em class="xref std std-term">context manager</em></a> protocol.
(Contributed by Charles-François Natali in <a class="reference external" href="https://bugs.python.org/issue21565">issue 21565</a>.)</p>
</div>
<div class="section" id="operator">
<h3>operator<a class="headerlink" href="#operator" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../library/operator.html#operator.attrgetter" title="operator.attrgetter"><tt class="xref py py-func docutils literal"><span class="pre">attrgetter()</span></tt></a>, <a class="reference internal" href="../library/operator.html#operator.itemgetter" title="operator.itemgetter"><tt class="xref py py-func docutils literal"><span class="pre">itemgetter()</span></tt></a>,
and <a class="reference internal" href="../library/operator.html#operator.methodcaller" title="operator.methodcaller"><tt class="xref py py-func docutils literal"><span class="pre">methodcaller()</span></tt></a> objects now support pickling.
(Contributed by Josh Rosenberg and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue22955">issue 22955</a>.)</p>
<p>New <a class="reference internal" href="../library/operator.html#operator.matmul" title="operator.matmul"><tt class="xref py py-func docutils literal"><span class="pre">matmul()</span></tt></a> and <a class="reference internal" href="../library/operator.html#operator.imatmul" title="operator.imatmul"><tt class="xref py py-func docutils literal"><span class="pre">imatmul()</span></tt></a> functions
to perform matrix multiplication.
(Contributed by Benjamin Peterson in <a class="reference external" href="https://bugs.python.org/issue21176">issue 21176</a>.)</p>
</div>
<div class="section" id="os">
<h3>os<a class="headerlink" href="#os" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/os.html#os.scandir" title="os.scandir"><tt class="xref py py-func docutils literal"><span class="pre">scandir()</span></tt></a> function returning an iterator of
<a class="reference internal" href="../library/os.html#os.DirEntry" title="os.DirEntry"><tt class="xref py py-class docutils literal"><span class="pre">DirEntry</span></tt></a> objects has been added.  If possible, <a class="reference internal" href="../library/os.html#os.scandir" title="os.scandir"><tt class="xref py py-func docutils literal"><span class="pre">scandir()</span></tt></a>
extracts file attributes while scanning a directory, removing the need to
perform subsequent system calls to determine file type or attributes, which may
significantly improve performance.  (Contributed by Ben Hoyt with the help
of Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22524">issue 22524</a>.)</p>
<p>On Windows, a new
<a class="reference internal" href="../library/os.html#os.stat_result.st_file_attributes" title="os.stat_result.st_file_attributes"><tt class="xref py py-attr docutils literal"><span class="pre">stat_result.st_file_attributes</span></tt></a>
attribute is now available.  It corresponds to the <tt class="docutils literal"><span class="pre">dwFileAttributes</span></tt> member
of the <tt class="docutils literal"><span class="pre">BY_HANDLE_FILE_INFORMATION</span></tt> structure returned by
<tt class="docutils literal"><span class="pre">GetFileInformationByHandle()</span></tt>.  (Contributed by Ben Hoyt in <a class="reference external" href="https://bugs.python.org/issue21719">issue 21719</a>.)</p>
<p>The <a class="reference internal" href="../library/os.html#os.urandom" title="os.urandom"><tt class="xref py py-func docutils literal"><span class="pre">urandom()</span></tt></a> function now uses the <tt class="docutils literal"><span class="pre">getrandom()</span></tt> syscall on Linux 3.17
or newer, and <tt class="docutils literal"><span class="pre">getentropy()</span></tt> on OpenBSD 5.6 and newer, removing the need to
use <tt class="docutils literal"><span class="pre">/dev/urandom</span></tt> and avoiding failures due to potential file descriptor
exhaustion.  (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22181">issue 22181</a>.)</p>
<p>New <a class="reference internal" href="../library/os.html#os.get_blocking" title="os.get_blocking"><tt class="xref py py-func docutils literal"><span class="pre">get_blocking()</span></tt></a> and <a class="reference internal" href="../library/os.html#os.set_blocking" title="os.set_blocking"><tt class="xref py py-func docutils literal"><span class="pre">set_blocking()</span></tt></a> functions allow to
get and set a file descriptor&#8217;s blocking mode (<a class="reference internal" href="../library/os.html#os.O_NONBLOCK" title="os.O_NONBLOCK"><tt class="xref py py-data docutils literal"><span class="pre">O_NONBLOCK</span></tt></a>.)
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22054">issue 22054</a>.)</p>
<p>The <a class="reference internal" href="../library/os.html#os.truncate" title="os.truncate"><tt class="xref py py-func docutils literal"><span class="pre">truncate()</span></tt></a> and <a class="reference internal" href="../library/os.html#os.ftruncate" title="os.ftruncate"><tt class="xref py py-func docutils literal"><span class="pre">ftruncate()</span></tt></a> functions are now supported
on Windows.  (Contributed by Steve Dower in <a class="reference external" href="https://bugs.python.org/issue23668">issue 23668</a>.)</p>
<p>There is a new <a class="reference internal" href="../library/os.path.html#os.path.commonpath" title="os.path.commonpath"><tt class="xref py py-func docutils literal"><span class="pre">os.path.commonpath()</span></tt></a> function returning the longest
common sub-path of each passed pathname.  Unlike the
<a class="reference internal" href="../library/os.path.html#os.path.commonprefix" title="os.path.commonprefix"><tt class="xref py py-func docutils literal"><span class="pre">os.path.commonprefix()</span></tt></a> function, it always returns a valid
path:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">commonprefix</span><span class="p">([</span><span class="s">&#39;/usr/lib&#39;</span><span class="p">,</span> <span class="s">&#39;/usr/local/lib&#39;</span><span class="p">])</span>
<span class="go">&#39;/usr/l&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">commonpath</span><span class="p">([</span><span class="s">&#39;/usr/lib&#39;</span><span class="p">,</span> <span class="s">&#39;/usr/local/lib&#39;</span><span class="p">])</span>
<span class="go">&#39;/usr&#39;</span>
</pre></div>
</div>
<p>(Contributed by Rafik Draoui and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue10395">issue 10395</a>.)</p>
</div>
<div class="section" id="pathlib">
<h3>pathlib<a class="headerlink" href="#pathlib" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/pathlib.html#pathlib.Path.samefile" title="pathlib.Path.samefile"><tt class="xref py py-meth docutils literal"><span class="pre">Path.samefile()</span></tt></a> method can be used
to check whether the path points to the same file as another path, which can
be either another <a class="reference internal" href="../library/pathlib.html#pathlib.Path" title="pathlib.Path"><tt class="xref py py-class docutils literal"><span class="pre">Path</span></tt></a> object, or a string:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pathlib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s">&#39;/etc/hosts&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s">&#39;/etc/../etc/hosts&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">samefile</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>(Contributed by Vajrasky Kok and Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue19775">issue 19775</a>.)</p>
<p>The <a class="reference internal" href="../library/pathlib.html#pathlib.Path.mkdir" title="pathlib.Path.mkdir"><tt class="xref py py-meth docutils literal"><span class="pre">Path.mkdir()</span></tt></a> method now accepts a new optional
<em>exist_ok</em> argument to match <tt class="docutils literal"><span class="pre">mkdir</span> <span class="pre">-p</span></tt> and <a class="reference internal" href="../library/os.html#os.makedirs" title="os.makedirs"><tt class="xref py py-func docutils literal"><span class="pre">os.makedirs()</span></tt></a>
functionality.  (Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue21539">issue 21539</a>.)</p>
<p>There is a new <a class="reference internal" href="../library/pathlib.html#pathlib.Path.expanduser" title="pathlib.Path.expanduser"><tt class="xref py py-meth docutils literal"><span class="pre">Path.expanduser()</span></tt></a> method to
expand <tt class="docutils literal"><span class="pre">~</span></tt> and <tt class="docutils literal"><span class="pre">~user</span></tt> prefixes.  (Contributed by Serhiy Storchaka and
Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue19776">issue 19776</a>.)</p>
<p>A new <a class="reference internal" href="../library/pathlib.html#pathlib.Path.home" title="pathlib.Path.home"><tt class="xref py py-meth docutils literal"><span class="pre">Path.home()</span></tt></a> class method can be used to get
a <a class="reference internal" href="../library/pathlib.html#pathlib.Path" title="pathlib.Path"><tt class="xref py py-class docutils literal"><span class="pre">Path</span></tt></a> instance representing the user’s home
directory.
(Contributed by Victor Salgado and Mayank Tripathi in <a class="reference external" href="https://bugs.python.org/issue19777">issue 19777</a>.)</p>
<p>New <a class="reference internal" href="../library/pathlib.html#pathlib.Path.write_text" title="pathlib.Path.write_text"><tt class="xref py py-meth docutils literal"><span class="pre">Path.write_text()</span></tt></a>,
<a class="reference internal" href="../library/pathlib.html#pathlib.Path.read_text" title="pathlib.Path.read_text"><tt class="xref py py-meth docutils literal"><span class="pre">Path.read_text()</span></tt></a>,
<a class="reference internal" href="../library/pathlib.html#pathlib.Path.write_bytes" title="pathlib.Path.write_bytes"><tt class="xref py py-meth docutils literal"><span class="pre">Path.write_bytes()</span></tt></a>,
<a class="reference internal" href="../library/pathlib.html#pathlib.Path.read_bytes" title="pathlib.Path.read_bytes"><tt class="xref py py-meth docutils literal"><span class="pre">Path.read_bytes()</span></tt></a> methods to simplify
read/write operations on files.</p>
<p>The following code snippet will create or rewrite existing file
<tt class="docutils literal"><span class="pre">~/spam42</span></tt>:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pathlib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s">&#39;~/spam42&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s">&#39;ham&#39;</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>(Contributed by Christopher Welborn in <a class="reference external" href="https://bugs.python.org/issue20218">issue 20218</a>.)</p>
</div>
<div class="section" id="pickle">
<h3>pickle<a class="headerlink" href="#pickle" title="Permalink to this headline">¶</a></h3>
<p>Nested objects, such as unbound methods or nested classes, can now be pickled
using <a class="reference internal" href="../library/pickle.html#pickle-protocols"><em>pickle protocols</em></a> older than protocol version 4.
Protocol version 4 already supports these cases.  (Contributed by Serhiy
Storchaka in <a class="reference external" href="https://bugs.python.org/issue23611">issue 23611</a>.)</p>
</div>
<div class="section" id="poplib">
<h3>poplib<a class="headerlink" href="#poplib" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/poplib.html#poplib.POP3.utf8" title="poplib.POP3.utf8"><tt class="xref py py-meth docutils literal"><span class="pre">POP3.utf8()</span></tt></a> command enables <span class="target" id="index-38"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6856.html"><strong>RFC 6856</strong></a>
(Internationalized Email) support, if a POP server supports it.
(Contributed by Milan OberKirch in <a class="reference external" href="https://bugs.python.org/issue21804">issue 21804</a>.)</p>
</div>
<div class="section" id="re">
<h3>re<a class="headerlink" href="#re" title="Permalink to this headline">¶</a></h3>
<p>References and conditional references to groups with fixed length are now
allowed in lookbehind assertions:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pat</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;(a|b).(?&lt;=\1)c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;aac&#39;</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 3), match=&#39;aac&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">&#39;bbc&#39;</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 3), match=&#39;bbc&#39;&gt;</span>
</pre></div>
</div>
<p>(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue9179">issue 9179</a>.)</p>
<p>The number of capturing groups in regular expressions is no longer limited to
100.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue22437">issue 22437</a>.)</p>
<p>The <a class="reference internal" href="../library/re.html#re.sub" title="re.sub"><tt class="xref py py-func docutils literal"><span class="pre">sub()</span></tt></a> and <a class="reference internal" href="../library/re.html#re.subn" title="re.subn"><tt class="xref py py-func docutils literal"><span class="pre">subn()</span></tt></a> functions now replace unmatched
groups with empty strings instead of raising an exception.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue1519638">issue 1519638</a>.)</p>
<p>The <a class="reference internal" href="../library/re.html#re.error" title="re.error"><tt class="xref py py-class docutils literal"><span class="pre">re.error</span></tt></a> exceptions have new attributes,
<a class="reference internal" href="../library/re.html#re.error.msg" title="re.error.msg"><tt class="xref py py-attr docutils literal"><span class="pre">msg</span></tt></a>, <a class="reference internal" href="../library/re.html#re.error.pattern" title="re.error.pattern"><tt class="xref py py-attr docutils literal"><span class="pre">pattern</span></tt></a>,
<a class="reference internal" href="../library/re.html#re.error.pos" title="re.error.pos"><tt class="xref py py-attr docutils literal"><span class="pre">pos</span></tt></a>, <a class="reference internal" href="../library/re.html#re.error.lineno" title="re.error.lineno"><tt class="xref py py-attr docutils literal"><span class="pre">lineno</span></tt></a>,
and <a class="reference internal" href="../library/re.html#re.error.colno" title="re.error.colno"><tt class="xref py py-attr docutils literal"><span class="pre">colno</span></tt></a>, that provide better context
information about the error:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s">    (?x)</span>
<span class="gp">... </span><span class="s">    .++</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
   <span class="c">...</span>
<span class="gr">sre_constants.error</span>: <span class="n">multiple repeat at position 16 (line 3, column 7)</span>
</pre></div>
</div>
<p>(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue22578">issue 22578</a>.)</p>
</div>
<div class="section" id="readline">
<h3>readline<a class="headerlink" href="#readline" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/readline.html#readline.append_history_file" title="readline.append_history_file"><tt class="xref py py-func docutils literal"><span class="pre">append_history_file()</span></tt></a> function can be used to append
the specified number of trailing elements in history to the given file.
(Contributed by Bruno Cauet in <a class="reference external" href="https://bugs.python.org/issue22940">issue 22940</a>.)</p>
</div>
<div class="section" id="selectors">
<h3>selectors<a class="headerlink" href="#selectors" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/selectors.html#selectors.DevpollSelector" title="selectors.DevpollSelector"><tt class="xref py py-class docutils literal"><span class="pre">DevpollSelector</span></tt></a> supports efficient
<tt class="docutils literal"><span class="pre">/dev/poll</span></tt> polling on Solaris.
(Contributed by Giampaolo Rodola&#8217; in <a class="reference external" href="https://bugs.python.org/issue18931">issue 18931</a>.)</p>
</div>
<div class="section" id="shutil">
<h3>shutil<a class="headerlink" href="#shutil" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/shutil.html#shutil.move" title="shutil.move"><tt class="xref py py-func docutils literal"><span class="pre">move()</span></tt></a> function now accepts a <em>copy_function</em> argument,
allowing, for example, the <a class="reference internal" href="../library/shutil.html#shutil.copy" title="shutil.copy"><tt class="xref py py-func docutils literal"><span class="pre">copy()</span></tt></a> function to be used instead of
the default <a class="reference internal" href="../library/shutil.html#shutil.copy2" title="shutil.copy2"><tt class="xref py py-func docutils literal"><span class="pre">copy2()</span></tt></a> if there is a need to ignore file metadata
when moving.
(Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue19840">issue 19840</a>.)</p>
<p>The <a class="reference internal" href="../library/shutil.html#shutil.make_archive" title="shutil.make_archive"><tt class="xref py py-func docutils literal"><span class="pre">make_archive()</span></tt></a> function now supports the <em>xztar</em> format.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue5411">issue 5411</a>.)</p>
</div>
<div class="section" id="signal">
<h3>signal<a class="headerlink" href="#signal" title="Permalink to this headline">¶</a></h3>
<p>On Windows, the <a class="reference internal" href="../library/signal.html#signal.set_wakeup_fd" title="signal.set_wakeup_fd"><tt class="xref py py-func docutils literal"><span class="pre">set_wakeup_fd()</span></tt></a> function now also supports
socket handles.  (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22018">issue 22018</a>.)</p>
<p>Various <tt class="docutils literal"><span class="pre">SIG*</span></tt> constants in the <a class="reference internal" href="../library/signal.html#module-signal" title="signal: Set handlers for asynchronous events."><tt class="xref py py-mod docutils literal"><span class="pre">signal</span></tt></a> module have been converted into
<a class="reference internal" href="../library/enum.html#module-enum" title="enum: Implementation of an enumeration class."><tt class="xref py py-mod docutils literal"><span class="pre">Enums</span></tt></a>.  This allows meaningful names to be printed
during debugging, instead of integer &#8220;magic numbers&#8221;.
(Contributed by Giampaolo Rodola&#8217; in <a class="reference external" href="https://bugs.python.org/issue21076">issue 21076</a>.)</p>
</div>
<div class="section" id="smtpd">
<h3>smtpd<a class="headerlink" href="#smtpd" title="Permalink to this headline">¶</a></h3>
<p>Both the <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer" title="smtpd.SMTPServer"><tt class="xref py py-class docutils literal"><span class="pre">SMTPServer</span></tt></a> and <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPChannel" title="smtpd.SMTPChannel"><tt class="xref py py-class docutils literal"><span class="pre">SMTPChannel</span></tt></a> classes now
accept a <em>decode_data</em> keyword argument to determine if the <tt class="docutils literal"><span class="pre">DATA</span></tt> portion of
the SMTP transaction is decoded using the <tt class="docutils literal"><span class="pre">&quot;utf-8&quot;</span></tt> codec or is instead
provided to the
<a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer.process_message" title="smtpd.SMTPServer.process_message"><tt class="xref py py-meth docutils literal"><span class="pre">SMTPServer.process_message()</span></tt></a>
method as a byte string.  The default is <tt class="docutils literal"><span class="pre">True</span></tt> for backward compatibility
reasons, but will change to <tt class="docutils literal"><span class="pre">False</span></tt> in Python 3.6.  If <em>decode_data</em> is set
to <tt class="docutils literal"><span class="pre">False</span></tt>, the <tt class="docutils literal"><span class="pre">process_message</span></tt> method must be prepared to accept keyword
arguments.
(Contributed by Maciej Szulik in <a class="reference external" href="https://bugs.python.org/issue19662">issue 19662</a>.)</p>
<p>The <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer" title="smtpd.SMTPServer"><tt class="xref py py-class docutils literal"><span class="pre">SMTPServer</span></tt></a> class now advertises the <tt class="docutils literal"><span class="pre">8BITMIME</span></tt> extension
(<span class="target" id="index-39"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6152.html"><strong>RFC 6152</strong></a>) if <em>decode_data</em> has been set <tt class="docutils literal"><span class="pre">True</span></tt>.  If the client
specifies <tt class="docutils literal"><span class="pre">BODY=8BITMIME</span></tt> on the <tt class="docutils literal"><span class="pre">MAIL</span></tt> command, it is passed to
<a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer.process_message" title="smtpd.SMTPServer.process_message"><tt class="xref py py-meth docutils literal"><span class="pre">SMTPServer.process_message()</span></tt></a>
via the <em>mail_options</em> keyword.
(Contributed by Milan Oberkirch and R.  David Murray in <a class="reference external" href="https://bugs.python.org/issue21795">issue 21795</a>.)</p>
<p>The <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer" title="smtpd.SMTPServer"><tt class="xref py py-class docutils literal"><span class="pre">SMTPServer</span></tt></a> class now also supports the <tt class="docutils literal"><span class="pre">SMTPUTF8</span></tt>
extension (<span class="target" id="index-40"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6531.html"><strong>RFC 6531</strong></a>: Internationalized Email).  If the client specified
<tt class="docutils literal"><span class="pre">SMTPUTF8</span> <span class="pre">BODY=8BITMIME</span></tt> on the <tt class="docutils literal"><span class="pre">MAIL</span></tt> command, they are passed to
<a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer.process_message" title="smtpd.SMTPServer.process_message"><tt class="xref py py-meth docutils literal"><span class="pre">SMTPServer.process_message()</span></tt></a>
via the <em>mail_options</em> keyword.  It is the responsibility of the
<tt class="docutils literal"><span class="pre">process_message</span></tt> method to correctly handle the <tt class="docutils literal"><span class="pre">SMTPUTF8</span></tt> data.
(Contributed by Milan Oberkirch in <a class="reference external" href="https://bugs.python.org/issue21725">issue 21725</a>.)</p>
<p>It is now possible to provide, directly or via name resolution, IPv6
addresses in the <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer" title="smtpd.SMTPServer"><tt class="xref py py-class docutils literal"><span class="pre">SMTPServer</span></tt></a> constructor, and have it
successfully connect.  (Contributed by Milan Oberkirch in <a class="reference external" href="https://bugs.python.org/issue14758">issue 14758</a>.)</p>
</div>
<div class="section" id="smtplib">
<h3>smtplib<a class="headerlink" href="#smtplib" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP.auth" title="smtplib.SMTP.auth"><tt class="xref py py-meth docutils literal"><span class="pre">SMTP.auth()</span></tt></a> method provides a convenient way to
implement custom authentication mechanisms. (Contributed by Milan
Oberkirch in <a class="reference external" href="https://bugs.python.org/issue15014">issue 15014</a>.)</p>
<p>The <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP.set_debuglevel" title="smtplib.SMTP.set_debuglevel"><tt class="xref py py-meth docutils literal"><span class="pre">SMTP.set_debuglevel()</span></tt></a> method now
accepts an additional debuglevel (2), which enables timestamps in debug
messages. (Contributed by Gavin Chappell and Maciej Szulik in <a class="reference external" href="https://bugs.python.org/issue16914">issue 16914</a>.)</p>
<p>Both the <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP.sendmail" title="smtplib.SMTP.sendmail"><tt class="xref py py-meth docutils literal"><span class="pre">SMTP.sendmail()</span></tt></a> and
<a class="reference internal" href="../library/smtplib.html#smtplib.SMTP.send_message" title="smtplib.SMTP.send_message"><tt class="xref py py-meth docutils literal"><span class="pre">SMTP.send_message()</span></tt></a> methods now
support support <span class="target" id="index-41"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6531.html"><strong>RFC 6531</strong></a> (SMTPUTF8).
(Contributed by Milan Oberkirch and R. David Murray in <a class="reference external" href="https://bugs.python.org/issue22027">issue 22027</a>.)</p>
</div>
<div class="section" id="sndhdr">
<h3>sndhdr<a class="headerlink" href="#sndhdr" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/sndhdr.html#sndhdr.what" title="sndhdr.what"><tt class="xref py py-func docutils literal"><span class="pre">what()</span></tt></a> and <a class="reference internal" href="../library/sndhdr.html#sndhdr.whathdr" title="sndhdr.whathdr"><tt class="xref py py-func docutils literal"><span class="pre">whathdr()</span></tt></a> functions  now return
a <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><tt class="xref py py-func docutils literal"><span class="pre">namedtuple()</span></tt></a>.  (Contributed by Claudiu Popa in
<a class="reference external" href="https://bugs.python.org/issue18615">issue 18615</a>.)</p>
</div>
<div class="section" id="socket">
<h3>socket<a class="headerlink" href="#socket" title="Permalink to this headline">¶</a></h3>
<p>Functions with timeouts now use a monotonic clock, instead of a system clock.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22043">issue 22043</a>.)</p>
<p>A new <a class="reference internal" href="../library/socket.html#socket.socket.sendfile" title="socket.socket.sendfile"><tt class="xref py py-meth docutils literal"><span class="pre">socket.sendfile()</span></tt></a> method allows to
send a file over a socket by using the high-performance <a class="reference internal" href="../library/os.html#os.sendfile" title="os.sendfile"><tt class="xref py py-func docutils literal"><span class="pre">os.sendfile()</span></tt></a>
function on UNIX, resulting in uploads being from 2 to 3 times faster than when
using plain <a class="reference internal" href="../library/socket.html#socket.socket.send" title="socket.socket.send"><tt class="xref py py-meth docutils literal"><span class="pre">socket.send()</span></tt></a>.
(Contributed by Giampaolo Rodola&#8217; in <a class="reference external" href="https://bugs.python.org/issue17552">issue 17552</a>.)</p>
<p>The <a class="reference internal" href="../library/socket.html#socket.socket.sendall" title="socket.socket.sendall"><tt class="xref py py-meth docutils literal"><span class="pre">socket.sendall()</span></tt></a> method no longer resets the
socket timeout every time bytes are received or sent.  The socket timeout is
now the maximum total duration to send all data.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue23853">issue 23853</a>.)</p>
<p>The <em>backlog</em> argument of the <a class="reference internal" href="../library/socket.html#socket.socket.listen" title="socket.socket.listen"><tt class="xref py py-meth docutils literal"><span class="pre">socket.listen()</span></tt></a>
method is now optional.  By default it is set to
<a class="reference internal" href="../library/socket.html#socket.SOMAXCONN" title="socket.SOMAXCONN"><tt class="xref py py-data docutils literal"><span class="pre">SOMAXCONN</span></tt></a> or to <tt class="docutils literal"><span class="pre">128</span></tt>, whichever is less.
(Contributed by Charles-François Natali in <a class="reference external" href="https://bugs.python.org/issue21455">issue 21455</a>.)</p>
</div>
<div class="section" id="ssl">
<h3>ssl<a class="headerlink" href="#ssl" title="Permalink to this headline">¶</a></h3>
<div class="section" id="memory-bio-support">
<span id="whatsnew-sslmemorybio"></span><h4>Memory BIO Support<a class="headerlink" href="#memory-bio-support" title="Permalink to this headline">¶</a></h4>
<p>(Contributed by Geert Jansen in <a class="reference external" href="https://bugs.python.org/issue21965">issue 21965</a>.)</p>
<p>The new <a class="reference internal" href="../library/ssl.html#ssl.SSLObject" title="ssl.SSLObject"><tt class="xref py py-class docutils literal"><span class="pre">SSLObject</span></tt></a> class has been added to provide SSL protocol
support for cases when the network I/O capabilities of <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><tt class="xref py py-class docutils literal"><span class="pre">SSLSocket</span></tt></a>
are not necessary or are suboptimal.  <tt class="docutils literal"><span class="pre">SSLObject</span></tt> represents
an SSL protocol instance, but does not implement any network I/O methods, and
instead provides a memory buffer interface.  The new <a class="reference internal" href="../library/ssl.html#ssl.MemoryBIO" title="ssl.MemoryBIO"><tt class="xref py py-class docutils literal"><span class="pre">MemoryBIO</span></tt></a>
class can be used to pass data between Python and an SSL protocol instance.</p>
<p>The memory BIO SSL support is primarily intended to be used in frameworks
implementing asynchronous I/O for which <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><tt class="xref py py-class docutils literal"><span class="pre">SSLSocket</span></tt></a>&#8216;s readiness
model (&#8220;select/poll&#8221;) is inefficient.</p>
<p>A new <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.wrap_bio" title="ssl.SSLContext.wrap_bio"><tt class="xref py py-meth docutils literal"><span class="pre">SSLContext.wrap_bio()</span></tt></a> method can be used
to create a new <tt class="docutils literal"><span class="pre">SSLObject</span></tt> instance.</p>
</div>
<div class="section" id="application-layer-protocol-negotiation-support">
<h4>Application-Layer Protocol Negotiation Support<a class="headerlink" href="#application-layer-protocol-negotiation-support" title="Permalink to this headline">¶</a></h4>
<p>(Contributed by Benjamin Peterson in <a class="reference external" href="https://bugs.python.org/issue20188">issue 20188</a>.)</p>
<p>Where OpenSSL support is present, the <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a> module now implements
the <em>Application-Layer Protocol Negotiation</em> TLS extension as described
in <span class="target" id="index-42"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc7301.html"><strong>RFC 7301</strong></a>.</p>
<p>The new <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.set_alpn_protocols" title="ssl.SSLContext.set_alpn_protocols"><tt class="xref py py-meth docutils literal"><span class="pre">SSLContext.set_alpn_protocols()</span></tt></a>
can be used to specify which protocols a socket should advertise during
the TLS handshake.</p>
<p>The new
<a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.selected_alpn_protocol" title="ssl.SSLSocket.selected_alpn_protocol"><tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.selected_alpn_protocol()</span></tt></a>
returns the protocol that was selected during the TLS handshake.
The <a class="reference internal" href="../library/ssl.html#ssl.HAS_ALPN" title="ssl.HAS_ALPN"><tt class="xref py py-data docutils literal"><span class="pre">HAS_ALPN</span></tt></a> flag indicates whether ALPN support is present.</p>
</div>
<div class="section" id="other-changes">
<h4>Other Changes<a class="headerlink" href="#other-changes" title="Permalink to this headline">¶</a></h4>
<p>There is a new <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.version" title="ssl.SSLSocket.version"><tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.version()</span></tt></a> method to
query the actual protocol version in use.
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue20421">issue 20421</a>.)</p>
<p>The <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><tt class="xref py py-class docutils literal"><span class="pre">SSLSocket</span></tt></a> class now implements
a <tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.sendfile()</span></tt> method.
(Contributed by Giampaolo Rodola&#8217; in <a class="reference external" href="https://bugs.python.org/issue17552">issue 17552</a>.)</p>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.send()</span></tt> method now raises either
the <a class="reference internal" href="../library/ssl.html#ssl.SSLWantReadError" title="ssl.SSLWantReadError"><tt class="xref py py-exc docutils literal"><span class="pre">ssl.SSLWantReadError</span></tt></a> or <a class="reference internal" href="../library/ssl.html#ssl.SSLWantWriteError" title="ssl.SSLWantWriteError"><tt class="xref py py-exc docutils literal"><span class="pre">ssl.SSLWantWriteError</span></tt></a> exception on a
non-blocking socket if the operation would block. Previously, it would return
<tt class="docutils literal"><span class="pre">0</span></tt>.  (Contributed by Nikolaus Rath in <a class="reference external" href="https://bugs.python.org/issue20951">issue 20951</a>.)</p>
<p>The <a class="reference internal" href="../library/ssl.html#ssl.cert_time_to_seconds" title="ssl.cert_time_to_seconds"><tt class="xref py py-func docutils literal"><span class="pre">cert_time_to_seconds()</span></tt></a> function now interprets the input time
as UTC and not as local time, per <span class="target" id="index-43"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc5280.html"><strong>RFC 5280</strong></a>.  Additionally, the return
value is always an <a class="reference internal" href="../library/functions.html#int" title="int"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>. (Contributed by Akira Li in <a class="reference external" href="https://bugs.python.org/issue19940">issue 19940</a>.)</p>
<p>New <tt class="xref py py-meth docutils literal"><span class="pre">SSLObject.shared_ciphers()</span></tt> and
<a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.shared_ciphers" title="ssl.SSLSocket.shared_ciphers"><tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.shared_ciphers()</span></tt></a> methods return
the list of ciphers sent by the client during the handshake.
(Contributed by Benjamin Peterson in <a class="reference external" href="https://bugs.python.org/issue23186">issue 23186</a>.)</p>
<p>The <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.do_handshake" title="ssl.SSLSocket.do_handshake"><tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.do_handshake()</span></tt></a>,
<a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.read" title="ssl.SSLSocket.read"><tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.read()</span></tt></a>,
<tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.shutdown()</span></tt>, and
<a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.write" title="ssl.SSLSocket.write"><tt class="xref py py-meth docutils literal"><span class="pre">SSLSocket.write()</span></tt></a> methods of the <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><tt class="xref py py-class docutils literal"><span class="pre">SSLSocket</span></tt></a>
class no longer reset the socket timeout every time bytes are received or sent.
The socket timeout is now the maximum total duration of the method.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue23853">issue 23853</a>.)</p>
<p>The <a class="reference internal" href="../library/ssl.html#ssl.match_hostname" title="ssl.match_hostname"><tt class="xref py py-func docutils literal"><span class="pre">match_hostname()</span></tt></a> function now supports matching of IP addresses.
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue23239">issue 23239</a>.)</p>
</div>
</div>
<div class="section" id="sqlite3">
<h3>sqlite3<a class="headerlink" href="#sqlite3" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/sqlite3.html#sqlite3.Row" title="sqlite3.Row"><tt class="xref py py-class docutils literal"><span class="pre">Row</span></tt></a> class now fully supports the sequence protocol,
in particular <a class="reference internal" href="../library/functions.html#reversed" title="reversed"><tt class="xref py py-func docutils literal"><span class="pre">reversed()</span></tt></a> iteration and slice indexing.
(Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue10203">issue 10203</a>; by Lucas Sinclair,
Jessica McKellar, and  Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue13583">issue 13583</a>.)</p>
</div>
<div class="section" id="subprocess">
<span id="whatsnew-subprocess"></span><h3>subprocess<a class="headerlink" href="#subprocess" title="Permalink to this headline">¶</a></h3>
<p>The new <a class="reference internal" href="../library/subprocess.html#subprocess.run" title="subprocess.run"><tt class="xref py py-func docutils literal"><span class="pre">run()</span></tt></a> function has been added.
It runs the specified command and returns a
<a class="reference internal" href="../library/subprocess.html#subprocess.CompletedProcess" title="subprocess.CompletedProcess"><tt class="xref py py-class docutils literal"><span class="pre">CompletedProcess</span></tt></a> object, which describes a finished
process.  The new API is more consistent and is the recommended approach
to invoking subprocesses in Python code that does not need to maintain
compatibility with earlier Python versions.
(Contributed by Thomas Kluyver in <a class="reference external" href="https://bugs.python.org/issue23342">issue 23342</a>.)</p>
<p>Examples:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s">&quot;ls&quot;</span><span class="p">,</span> <span class="s">&quot;-l&quot;</span><span class="p">])</span>  <span class="c"># doesn&#39;t capture output</span>
<span class="go">CompletedProcess(args=[&#39;ls&#39;, &#39;-l&#39;], returncode=0)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s">&quot;exit 1&quot;</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="k">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">subprocess.CalledProcessError</span>: <span class="n">Command &#39;exit 1&#39; returned non-zero exit status 1</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s">&quot;ls&quot;</span><span class="p">,</span> <span class="s">&quot;-l&quot;</span><span class="p">,</span> <span class="s">&quot;/dev/null&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
<span class="go">CompletedProcess(args=[&#39;ls&#39;, &#39;-l&#39;, &#39;/dev/null&#39;], returncode=0,</span>
<span class="go">stdout=b&#39;crw-rw-rw- 1 root root 1, 3 Jan 23 16:23 /dev/null\n&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="sys">
<h3>sys<a class="headerlink" href="#sys" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/sys.html#sys.set_coroutine_wrapper" title="sys.set_coroutine_wrapper"><tt class="xref py py-func docutils literal"><span class="pre">set_coroutine_wrapper()</span></tt></a> function allows setting a global
hook that will be called whenever a <a class="reference internal" href="../glossary.html#term-coroutine"><em class="xref std std-term">coroutine object</em></a>
is created by an <a class="reference internal" href="../reference/compound_stmts.html#async-def"><tt class="xref std std-keyword docutils literal"><span class="pre">async</span> <span class="pre">def</span></tt></a> function.  A corresponding
<a class="reference internal" href="../library/sys.html#sys.get_coroutine_wrapper" title="sys.get_coroutine_wrapper"><tt class="xref py py-func docutils literal"><span class="pre">get_coroutine_wrapper()</span></tt></a> can be used to obtain a currently set
wrapper.  Both functions are <a class="reference internal" href="../glossary.html#term-provisional-api"><em class="xref std std-term">provisional</em></a>,
and are intended for debugging purposes only.  (Contributed by Yury Selivanov
in <a class="reference external" href="https://bugs.python.org/issue24017">issue 24017</a>.)</p>
<p>A new <a class="reference internal" href="../library/sys.html#sys.is_finalizing" title="sys.is_finalizing"><tt class="xref py py-func docutils literal"><span class="pre">is_finalizing()</span></tt></a> function can be used to check if the Python
interpreter is <a class="reference internal" href="../glossary.html#term-interpreter-shutdown"><em class="xref std std-term">shutting down</em></a>.
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue22696">issue 22696</a>.)</p>
</div>
<div class="section" id="sysconfig">
<h3>sysconfig<a class="headerlink" href="#sysconfig" title="Permalink to this headline">¶</a></h3>
<p>The name of the user scripts directory on Windows now includes the first
two components of the Python version. (Contributed by Paul Moore
in <a class="reference external" href="https://bugs.python.org/issue23437">issue 23437</a>.)</p>
</div>
<div class="section" id="tarfile">
<h3>tarfile<a class="headerlink" href="#tarfile" title="Permalink to this headline">¶</a></h3>
<p>The <em>mode</em> argument of the <a class="reference internal" href="../library/tarfile.html#tarfile.open" title="tarfile.open"><tt class="xref py py-func docutils literal"><span class="pre">open()</span></tt></a> function now accepts <tt class="docutils literal"><span class="pre">&quot;x&quot;</span></tt>
to request exclusive creation.  (Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue21717">issue 21717</a>.)</p>
<p>The <a class="reference internal" href="../library/tarfile.html#tarfile.TarFile.extractall" title="tarfile.TarFile.extractall"><tt class="xref py py-meth docutils literal"><span class="pre">TarFile.extractall()</span></tt></a> and
<a class="reference internal" href="../library/tarfile.html#tarfile.TarFile.extract" title="tarfile.TarFile.extract"><tt class="xref py py-meth docutils literal"><span class="pre">TarFile.extract()</span></tt></a> methods now take a keyword
argument <em>numeric_only</em>.  If set to <tt class="docutils literal"><span class="pre">True</span></tt>, the extracted files and
directories will be owned by the numeric <tt class="docutils literal"><span class="pre">uid</span></tt> and <tt class="docutils literal"><span class="pre">gid</span></tt> from the tarfile.
If set to <tt class="docutils literal"><span class="pre">False</span></tt> (the default, and the behavior in versions prior to 3.5),
they will be owned by the named user and group in the tarfile.
(Contributed by Michael Vogt and Eric Smith in <a class="reference external" href="https://bugs.python.org/issue23193">issue 23193</a>.)</p>
<p>The <a class="reference internal" href="../library/tarfile.html#tarfile.TarFile.list" title="tarfile.TarFile.list"><tt class="xref py py-meth docutils literal"><span class="pre">TarFile.list()</span></tt></a> now accepts an optional
<em>members</em> keyword argument that can be set to a subset of the list returned
by <a class="reference internal" href="../library/tarfile.html#tarfile.TarFile.getmembers" title="tarfile.TarFile.getmembers"><tt class="xref py py-meth docutils literal"><span class="pre">TarFile.getmembers()</span></tt></a>.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue21549">issue 21549</a>.)</p>
</div>
<div class="section" id="threading">
<h3>threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h3>
<p>Both the <a class="reference internal" href="../library/threading.html#threading.Lock.acquire" title="threading.Lock.acquire"><tt class="xref py py-meth docutils literal"><span class="pre">Lock.acquire()</span></tt></a> and
<a class="reference internal" href="../library/threading.html#threading.RLock.acquire" title="threading.RLock.acquire"><tt class="xref py py-meth docutils literal"><span class="pre">RLock.acquire()</span></tt></a> methods
now use a monotonic clock for timeout management.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22043">issue 22043</a>.)</p>
</div>
<div class="section" id="time">
<h3>time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/time.html#time.monotonic" title="time.monotonic"><tt class="xref py py-func docutils literal"><span class="pre">monotonic()</span></tt></a> function is now always available.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue22043">issue 22043</a>.)</p>
</div>
<div class="section" id="timeit">
<h3>timeit<a class="headerlink" href="#timeit" title="Permalink to this headline">¶</a></h3>
<p>A new command line option <tt class="docutils literal"><span class="pre">-u</span></tt> or <tt class="samp docutils literal"><span class="pre">--unit=</span><em><span class="pre">U</span></em></tt> can be used to specify the time
unit for the timer output.  Supported options are <tt class="docutils literal"><span class="pre">usec</span></tt>, <tt class="docutils literal"><span class="pre">msec</span></tt>,
or <tt class="docutils literal"><span class="pre">sec</span></tt>.  (Contributed by Julian Gindi in <a class="reference external" href="https://bugs.python.org/issue18983">issue 18983</a>.)</p>
<p>The <a class="reference internal" href="../library/timeit.html#timeit.timeit" title="timeit.timeit"><tt class="xref py py-func docutils literal"><span class="pre">timeit()</span></tt></a> function has a new <em>globals</em> parameter for
specifying the namespace in which the code will be running.
(Contributed by Ben Roberts in <a class="reference external" href="https://bugs.python.org/issue2527">issue 2527</a>.)</p>
</div>
<div class="section" id="tkinter">
<h3>tkinter<a class="headerlink" href="#tkinter" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="xref py py-mod docutils literal"><span class="pre">tkinter._fix</span></tt> module used for setting up the Tcl/Tk environment
on Windows has been replaced by a private function in the <tt class="xref py py-mod docutils literal"><span class="pre">_tkinter</span></tt>
module which makes no permanent changes to environment variables.
(Contributed by Zachary Ware in <a class="reference external" href="https://bugs.python.org/issue20035">issue 20035</a>.)</p>
</div>
<div class="section" id="traceback">
<span id="whatsnew-traceback"></span><h3>traceback<a class="headerlink" href="#traceback" title="Permalink to this headline">¶</a></h3>
<p>New <a class="reference internal" href="../library/traceback.html#traceback.walk_stack" title="traceback.walk_stack"><tt class="xref py py-func docutils literal"><span class="pre">walk_stack()</span></tt></a> and <a class="reference internal" href="../library/traceback.html#traceback.walk_tb" title="traceback.walk_tb"><tt class="xref py py-func docutils literal"><span class="pre">walk_tb()</span></tt></a>
functions to conveniently traverse frame and traceback objects.
(Contributed by Robert Collins in <a class="reference external" href="https://bugs.python.org/issue17911">issue 17911</a>.)</p>
<p>New lightweight classes: <a class="reference internal" href="../library/traceback.html#traceback.TracebackException" title="traceback.TracebackException"><tt class="xref py py-class docutils literal"><span class="pre">TracebackException</span></tt></a>,
<a class="reference internal" href="../library/traceback.html#traceback.StackSummary" title="traceback.StackSummary"><tt class="xref py py-class docutils literal"><span class="pre">StackSummary</span></tt></a>, and <a class="reference internal" href="../library/traceback.html#traceback.FrameSummary" title="traceback.FrameSummary"><tt class="xref py py-class docutils literal"><span class="pre">FrameSummary</span></tt></a>.
(Contributed by Robert Collins in <a class="reference external" href="https://bugs.python.org/issue17911">issue 17911</a>.)</p>
<p>Both the <a class="reference internal" href="../library/traceback.html#traceback.print_tb" title="traceback.print_tb"><tt class="xref py py-func docutils literal"><span class="pre">print_tb()</span></tt></a> and <a class="reference internal" href="../library/traceback.html#traceback.print_stack" title="traceback.print_stack"><tt class="xref py py-func docutils literal"><span class="pre">print_stack()</span></tt></a> functions
now support negative values for the <em>limit</em> argument.
(Contributed by Dmitry Kazakov in <a class="reference external" href="https://bugs.python.org/issue22619">issue 22619</a>.)</p>
</div>
<div class="section" id="types">
<h3>types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3>
<p>A new <a class="reference internal" href="../library/types.html#types.coroutine" title="types.coroutine"><tt class="xref py py-func docutils literal"><span class="pre">coroutine()</span></tt></a> function to transform
<a class="reference internal" href="../glossary.html#term-generator-iterator"><em class="xref std std-term">generator</em></a> and
<a class="reference internal" href="../library/collections.abc.html#collections.abc.Generator" title="collections.abc.Generator"><tt class="xref py py-class docutils literal"><span class="pre">generator-like</span></tt></a> objects into
<a class="reference internal" href="../glossary.html#term-awaitable"><em class="xref std std-term">awaitables</em></a>.
(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue24017">issue 24017</a>.)</p>
<p>A new type called <a class="reference internal" href="../library/types.html#types.CoroutineType" title="types.CoroutineType"><tt class="xref py py-class docutils literal"><span class="pre">CoroutineType</span></tt></a>, which is used for
<a class="reference internal" href="../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> objects created by <a class="reference internal" href="../reference/compound_stmts.html#async-def"><tt class="xref std std-keyword docutils literal"><span class="pre">async</span> <span class="pre">def</span></tt></a> functions.
(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue24400">issue 24400</a>.)</p>
</div>
<div class="section" id="unicodedata">
<h3>unicodedata<a class="headerlink" href="#unicodedata" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/unicodedata.html#module-unicodedata" title="unicodedata: Access the Unicode Database."><tt class="xref py py-mod docutils literal"><span class="pre">unicodedata</span></tt></a> module now uses data from <a class="reference external" href="http://unicode.org/versions/Unicode8.0.0/">Unicode 8.0.0</a>.</p>
</div>
<div class="section" id="unittest">
<h3>unittest<a class="headerlink" href="#unittest" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/unittest.html#unittest.TestLoader.loadTestsFromModule" title="unittest.TestLoader.loadTestsFromModule"><tt class="xref py py-meth docutils literal"><span class="pre">TestLoader.loadTestsFromModule()</span></tt></a>
method now accepts a keyword-only argument <em>pattern</em> which is passed to
<tt class="docutils literal"><span class="pre">load_tests</span></tt> as the third argument.  Found packages are now checked for
<tt class="docutils literal"><span class="pre">load_tests</span></tt> regardless of whether their path matches <em>pattern</em>, because it
is impossible for a package name to match the default pattern.
(Contributed by Robert Collins and Barry A. Warsaw in <a class="reference external" href="https://bugs.python.org/issue16662">issue 16662</a>.)</p>
<p>Unittest discovery errors now are exposed in the
<a class="reference internal" href="../library/unittest.html#unittest.TestLoader.errors" title="unittest.TestLoader.errors"><tt class="xref py py-data docutils literal"><span class="pre">TestLoader.errors</span></tt></a> attribute of the
<a class="reference internal" href="../library/unittest.html#unittest.TestLoader" title="unittest.TestLoader"><tt class="xref py py-class docutils literal"><span class="pre">TestLoader</span></tt></a> instance.
(Contributed by Robert Collins in <a class="reference external" href="https://bugs.python.org/issue19746">issue 19746</a>.)</p>
<p>A new command line option <tt class="docutils literal"><span class="pre">--locals</span></tt> to show local variables in
tracebacks.  (Contributed by Robert Collins in <a class="reference external" href="https://bugs.python.org/issue22936">issue 22936</a>.)</p>
</div>
<div class="section" id="unittest-mock">
<h3>unittest.mock<a class="headerlink" href="#unittest-mock" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/unittest.mock.html#unittest.mock.Mock" title="unittest.mock.Mock"><tt class="xref py py-class docutils literal"><span class="pre">Mock</span></tt></a> class has the following improvements:</p>
<ul class="simple">
<li>The class constructor has a new <em>unsafe</em> parameter, which causes mock
objects to raise <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><tt class="xref py py-exc docutils literal"><span class="pre">AttributeError</span></tt></a> on attribute names starting
with <tt class="docutils literal"><span class="pre">&quot;assert&quot;</span></tt>.
(Contributed by Kushal Das in <a class="reference external" href="https://bugs.python.org/issue21238">issue 21238</a>.)</li>
<li>A new <a class="reference internal" href="../library/unittest.mock.html#unittest.mock.Mock.assert_not_called" title="unittest.mock.Mock.assert_not_called"><tt class="xref py py-meth docutils literal"><span class="pre">Mock.assert_not_called()</span></tt></a>
method to check if the mock object was called.
(Contributed by Kushal Das in <a class="reference external" href="https://bugs.python.org/issue21262">issue 21262</a>.)</li>
</ul>
<p>The <a class="reference internal" href="../library/unittest.mock.html#unittest.mock.MagicMock" title="unittest.mock.MagicMock"><tt class="xref py py-class docutils literal"><span class="pre">MagicMock</span></tt></a> class now supports <a class="reference internal" href="../reference/datamodel.html#object.__truediv__" title="object.__truediv__"><tt class="xref py py-meth docutils literal"><span class="pre">__truediv__()</span></tt></a>,
<a class="reference internal" href="../reference/datamodel.html#object.__divmod__" title="object.__divmod__"><tt class="xref py py-meth docutils literal"><span class="pre">__divmod__()</span></tt></a> and <a class="reference internal" href="../reference/datamodel.html#object.__matmul__" title="object.__matmul__"><tt class="xref py py-meth docutils literal"><span class="pre">__matmul__()</span></tt></a> operators.
(Contributed by Johannes Baiter in <a class="reference external" href="https://bugs.python.org/issue20968">issue 20968</a>, and Håkan Lövdahl
in <a class="reference external" href="https://bugs.python.org/issue23581">issue 23581</a> and <a class="reference external" href="https://bugs.python.org/issue23568">issue 23568</a>.)</p>
<p>It is no longer necessary to explicitly pass <tt class="docutils literal"><span class="pre">create=True</span></tt> to the
<a class="reference internal" href="../library/unittest.mock.html#unittest.mock.patch" title="unittest.mock.patch"><tt class="xref py py-func docutils literal"><span class="pre">patch()</span></tt></a> function when patching builtin names.
(Contributed by Kushal Das in <a class="reference external" href="https://bugs.python.org/issue17660">issue 17660</a>.)</p>
</div>
<div class="section" id="urllib">
<h3>urllib<a class="headerlink" href="#urllib" title="Permalink to this headline">¶</a></h3>
<p>A new
<a class="reference internal" href="../library/urllib.request.html#urllib.request.HTTPPasswordMgrWithPriorAuth" title="urllib.request.HTTPPasswordMgrWithPriorAuth"><tt class="xref py py-class docutils literal"><span class="pre">request.HTTPPasswordMgrWithPriorAuth</span></tt></a>
class allows HTTP Basic Authentication credentials to be managed so as to
eliminate unnecessary <tt class="docutils literal"><span class="pre">401</span></tt> response handling, or to unconditionally send
credentials on the first request in order to communicate with servers that
return a <tt class="docutils literal"><span class="pre">404</span></tt> response instead of a <tt class="docutils literal"><span class="pre">401</span></tt> if the <tt class="docutils literal"><span class="pre">Authorization</span></tt> header
is not sent. (Contributed by Matej Cepl in <a class="reference external" href="https://bugs.python.org/issue19494">issue 19494</a> and Akshit Khurana in
<a class="reference external" href="https://bugs.python.org/issue7159">issue 7159</a>.)</p>
<p>A new <em>quote_via</em> argument for the
<a class="reference internal" href="../library/urllib.parse.html#urllib.parse.urlencode" title="urllib.parse.urlencode"><tt class="xref py py-func docutils literal"><span class="pre">parse.urlencode()</span></tt></a>
function provides a way to control the encoding of query parts if needed.
(Contributed by Samwyse and Arnon Yaari in <a class="reference external" href="https://bugs.python.org/issue13866">issue 13866</a>.)</p>
<p>The <a class="reference internal" href="../library/urllib.request.html#urllib.request.urlopen" title="urllib.request.urlopen"><tt class="xref py py-func docutils literal"><span class="pre">request.urlopen()</span></tt></a> function accepts an
<a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><tt class="xref py py-class docutils literal"><span class="pre">ssl.SSLContext</span></tt></a> object as a <em>context</em> argument, which will be used for
the HTTPS connection.  (Contributed by Alex Gaynor in <a class="reference external" href="https://bugs.python.org/issue22366">issue 22366</a>.)</p>
<p>The <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.urljoin" title="urllib.parse.urljoin"><tt class="xref py py-func docutils literal"><span class="pre">parse.urljoin()</span></tt></a> was updated to use the
<span class="target" id="index-44"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc3986.html"><strong>RFC 3986</strong></a> semantics for the resolution of relative URLs, rather than
<span class="target" id="index-45"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc1808.html"><strong>RFC 1808</strong></a> and <span class="target" id="index-46"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc2396.html"><strong>RFC 2396</strong></a>.
(Contributed by Demian Brecht and Senthil Kumaran in <a class="reference external" href="https://bugs.python.org/issue22118">issue 22118</a>.)</p>
</div>
<div class="section" id="wsgiref">
<h3>wsgiref<a class="headerlink" href="#wsgiref" title="Permalink to this headline">¶</a></h3>
<p>The <em>headers</em> argument of the <a class="reference internal" href="../library/wsgiref.html#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><tt class="xref py py-class docutils literal"><span class="pre">headers.Headers</span></tt></a>
class constructor is now optional.
(Contributed by Pablo Torres Navarrete and SilentGhost in <a class="reference external" href="https://bugs.python.org/issue5800">issue 5800</a>.)</p>
</div>
<div class="section" id="xmlrpc">
<h3>xmlrpc<a class="headerlink" href="#xmlrpc" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/xmlrpc.client.html#xmlrpc.client.ServerProxy" title="xmlrpc.client.ServerProxy"><tt class="xref py py-class docutils literal"><span class="pre">client.ServerProxy</span></tt></a> class now supports
the <a class="reference internal" href="../glossary.html#term-context-manager"><em class="xref std std-term">context manager</em></a> protocol.
(Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue20627">issue 20627</a>.)</p>
<p>The <a class="reference internal" href="../library/xmlrpc.client.html#xmlrpc.client.ServerProxy" title="xmlrpc.client.ServerProxy"><tt class="xref py py-class docutils literal"><span class="pre">client.ServerProxy</span></tt></a> constructor now accepts
an optional <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><tt class="xref py py-class docutils literal"><span class="pre">ssl.SSLContext</span></tt></a> instance.
(Contributed by Alex Gaynor in <a class="reference external" href="https://bugs.python.org/issue22960">issue 22960</a>.)</p>
</div>
<div class="section" id="xml-sax">
<h3>xml.sax<a class="headerlink" href="#xml-sax" title="Permalink to this headline">¶</a></h3>
<p>SAX parsers now support a character stream of the
<a class="reference internal" href="../library/xml.sax.reader.html#xml.sax.xmlreader.InputSource" title="xml.sax.xmlreader.InputSource"><tt class="xref py py-class docutils literal"><span class="pre">xmlreader.InputSource</span></tt></a> object.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue2175">issue 2175</a>.)</p>
<p><a class="reference internal" href="../library/xml.sax.html#xml.sax.parseString" title="xml.sax.parseString"><tt class="xref py py-func docutils literal"><span class="pre">parseString()</span></tt></a> now accepts a <a class="reference internal" href="../library/stdtypes.html#str" title="str"><tt class="xref py py-class docutils literal"><span class="pre">str</span></tt></a> instance.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue10590">issue 10590</a>.)</p>
</div>
<div class="section" id="zipfile">
<h3>zipfile<a class="headerlink" href="#zipfile" title="Permalink to this headline">¶</a></h3>
<p>ZIP output can now be written to unseekable streams.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23252">issue 23252</a>.)</p>
<p>The <em>mode</em> argument of <a class="reference internal" href="../library/zipfile.html#zipfile.ZipFile.open" title="zipfile.ZipFile.open"><tt class="xref py py-meth docutils literal"><span class="pre">ZipFile.open()</span></tt></a> method now
accepts <tt class="docutils literal"><span class="pre">&quot;x&quot;</span></tt> to request exclusive creation.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue21717">issue 21717</a>.)</p>
</div>
</div>
<div class="section" id="other-module-level-changes">
<h2>Other module-level changes<a class="headerlink" href="#other-module-level-changes" title="Permalink to this headline">¶</a></h2>
<p>Many functions in the <a class="reference internal" href="../library/mmap.html#module-mmap" title="mmap: Interface to memory-mapped files for Unix and Windows."><tt class="xref py py-mod docutils literal"><span class="pre">mmap</span></tt></a>, <a class="reference internal" href="../library/ossaudiodev.html#module-ossaudiodev" title="ossaudiodev: Access to OSS-compatible audio devices. (Linux, FreeBSD)"><tt class="xref py py-mod docutils literal"><span class="pre">ossaudiodev</span></tt></a>, <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><tt class="xref py py-mod docutils literal"><span class="pre">socket</span></tt></a>,
<a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a>, and <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><tt class="xref py py-mod docutils literal"><span class="pre">codecs</span></tt></a> modules now accept writable
<a class="reference internal" href="../glossary.html#term-bytes-like-object"><em class="xref std std-term">bytes-like objects</em></a>.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23001">issue 23001</a>.)</p>
</div>
<div class="section" id="optimizations">
<h2>Optimizations<a class="headerlink" href="#optimizations" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../library/os.html#os.walk" title="os.walk"><tt class="xref py py-func docutils literal"><span class="pre">os.walk()</span></tt></a> function has been sped up by 3 to 5 times on POSIX systems,
and by 7 to 20 times on Windows.  This was done using the new <a class="reference internal" href="../library/os.html#os.scandir" title="os.scandir"><tt class="xref py py-func docutils literal"><span class="pre">os.scandir()</span></tt></a>
function, which exposes file information from the underlying <tt class="docutils literal"><span class="pre">readdir</span></tt> or
<tt class="docutils literal"><span class="pre">FindFirstFile</span></tt>/<tt class="docutils literal"><span class="pre">FindNextFile</span></tt> system calls.  (Contributed by
Ben Hoyt with help from Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue23605">issue 23605</a>.)</p>
<p>Construction of <tt class="docutils literal"><span class="pre">bytes(int)</span></tt> (filled by zero bytes) is faster and uses less
memory for large objects. <tt class="docutils literal"><span class="pre">calloc()</span></tt> is used instead of <tt class="docutils literal"><span class="pre">malloc()</span></tt> to
allocate memory for these objects.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue21233">issue 21233</a>.)</p>
<p>Some operations on <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><tt class="xref py py-mod docutils literal"><span class="pre">ipaddress</span></tt></a> <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv4Network" title="ipaddress.IPv4Network"><tt class="xref py py-class docutils literal"><span class="pre">IPv4Network</span></tt></a> and
<a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Network" title="ipaddress.IPv6Network"><tt class="xref py py-class docutils literal"><span class="pre">IPv6Network</span></tt></a> have been massively sped up, such as
<a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv4Network.subnets" title="ipaddress.IPv4Network.subnets"><tt class="xref py py-meth docutils literal"><span class="pre">subnets()</span></tt></a>, <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv4Network.supernet" title="ipaddress.IPv4Network.supernet"><tt class="xref py py-meth docutils literal"><span class="pre">supernet()</span></tt></a>,
<a class="reference internal" href="../library/ipaddress.html#ipaddress.summarize_address_range" title="ipaddress.summarize_address_range"><tt class="xref py py-func docutils literal"><span class="pre">summarize_address_range()</span></tt></a>, <a class="reference internal" href="../library/ipaddress.html#ipaddress.collapse_addresses" title="ipaddress.collapse_addresses"><tt class="xref py py-func docutils literal"><span class="pre">collapse_addresses()</span></tt></a>.
The speed up can range from 3 to 15 times.
(Contributed by Antoine Pitrou, Michel Albert, and Markus in
<a class="reference external" href="https://bugs.python.org/issue21486">issue 21486</a>, <a class="reference external" href="https://bugs.python.org/issue21487">issue 21487</a>, <a class="reference external" href="https://bugs.python.org/issue20826">issue 20826</a>, <a class="reference external" href="https://bugs.python.org/issue23266">issue 23266</a>.)</p>
<p>Pickling of <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><tt class="xref py py-mod docutils literal"><span class="pre">ipaddress</span></tt></a> objects was optimized to produce significantly
smaller output.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23133">issue 23133</a>.)</p>
<p>Many operations on <a class="reference internal" href="../library/io.html#io.BytesIO" title="io.BytesIO"><tt class="xref py py-class docutils literal"><span class="pre">io.BytesIO</span></tt></a> are now 50% to 100% faster.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue15381">issue 15381</a> and David Wilson in
<a class="reference external" href="https://bugs.python.org/issue22003">issue 22003</a>.)</p>
<p>The <a class="reference internal" href="../library/marshal.html#marshal.dumps" title="marshal.dumps"><tt class="xref py py-func docutils literal"><span class="pre">marshal.dumps()</span></tt></a> function is now faster: 65-85% with versions 3
and 4, 20-25% with versions 0 to 2 on typical data, and up to 5 times in
best cases.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue20416">issue 20416</a> and <a class="reference external" href="https://bugs.python.org/issue23344">issue 23344</a>.)</p>
<p>The UTF-32 encoder is now 3 to 7 times faster.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue15027">issue 15027</a>.)</p>
<p>Regular expressions are now parsed up to 10% faster.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19380">issue 19380</a>.)</p>
<p>The <a class="reference internal" href="../library/json.html#json.dumps" title="json.dumps"><tt class="xref py py-func docutils literal"><span class="pre">json.dumps()</span></tt></a> function was optimized to run with
<tt class="docutils literal"><span class="pre">ensure_ascii=False</span></tt> as fast as with <tt class="docutils literal"><span class="pre">ensure_ascii=True</span></tt>.
(Contributed by Naoki Inada in <a class="reference external" href="https://bugs.python.org/issue23206">issue 23206</a>.)</p>
<p>The <a class="reference internal" href="../c-api/object.html#c.PyObject_IsInstance" title="PyObject_IsInstance"><tt class="xref c c-func docutils literal"><span class="pre">PyObject_IsInstance()</span></tt></a> and <a class="reference internal" href="../c-api/object.html#c.PyObject_IsSubclass" title="PyObject_IsSubclass"><tt class="xref c c-func docutils literal"><span class="pre">PyObject_IsSubclass()</span></tt></a>
functions have been sped up in the common case that the second argument
has <a class="reference internal" href="../library/functions.html#type" title="type"><tt class="xref py py-class docutils literal"><span class="pre">type</span></tt></a> as its metaclass.
(Contributed Georg Brandl by in <a class="reference external" href="https://bugs.python.org/issue22540">issue 22540</a>.)</p>
<p>Method caching was slightly improved, yielding up to 5% performance
improvement in some benchmarks.
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue22847">issue 22847</a>.)</p>
<p>Objects from the <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><tt class="xref py py-mod docutils literal"><span class="pre">random</span></tt></a> module now use 50% less memory on 64-bit
builds.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23488">issue 23488</a>.)</p>
<p>The <a class="reference internal" href="../library/functions.html#property" title="property"><tt class="xref py py-func docutils literal"><span class="pre">property()</span></tt></a> getter calls are up to 25% faster.
(Contributed by Joe Jevnik in <a class="reference external" href="https://bugs.python.org/issue23910">issue 23910</a>.)</p>
<p>Instantiation of <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><tt class="xref py py-class docutils literal"><span class="pre">fractions.Fraction</span></tt></a> is now up to 30% faster.
(Contributed by Stefan Behnel in <a class="reference external" href="https://bugs.python.org/issue22464">issue 22464</a>.)</p>
<p>String methods <a class="reference internal" href="../library/stdtypes.html#str.find" title="str.find"><tt class="xref py py-meth docutils literal"><span class="pre">find()</span></tt></a>, <a class="reference internal" href="../library/stdtypes.html#str.rfind" title="str.rfind"><tt class="xref py py-meth docutils literal"><span class="pre">rfind()</span></tt></a>, <a class="reference internal" href="../library/stdtypes.html#str.split" title="str.split"><tt class="xref py py-meth docutils literal"><span class="pre">split()</span></tt></a>,
<a class="reference internal" href="../library/stdtypes.html#str.partition" title="str.partition"><tt class="xref py py-meth docutils literal"><span class="pre">partition()</span></tt></a> and the <a class="reference internal" href="../reference/expressions.html#in"><tt class="xref std std-keyword docutils literal"><span class="pre">in</span></tt></a> string operator are now significantly
faster for searching 1-character substrings.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23573">issue 23573</a>.)</p>
</div>
<div class="section" id="build-and-c-api-changes">
<h2>Build and C API Changes<a class="headerlink" href="#build-and-c-api-changes" title="Permalink to this headline">¶</a></h2>
<p>New <tt class="docutils literal"><span class="pre">calloc</span></tt> functions were added:</p>
<ul class="simple">
<li><a class="reference internal" href="../c-api/memory.html#c.PyMem_RawCalloc" title="PyMem_RawCalloc"><tt class="xref c c-func docutils literal"><span class="pre">PyMem_RawCalloc()</span></tt></a>,</li>
<li><a class="reference internal" href="../c-api/memory.html#c.PyMem_Calloc" title="PyMem_Calloc"><tt class="xref c c-func docutils literal"><span class="pre">PyMem_Calloc()</span></tt></a>,</li>
<li><tt class="xref c c-func docutils literal"><span class="pre">PyObject_Calloc()</span></tt>,</li>
<li><tt class="xref c c-func docutils literal"><span class="pre">_PyObject_GC_Calloc()</span></tt>.</li>
</ul>
<p>(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue21233">issue 21233</a>.)</p>
<p>New encoding/decoding helper functions:</p>
<ul class="simple">
<li><a class="reference internal" href="../c-api/sys.html#c.Py_DecodeLocale" title="Py_DecodeLocale"><tt class="xref c c-func docutils literal"><span class="pre">Py_DecodeLocale()</span></tt></a> (replaced <tt class="docutils literal"><span class="pre">_Py_char2wchar()</span></tt>),</li>
<li><a class="reference internal" href="../c-api/sys.html#c.Py_EncodeLocale" title="Py_EncodeLocale"><tt class="xref c c-func docutils literal"><span class="pre">Py_EncodeLocale()</span></tt></a> (replaced <tt class="docutils literal"><span class="pre">_Py_wchar2char()</span></tt>).</li>
</ul>
<p>(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue18395">issue 18395</a>.)</p>
<p>A new <a class="reference internal" href="../c-api/codec.html#c.PyCodec_NameReplaceErrors" title="PyCodec_NameReplaceErrors"><tt class="xref c c-func docutils literal"><span class="pre">PyCodec_NameReplaceErrors()</span></tt></a> function to replace the unicode
encode error with <tt class="docutils literal"><span class="pre">\N{...}</span></tt> escapes.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19676">issue 19676</a>.)</p>
<p>A new <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_FormatV" title="PyErr_FormatV"><tt class="xref c c-func docutils literal"><span class="pre">PyErr_FormatV()</span></tt></a> function similar to <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_Format" title="PyErr_Format"><tt class="xref c c-func docutils literal"><span class="pre">PyErr_Format()</span></tt></a>,
but accepts a <tt class="docutils literal"><span class="pre">va_list</span></tt> argument.
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue18711">issue 18711</a>.)</p>
<p>A new <tt class="xref c c-data docutils literal"><span class="pre">PyExc_RecursionError</span></tt> exception.
(Contributed by Georg Brandl in <a class="reference external" href="https://bugs.python.org/issue19235">issue 19235</a>.)</p>
<p>New <a class="reference internal" href="../c-api/module.html#c.PyModule_FromDefAndSpec" title="PyModule_FromDefAndSpec"><tt class="xref c c-func docutils literal"><span class="pre">PyModule_FromDefAndSpec()</span></tt></a>, <a class="reference internal" href="../c-api/module.html#c.PyModule_FromDefAndSpec2" title="PyModule_FromDefAndSpec2"><tt class="xref c c-func docutils literal"><span class="pre">PyModule_FromDefAndSpec2()</span></tt></a>,
and <a class="reference internal" href="../c-api/module.html#c.PyModule_ExecDef" title="PyModule_ExecDef"><tt class="xref c c-func docutils literal"><span class="pre">PyModule_ExecDef()</span></tt></a> functions introduced by <span class="target" id="index-47"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0489"><strong>PEP 489</strong></a> &#8211;
multi-phase extension module initialization.
(Contributed by Petr Viktorin in <a class="reference external" href="https://bugs.python.org/issue24268">issue 24268</a>.)</p>
<p>New <a class="reference internal" href="../c-api/number.html#c.PyNumber_MatrixMultiply" title="PyNumber_MatrixMultiply"><tt class="xref c c-func docutils literal"><span class="pre">PyNumber_MatrixMultiply()</span></tt></a> and
<a class="reference internal" href="../c-api/number.html#c.PyNumber_InPlaceMatrixMultiply" title="PyNumber_InPlaceMatrixMultiply"><tt class="xref c c-func docutils literal"><span class="pre">PyNumber_InPlaceMatrixMultiply()</span></tt></a> functions to perform matrix
multiplication.
(Contributed by Benjamin Peterson in <a class="reference external" href="https://bugs.python.org/issue21176">issue 21176</a>.  See also <span class="target" id="index-48"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0465"><strong>PEP 465</strong></a>
for details.)</p>
<p>The <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_finalize" title="PyTypeObject.tp_finalize"><tt class="xref c c-member docutils literal"><span class="pre">PyTypeObject.tp_finalize</span></tt></a> slot is now part of the stable ABI.</p>
<p>Windows builds now require Microsoft Visual C++ 14.0, which
is available as part of <a class="reference external" href="http://www.visualstudio.com">Visual Studio 2015</a>.</p>
<p>Extension modules now include a platform information tag in their filename on
some platforms (the tag is optional, and CPython will import extensions without
it, although if the tag is present and mismatched, the extension won&#8217;t be
loaded):</p>
<ul class="simple">
<li>On Linux, extension module filenames end with
<tt class="docutils literal"><span class="pre">.cpython-&lt;major&gt;&lt;minor&gt;m-&lt;architecture&gt;-&lt;os&gt;.pyd</span></tt>:<ul>
<li><tt class="docutils literal"><span class="pre">&lt;major&gt;</span></tt> is the major number of the Python version;
for Python 3.5 this is <tt class="docutils literal"><span class="pre">3</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">&lt;minor&gt;</span></tt> is the minor number of the Python version;
for Python 3.5 this is <tt class="docutils literal"><span class="pre">5</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">&lt;architecture&gt;</span></tt> is the hardware architecture the extension module
was built to run on. It&#8217;s most commonly either <tt class="docutils literal"><span class="pre">i386</span></tt> for 32-bit Intel
platforms or <tt class="docutils literal"><span class="pre">x86_64</span></tt> for 64-bit Intel (and AMD) platforms.</li>
<li><tt class="docutils literal"><span class="pre">&lt;os&gt;</span></tt> is always <tt class="docutils literal"><span class="pre">linux-gnu</span></tt>, except for extensions built to
talk to the 32-bit ABI on 64-bit platforms, in which case it is
<tt class="docutils literal"><span class="pre">linux-gnu32</span></tt> (and <tt class="docutils literal"><span class="pre">&lt;architecture&gt;</span></tt> will be <tt class="docutils literal"><span class="pre">x86_64</span></tt>).</li>
</ul>
</li>
<li>On Windows, extension module filenames end with
<tt class="docutils literal"><span class="pre">&lt;debug&gt;.cp&lt;major&gt;&lt;minor&gt;-&lt;platform&gt;.pyd</span></tt>:<ul>
<li><tt class="docutils literal"><span class="pre">&lt;major&gt;</span></tt> is the major number of the Python version;
for Python 3.5 this is <tt class="docutils literal"><span class="pre">3</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">&lt;minor&gt;</span></tt> is the minor number of the Python version;
for Python 3.5 this is <tt class="docutils literal"><span class="pre">5</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">&lt;platform&gt;</span></tt> is the platform the extension module was built for,
either <tt class="docutils literal"><span class="pre">win32</span></tt> for Win32, <tt class="docutils literal"><span class="pre">win_amd64</span></tt> for Win64, <tt class="docutils literal"><span class="pre">win_ia64</span></tt> for
Windows Itanium 64, and <tt class="docutils literal"><span class="pre">win_arm</span></tt> for Windows on ARM.</li>
<li>If built in debug mode, <tt class="docutils literal"><span class="pre">&lt;debug&gt;</span></tt> will be <tt class="docutils literal"><span class="pre">_d</span></tt>,
otherwise it will be blank.</li>
</ul>
</li>
<li>On OS X platforms, extension module filenames now end with <tt class="docutils literal"><span class="pre">-darwin.so</span></tt>.</li>
<li>On all other platforms, extension module filenames are the same as they were
with Python 3.4.</li>
</ul>
</div>
<div class="section" id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-keywords">
<h3>New Keywords<a class="headerlink" href="#new-keywords" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">async</span></tt> and <tt class="docutils literal"><span class="pre">await</span></tt> are not recommended to be used as variable, class,
function or module names.  Introduced by <span class="target" id="index-49"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0492"><strong>PEP 492</strong></a> in Python 3.5, they will
become proper keywords in Python 3.7.</p>
</div>
<div class="section" id="deprecated-python-behavior">
<h3>Deprecated Python Behavior<a class="headerlink" href="#deprecated-python-behavior" title="Permalink to this headline">¶</a></h3>
<p>Raising the <a class="reference internal" href="../library/exceptions.html#StopIteration" title="StopIteration"><tt class="xref py py-exc docutils literal"><span class="pre">StopIteration</span></tt></a> exception inside a generator will now generate a silent
<a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><tt class="xref py py-exc docutils literal"><span class="pre">PendingDeprecationWarning</span></tt></a>, which will become a non-silent deprecation
warning in Python 3.6 and will trigger a <a class="reference internal" href="../library/exceptions.html#RuntimeError" title="RuntimeError"><tt class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></tt></a> in Python 3.7.
See <a class="reference internal" href="#whatsnew-pep-479"><em>PEP 479: Change StopIteration handling inside generators</em></a>
for details.</p>
</div>
<div class="section" id="unsupported-operating-systems">
<h3>Unsupported Operating Systems<a class="headerlink" href="#unsupported-operating-systems" title="Permalink to this headline">¶</a></h3>
<p>Windows XP is no longer supported by Microsoft, thus, per <span class="target" id="index-50"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0011"><strong>PEP 11</strong></a>, CPython
3.5 is no longer officially supported on this OS.</p>
</div>
<div class="section" id="deprecated-python-modules-functions-and-methods">
<h3>Deprecated Python modules, functions and methods<a class="headerlink" href="#deprecated-python-modules-functions-and-methods" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../library/formatter.html#module-formatter" title="formatter: Generic output formatter and device interface. (deprecated)"><tt class="xref py py-mod docutils literal"><span class="pre">formatter</span></tt></a> module has now graduated to full deprecation and is still
slated for removal in Python 3.6.</p>
<p>The <a class="reference internal" href="../library/asyncio-task.html#asyncio.async" title="asyncio.async"><tt class="xref py py-func docutils literal"><span class="pre">asyncio.async()</span></tt></a> function is deprecated in favor of
<a class="reference internal" href="../library/asyncio-task.html#asyncio.ensure_future" title="asyncio.ensure_future"><tt class="xref py py-func docutils literal"><span class="pre">ensure_future()</span></tt></a>.</p>
<p>The <a class="reference internal" href="../library/smtpd.html#module-smtpd" title="smtpd: A SMTP server implementation in Python."><tt class="xref py py-mod docutils literal"><span class="pre">smtpd</span></tt></a> module has in the past always decoded the DATA portion of
email messages using the <tt class="docutils literal"><span class="pre">utf-8</span></tt> codec.  This can now be controlled by the
new <em>decode_data</em> keyword to <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer" title="smtpd.SMTPServer"><tt class="xref py py-class docutils literal"><span class="pre">SMTPServer</span></tt></a>.  The default value is
<tt class="docutils literal"><span class="pre">True</span></tt>, but this default is deprecated.  Specify the <em>decode_data</em> keyword
with an appropriate value to avoid the deprecation warning.</p>
<p>Directly assigning values to the <a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.key" title="http.cookies.Morsel.key"><tt class="xref py py-attr docutils literal"><span class="pre">key</span></tt></a>,
<a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.value" title="http.cookies.Morsel.value"><tt class="xref py py-attr docutils literal"><span class="pre">value</span></tt></a> and
<a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.coded_value" title="http.cookies.Morsel.coded_value"><tt class="xref py py-attr docutils literal"><span class="pre">coded_value</span></tt></a> of <a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel" title="http.cookies.Morsel"><tt class="xref py py-class docutils literal"><span class="pre">http.cookies.Morsel</span></tt></a>
objects is deprecated.  Use the <a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.set" title="http.cookies.Morsel.set"><tt class="xref py py-meth docutils literal"><span class="pre">set()</span></tt></a> method
instead.  In addition, the undocumented <em>LegalChars</em> parameter of
<a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.set" title="http.cookies.Morsel.set"><tt class="xref py py-meth docutils literal"><span class="pre">set()</span></tt></a> is deprecated, and is now ignored.</p>
<p>Passing a format string as keyword argument <em>format_string</em> to the
<a class="reference internal" href="../library/string.html#string.Formatter.format" title="string.Formatter.format"><tt class="xref py py-meth docutils literal"><span class="pre">format()</span></tt></a> method of the <a class="reference internal" href="../library/string.html#string.Formatter" title="string.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">string.Formatter</span></tt></a>
class has been deprecated.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23671">issue 23671</a>.)</p>
<p>The <a class="reference internal" href="../library/platform.html#platform.dist" title="platform.dist"><tt class="xref py py-func docutils literal"><span class="pre">platform.dist()</span></tt></a> and <a class="reference internal" href="../library/platform.html#platform.linux_distribution" title="platform.linux_distribution"><tt class="xref py py-func docutils literal"><span class="pre">platform.linux_distribution()</span></tt></a> functions
are now deprecated and will be removed in Python 3.7.  Linux distributions use
too many different ways of describing themselves, so the functionality is
left to a package.
(Contributed by Vajrasky Kok and Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue1322">issue 1322</a>.)</p>
<p>The previously undocumented <tt class="docutils literal"><span class="pre">from_function</span></tt> and <tt class="docutils literal"><span class="pre">from_builtin</span></tt> methods of
<a class="reference internal" href="../library/inspect.html#inspect.Signature" title="inspect.Signature"><tt class="xref py py-class docutils literal"><span class="pre">inspect.Signature</span></tt></a> are deprecated.  Use the new
<a class="reference internal" href="../library/inspect.html#inspect.Signature.from_callable" title="inspect.Signature.from_callable"><tt class="xref py py-meth docutils literal"><span class="pre">Signature.from_callable()</span></tt></a>
method instead. (Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue24248">issue 24248</a>.)</p>
<p>The <a class="reference internal" href="../library/inspect.html#inspect.getargspec" title="inspect.getargspec"><tt class="xref py py-func docutils literal"><span class="pre">inspect.getargspec()</span></tt></a> function is deprecated and scheduled to be
removed in Python 3.6.  (See <a class="reference external" href="https://bugs.python.org/issue20438">issue 20438</a> for details.)</p>
<p>The <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><tt class="xref py py-mod docutils literal"><span class="pre">inspect</span></tt></a> <a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><tt class="xref py py-func docutils literal"><span class="pre">getfullargspec()</span></tt></a>,
<a class="reference internal" href="../library/inspect.html#inspect.getargvalues" title="inspect.getargvalues"><tt class="xref py py-func docutils literal"><span class="pre">getargvalues()</span></tt></a>, <a class="reference internal" href="../library/inspect.html#inspect.getcallargs" title="inspect.getcallargs"><tt class="xref py py-func docutils literal"><span class="pre">getcallargs()</span></tt></a>,
<a class="reference internal" href="../library/inspect.html#inspect.getargvalues" title="inspect.getargvalues"><tt class="xref py py-func docutils literal"><span class="pre">getargvalues()</span></tt></a>, <a class="reference internal" href="../library/inspect.html#inspect.formatargspec" title="inspect.formatargspec"><tt class="xref py py-func docutils literal"><span class="pre">formatargspec()</span></tt></a>, and
<a class="reference internal" href="../library/inspect.html#inspect.formatargvalues" title="inspect.formatargvalues"><tt class="xref py py-func docutils literal"><span class="pre">formatargvalues()</span></tt></a> functions are deprecated in favor of
the <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><tt class="xref py py-func docutils literal"><span class="pre">inspect.signature()</span></tt></a> API.
(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue20438">issue 20438</a>.)</p>
<p>Use of <a class="reference internal" href="../library/re.html#re.LOCALE" title="re.LOCALE"><tt class="xref py py-const docutils literal"><span class="pre">re.LOCALE</span></tt></a> flag with str patterns or <a class="reference internal" href="../library/re.html#re.ASCII" title="re.ASCII"><tt class="xref py py-const docutils literal"><span class="pre">re.ASCII</span></tt></a> is now
deprecated.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue22407">issue 22407</a>.)</p>
<p>Use of unrecognized special sequences consisting of <tt class="docutils literal"><span class="pre">'\'</span></tt> and an ASCII letter
in regular expression patterns and replacement patterns now raises a
deprecation warning and will be forbidden in Python 3.6.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue23622">issue 23622</a>.)</p>
<p>The undocumented and unofficial <em>use_load_tests</em> default argument of the
<a class="reference internal" href="../library/unittest.html#unittest.TestLoader.loadTestsFromModule" title="unittest.TestLoader.loadTestsFromModule"><tt class="xref py py-meth docutils literal"><span class="pre">unittest.TestLoader.loadTestsFromModule()</span></tt></a> method now is
deprecated and ignored.
(Contributed by Robert Collins and Barry A. Warsaw in <a class="reference external" href="https://bugs.python.org/issue16662">issue 16662</a>.)</p>
</div>
</div>
<div class="section" id="removed">
<h2>Removed<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h2>
<div class="section" id="api-and-feature-removals">
<h3>API and Feature Removals<a class="headerlink" href="#api-and-feature-removals" title="Permalink to this headline">¶</a></h3>
<p>The following obsolete and previously deprecated APIs and features have been
removed:</p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">__version__</span></tt> attribute has been dropped from the email package.  The
email code hasn&#8217;t been shipped separately from the stdlib for a long time,
and the <tt class="docutils literal"><span class="pre">__version__</span></tt> string was not updated in the last few releases.</li>
<li>The internal <tt class="docutils literal"><span class="pre">Netrc</span></tt> class in the <a class="reference internal" href="../library/ftplib.html#module-ftplib" title="ftplib: FTP protocol client (requires sockets)."><tt class="xref py py-mod docutils literal"><span class="pre">ftplib</span></tt></a> module was deprecated in
3.4, and has now been removed.
(Contributed by Matt Chaput in <a class="reference external" href="https://bugs.python.org/issue6623">issue 6623</a>.)</li>
<li>The concept of <tt class="docutils literal"><span class="pre">.pyo</span></tt> files has been removed.</li>
<li>The JoinableQueue class in the provisional <a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O, event loop, coroutines and tasks."><tt class="xref py py-mod docutils literal"><span class="pre">asyncio</span></tt></a> module was
deprecated in 3.4.4 and is now removed.
(Contributed by A. Jesse Jiryu Davis in <a class="reference external" href="https://bugs.python.org/issue23464">issue 23464</a>.)</li>
</ul>
</div>
</div>
<div class="section" id="porting-to-python-3-5">
<h2>Porting to Python 3.5<a class="headerlink" href="#porting-to-python-3-5" title="Permalink to this headline">¶</a></h2>
<p>This section lists previously described changes and other bugfixes
that may require changes to your code.</p>
<div class="section" id="changes-in-python-behavior">
<h3>Changes in Python behavior<a class="headerlink" href="#changes-in-python-behavior" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Due to an oversight, earlier Python versions erroneously accepted the
following syntax:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">f</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="n">f</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Python 3.5 now correctly raises a <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><tt class="xref py py-exc docutils literal"><span class="pre">SyntaxError</span></tt></a>, as generator
expressions must be put in parentheses if not a sole argument to a function.</p>
</li>
</ul>
</div>
<div class="section" id="changes-in-the-python-api">
<h3>Changes in the Python API<a class="headerlink" href="#changes-in-the-python-api" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><span class="target" id="index-51"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0475"><strong>PEP 475</strong></a>: System calls are now retried when interrupted by a signal instead
of raising <a class="reference internal" href="../library/exceptions.html#InterruptedError" title="InterruptedError"><tt class="xref py py-exc docutils literal"><span class="pre">InterruptedError</span></tt></a> if the Python signal handler does not
raise an exception.</li>
<li>Before Python 3.5, a <a class="reference internal" href="../library/datetime.html#datetime.time" title="datetime.time"><tt class="xref py py-class docutils literal"><span class="pre">datetime.time</span></tt></a> object was considered to be false
if it represented midnight in UTC.  This behavior was considered obscure and
error-prone and has been removed in Python 3.5.  See <a class="reference external" href="https://bugs.python.org/issue13936">issue 13936</a> for full
details.</li>
<li>The <tt class="xref py py-meth docutils literal"><span class="pre">ssl.SSLSocket.send()</span></tt> method now raises either
<a class="reference internal" href="../library/ssl.html#ssl.SSLWantReadError" title="ssl.SSLWantReadError"><tt class="xref py py-exc docutils literal"><span class="pre">ssl.SSLWantReadError</span></tt></a> or <a class="reference internal" href="../library/ssl.html#ssl.SSLWantWriteError" title="ssl.SSLWantWriteError"><tt class="xref py py-exc docutils literal"><span class="pre">ssl.SSLWantWriteError</span></tt></a>
on a non-blocking socket if the operation would block.  Previously,
it would return <tt class="docutils literal"><span class="pre">0</span></tt>.  (Contributed by Nikolaus Rath in <a class="reference external" href="https://bugs.python.org/issue20951">issue 20951</a>.)</li>
<li>The <tt class="docutils literal"><span class="pre">__name__</span></tt> attribute of generators is now set from the function name,
instead of being set from the code name. Use <tt class="docutils literal"><span class="pre">gen.gi_code.co_name</span></tt> to
retrieve the code name. Generators also have a new <tt class="docutils literal"><span class="pre">__qualname__</span></tt>
attribute, the qualified name, which is now used for the representation
of a generator (<tt class="docutils literal"><span class="pre">repr(gen)</span></tt>).
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue21205">issue 21205</a>.)</li>
<li>The deprecated &#8220;strict&#8221; mode and argument of <a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><tt class="xref py py-class docutils literal"><span class="pre">HTMLParser</span></tt></a>,
<tt class="xref py py-meth docutils literal"><span class="pre">HTMLParser.error()</span></tt>, and the <tt class="xref py py-exc docutils literal"><span class="pre">HTMLParserError</span></tt> exception have been
removed.  (Contributed by Ezio Melotti in <a class="reference external" href="https://bugs.python.org/issue15114">issue 15114</a>.)
The <em>convert_charrefs</em> argument of <a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><tt class="xref py py-class docutils literal"><span class="pre">HTMLParser</span></tt></a> is
now <tt class="docutils literal"><span class="pre">True</span></tt> by default.  (Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue21047">issue 21047</a>.)</li>
<li>Although it is not formally part of the API, it is worth noting for porting
purposes (ie: fixing tests) that error messages that were previously of the
form &#8220;&#8216;sometype&#8217; does not support the buffer protocol&#8221; are now of the form &#8220;a
<a class="reference internal" href="../glossary.html#term-bytes-like-object"><em class="xref std std-term">bytes-like object</em></a> is required, not &#8216;sometype&#8217;&#8221;.
(Contributed by Ezio Melotti in <a class="reference external" href="https://bugs.python.org/issue16518">issue 16518</a>.)</li>
<li>If the current directory is set to a directory that no longer exists then
<a class="reference internal" href="../library/exceptions.html#FileNotFoundError" title="FileNotFoundError"><tt class="xref py py-exc docutils literal"><span class="pre">FileNotFoundError</span></tt></a> will no longer be raised and instead
<a class="reference internal" href="../library/importlib.html#importlib.machinery.FileFinder.find_spec" title="importlib.machinery.FileFinder.find_spec"><tt class="xref py py-meth docutils literal"><span class="pre">find_spec()</span></tt></a> will return <tt class="docutils literal"><span class="pre">None</span></tt>
<strong>without</strong> caching <tt class="docutils literal"><span class="pre">None</span></tt> in <a class="reference internal" href="../library/sys.html#sys.path_importer_cache" title="sys.path_importer_cache"><tt class="xref py py-data docutils literal"><span class="pre">sys.path_importer_cache</span></tt></a>, which is
different than the typical case (<a class="reference external" href="https://bugs.python.org/issue22834">issue 22834</a>).</li>
<li>HTTP status code and messages from <a class="reference internal" href="../library/http.client.html#module-http.client" title="http.client: HTTP and HTTPS protocol client (requires sockets)."><tt class="xref py py-mod docutils literal"><span class="pre">http.client</span></tt></a> and <a class="reference internal" href="../library/http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><tt class="xref py py-mod docutils literal"><span class="pre">http.server</span></tt></a>
were refactored into a common <a class="reference internal" href="../library/http.html#http.HTTPStatus" title="http.HTTPStatus"><tt class="xref py py-class docutils literal"><span class="pre">HTTPStatus</span></tt></a> enum.  The values in
<a class="reference internal" href="../library/http.client.html#module-http.client" title="http.client: HTTP and HTTPS protocol client (requires sockets)."><tt class="xref py py-mod docutils literal"><span class="pre">http.client</span></tt></a> and <a class="reference internal" href="../library/http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><tt class="xref py py-mod docutils literal"><span class="pre">http.server</span></tt></a> remain available for backwards
compatibility.  (Contributed by Demian Brecht in <a class="reference external" href="https://bugs.python.org/issue21793">issue 21793</a>.)</li>
<li>When an import loader defines <tt class="xref py py-meth docutils literal"><span class="pre">importlib.machinery.Loader.exec_module()</span></tt>
it is now expected to also define
<tt class="xref py py-meth docutils literal"><span class="pre">create_module()</span></tt> (raises a
<a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><tt class="xref py py-exc docutils literal"><span class="pre">DeprecationWarning</span></tt></a> now, will be an error in Python 3.6). If the loader
inherits from <a class="reference internal" href="../library/importlib.html#importlib.abc.Loader" title="importlib.abc.Loader"><tt class="xref py py-class docutils literal"><span class="pre">importlib.abc.Loader</span></tt></a> then there is nothing to do, else
simply define <tt class="xref py py-meth docutils literal"><span class="pre">create_module()</span></tt> to return
<tt class="docutils literal"><span class="pre">None</span></tt>.  (Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue23014">issue 23014</a>.)</li>
<li>The <a class="reference internal" href="../library/re.html#re.split" title="re.split"><tt class="xref py py-func docutils literal"><span class="pre">re.split()</span></tt></a> function always ignored empty pattern matches, so the
<tt class="docutils literal"><span class="pre">&quot;x*&quot;</span></tt> pattern worked the same as <tt class="docutils literal"><span class="pre">&quot;x+&quot;</span></tt>, and the <tt class="docutils literal"><span class="pre">&quot;\b&quot;</span></tt> pattern never
worked.  Now <a class="reference internal" href="../library/re.html#re.split" title="re.split"><tt class="xref py py-func docutils literal"><span class="pre">re.split()</span></tt></a> raises a warning if the pattern could match
an empty string.  For compatibility, use patterns that never match an empty
string (e.g. <tt class="docutils literal"><span class="pre">&quot;x+&quot;</span></tt> instead of <tt class="docutils literal"><span class="pre">&quot;x*&quot;</span></tt>).  Patterns that could only match
an empty string (such as <tt class="docutils literal"><span class="pre">&quot;\b&quot;</span></tt>) now raise an error.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue22818">issue 22818</a>.)</li>
<li>The <a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel" title="http.cookies.Morsel"><tt class="xref py py-class docutils literal"><span class="pre">http.cookies.Morsel</span></tt></a> dict-like interface has been made self
consistent:  morsel comparison now takes the <a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.key" title="http.cookies.Morsel.key"><tt class="xref py py-attr docutils literal"><span class="pre">key</span></tt></a>
and <a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.value" title="http.cookies.Morsel.value"><tt class="xref py py-attr docutils literal"><span class="pre">value</span></tt></a> into account,
<a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.copy" title="http.cookies.Morsel.copy"><tt class="xref py py-meth docutils literal"><span class="pre">copy()</span></tt></a> now results in a
<a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel" title="http.cookies.Morsel"><tt class="xref py py-class docutils literal"><span class="pre">Morsel</span></tt></a> instance rather than a <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a>, and
<a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.update" title="http.cookies.Morsel.update"><tt class="xref py py-meth docutils literal"><span class="pre">update()</span></tt></a> will now raise an exception if any of the
keys in the update dictionary are invalid.  In addition, the undocumented
<em>LegalChars</em> parameter of <a class="reference internal" href="../library/http.cookies.html#http.cookies.Morsel.set" title="http.cookies.Morsel.set"><tt class="xref py py-func docutils literal"><span class="pre">set()</span></tt></a> is deprecated and
is now ignored.  (Contributed by Demian Brecht in <a class="reference external" href="https://bugs.python.org/issue2211">issue 2211</a>.)</li>
<li><span class="target" id="index-52"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0488"><strong>PEP 488</strong></a> has removed <tt class="docutils literal"><span class="pre">.pyo</span></tt> files from Python and introduced the optional
<tt class="docutils literal"><span class="pre">opt-</span></tt> tag in <tt class="docutils literal"><span class="pre">.pyc</span></tt> file names. The
<a class="reference internal" href="../library/importlib.html#importlib.util.cache_from_source" title="importlib.util.cache_from_source"><tt class="xref py py-func docutils literal"><span class="pre">importlib.util.cache_from_source()</span></tt></a> has gained an <em>optimization</em>
parameter to help control the <tt class="docutils literal"><span class="pre">opt-</span></tt> tag. Because of this, the
<em>debug_override</em> parameter of the function is now deprecated. <cite>.pyo</cite> files
are also no longer supported as a file argument to the Python interpreter and
thus serve no purpose when distributed on their own (i.e. sourcless code
distribution). Due to the fact that the magic number for bytecode has changed
in Python 3.5, all old <cite>.pyo</cite> files from previous versions of Python are
invalid regardless of this PEP.</li>
<li>The <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><tt class="xref py py-mod docutils literal"><span class="pre">socket</span></tt></a> module now exports the <a class="reference internal" href="../library/socket.html#socket.CAN_RAW_FD_FRAMES" title="socket.CAN_RAW_FD_FRAMES"><tt class="xref py py-data docutils literal"><span class="pre">CAN_RAW_FD_FRAMES</span></tt></a>
constant on linux 3.6 and greater.</li>
<li>The <a class="reference internal" href="../library/ssl.html#ssl.cert_time_to_seconds" title="ssl.cert_time_to_seconds"><tt class="xref py py-func docutils literal"><span class="pre">ssl.cert_time_to_seconds()</span></tt></a> function now interprets the input time
as UTC and not as local time, per <span class="target" id="index-53"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc5280.html"><strong>RFC 5280</strong></a>.  Additionally, the return
value is always an <a class="reference internal" href="../library/functions.html#int" title="int"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>. (Contributed by Akira Li in <a class="reference external" href="https://bugs.python.org/issue19940">issue 19940</a>.)</li>
<li>The <tt class="docutils literal"><span class="pre">pygettext.py</span></tt> Tool now uses the standard +NNNN format for timezones in
the POT-Creation-Date header.</li>
<li>The <a class="reference internal" href="../library/smtplib.html#module-smtplib" title="smtplib: SMTP protocol client (requires sockets)."><tt class="xref py py-mod docutils literal"><span class="pre">smtplib</span></tt></a> module now uses <a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><tt class="xref py py-data docutils literal"><span class="pre">sys.stderr</span></tt></a> instead of the previous
module-level <tt class="xref py py-data docutils literal"><span class="pre">stderr</span></tt> variable for debug output.  If your (test)
program depends on patching the module-level variable to capture the debug
output, you will need to update it to capture sys.stderr instead.</li>
<li>The <a class="reference internal" href="../library/stdtypes.html#str.startswith" title="str.startswith"><tt class="xref py py-meth docutils literal"><span class="pre">str.startswith()</span></tt></a> and <a class="reference internal" href="../library/stdtypes.html#str.endswith" title="str.endswith"><tt class="xref py py-meth docutils literal"><span class="pre">str.endswith()</span></tt></a> methods no longer return
<tt class="docutils literal"><span class="pre">True</span></tt> when finding the empty string and the indexes are completely out of
range.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue24284">issue 24284</a>.)</li>
<li>The <a class="reference internal" href="../library/inspect.html#inspect.getdoc" title="inspect.getdoc"><tt class="xref py py-func docutils literal"><span class="pre">inspect.getdoc()</span></tt></a> function now returns documentation strings
inherited from base classes.  Documentation strings no longer need to be
duplicated if the inherited documentation is appropriate.  To suppress an
inherited string, an empty string must be specified (or the documentation
may be filled in).  This change affects the output of the <a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><tt class="xref py py-mod docutils literal"><span class="pre">pydoc</span></tt></a>
module and the <a class="reference internal" href="../library/functions.html#help" title="help"><tt class="xref py py-func docutils literal"><span class="pre">help()</span></tt></a> function.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue15582">issue 15582</a>.)</li>
<li>Nested <a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a> calls are now flattened.  If you were
relying on the previous behavior, you can now either add an attribute to a
<a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a> object or you can create a subclass of
<a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a>.
(Contributed by Alexander Belopolsky in <a class="reference external" href="https://bugs.python.org/issue7830">issue 7830</a>.)</li>
</ul>
</div>
<div class="section" id="changes-in-the-c-api">
<h3>Changes in the C API<a class="headerlink" href="#changes-in-the-c-api" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The undocumented <tt class="xref c c-member docutils literal"><span class="pre">format</span></tt> member of the
(non-public) <tt class="xref c c-type docutils literal"><span class="pre">PyMemoryViewObject</span></tt> structure has been removed.
All extensions relying on the relevant parts in <tt class="docutils literal"><span class="pre">memoryobject.h</span></tt>
must be rebuilt.</li>
<li>The <tt class="xref c c-type docutils literal"><span class="pre">PyMemAllocator</span></tt> structure was renamed to
<a class="reference internal" href="../c-api/memory.html#c.PyMemAllocatorEx" title="PyMemAllocatorEx"><tt class="xref c c-type docutils literal"><span class="pre">PyMemAllocatorEx</span></tt></a> and a new <tt class="docutils literal"><span class="pre">calloc</span></tt> field was added.</li>
<li>Removed non-documented macro <tt class="xref c c-macro docutils literal"><span class="pre">PyObject_REPR</span></tt> which leaked references.
Use format character <tt class="docutils literal"><span class="pre">%R</span></tt> in <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_FromFormat" title="PyUnicode_FromFormat"><tt class="xref c c-func docutils literal"><span class="pre">PyUnicode_FromFormat()</span></tt></a>-like functions
to format the <a class="reference internal" href="../library/functions.html#repr" title="repr"><tt class="xref py py-func docutils literal"><span class="pre">repr()</span></tt></a> of the object.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue22453">issue 22453</a>.)</li>
<li>Because the lack of the <tt class="xref py py-attr docutils literal"><span class="pre">__module__</span></tt> attribute breaks pickling and
introspection, a deprecation warning is now raised for builtin types without
the <tt class="xref py py-attr docutils literal"><span class="pre">__module__</span></tt> attribute.  This would be an AttributeError in
the future.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue20204">issue 20204</a>.)</li>
<li>As part of the <span class="target" id="index-54"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0492"><strong>PEP 492</strong></a> implementation, the <tt class="docutils literal"><span class="pre">tp_reserved</span></tt> slot of
<a class="reference internal" href="../c-api/type.html#c.PyTypeObject" title="PyTypeObject"><tt class="xref c c-type docutils literal"><span class="pre">PyTypeObject</span></tt></a> was replaced with a
<a class="reference internal" href="../c-api/typeobj.html#c.tp_as_async" title="tp_as_async"><tt class="xref c c-member docutils literal"><span class="pre">tp_as_async</span></tt></a> slot.  Refer to <a class="reference internal" href="../c-api/coro.html#coro-objects"><em>Coroutine Objects</em></a> for
new types, structures and functions.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What&#8217;s New In Python 3.5</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Summary &#8211; Release highlights</a></li>
<li><a class="reference internal" href="#new-features">New Features</a><ul>
<li><a class="reference internal" href="#pep-492-coroutines-with-async-and-await-syntax">PEP 492 - Coroutines with async and await syntax</a></li>
<li><a class="reference internal" href="#pep-465-a-dedicated-infix-operator-for-matrix-multiplication">PEP 465 - A dedicated infix operator for matrix multiplication</a></li>
<li><a class="reference internal" href="#pep-448-additional-unpacking-generalizations">PEP 448 - Additional Unpacking Generalizations</a></li>
<li><a class="reference internal" href="#pep-461-formatting-support-for-bytes-and-bytearray">PEP 461 - % formatting support for bytes and bytearray</a></li>
<li><a class="reference internal" href="#pep-484-type-hints">PEP 484 - Type Hints</a></li>
<li><a class="reference internal" href="#pep-471-os-scandir-function-a-better-and-faster-directory-iterator">PEP 471 - os.scandir() function &#8211; a better and faster directory iterator</a></li>
<li><a class="reference internal" href="#pep-475-retry-system-calls-failing-with-eintr">PEP 475: Retry system calls failing with EINTR</a></li>
<li><a class="reference internal" href="#pep-479-change-stopiteration-handling-inside-generators">PEP 479: Change StopIteration handling inside generators</a></li>
<li><a class="reference internal" href="#pep-485-a-function-for-testing-approximate-equality">PEP 485: A function for testing approximate equality</a></li>
<li><a class="reference internal" href="#pep-486-make-the-python-launcher-aware-of-virtual-environments">PEP 486: Make the Python Launcher aware of virtual environments</a></li>
<li><a class="reference internal" href="#pep-488-elimination-of-pyo-files">PEP 488: Elimination of PYO files</a></li>
<li><a class="reference internal" href="#pep-489-multi-phase-extension-module-initialization">PEP 489: Multi-phase extension module initialization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Other Language Changes</a></li>
<li><a class="reference internal" href="#new-modules">New Modules</a><ul>
<li><a class="reference internal" href="#typing">typing</a></li>
<li><a class="reference internal" href="#zipapp">zipapp</a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">Improved Modules</a><ul>
<li><a class="reference internal" href="#argparse">argparse</a></li>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#bz2">bz2</a></li>
<li><a class="reference internal" href="#cgi">cgi</a></li>
<li><a class="reference internal" href="#cmath">cmath</a></li>
<li><a class="reference internal" href="#code">code</a></li>
<li><a class="reference internal" href="#collections">collections</a></li>
<li><a class="reference internal" href="#collections-abc">collections.abc</a></li>
<li><a class="reference internal" href="#compileall">compileall</a></li>
<li><a class="reference internal" href="#concurrent-futures">concurrent.futures</a></li>
<li><a class="reference internal" href="#configparser">configparser</a></li>
<li><a class="reference internal" href="#contextlib">contextlib</a></li>
<li><a class="reference internal" href="#csv">csv</a></li>
<li><a class="reference internal" href="#curses">curses</a></li>
<li><a class="reference internal" href="#dbm">dbm</a></li>
<li><a class="reference internal" href="#difflib">difflib</a></li>
<li><a class="reference internal" href="#distutils">distutils</a></li>
<li><a class="reference internal" href="#doctest">doctest</a></li>
<li><a class="reference internal" href="#email">email</a></li>
<li><a class="reference internal" href="#enum">enum</a></li>
<li><a class="reference internal" href="#faulthandler">faulthandler</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#glob">glob</a></li>
<li><a class="reference internal" href="#gzip">gzip</a></li>
<li><a class="reference internal" href="#heapq">heapq</a></li>
<li><a class="reference internal" href="#http">http</a></li>
<li><a class="reference internal" href="#http-client">http.client</a></li>
<li><a class="reference internal" href="#idlelib-and-idle">idlelib and IDLE</a></li>
<li><a class="reference internal" href="#imaplib">imaplib</a></li>
<li><a class="reference internal" href="#imghdr">imghdr</a></li>
<li><a class="reference internal" href="#importlib">importlib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#io">io</a></li>
<li><a class="reference internal" href="#ipaddress">ipaddress</a></li>
<li><a class="reference internal" href="#json">json</a></li>
<li><a class="reference internal" href="#linecache">linecache</a></li>
<li><a class="reference internal" href="#locale">locale</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#lzma">lzma</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocessing</a></li>
<li><a class="reference internal" href="#operator">operator</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#pickle">pickle</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#re">re</a></li>
<li><a class="reference internal" href="#readline">readline</a></li>
<li><a class="reference internal" href="#selectors">selectors</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#signal">signal</a></li>
<li><a class="reference internal" href="#smtpd">smtpd</a></li>
<li><a class="reference internal" href="#smtplib">smtplib</a></li>
<li><a class="reference internal" href="#sndhdr">sndhdr</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#ssl">ssl</a><ul>
<li><a class="reference internal" href="#memory-bio-support">Memory BIO Support</a></li>
<li><a class="reference internal" href="#application-layer-protocol-negotiation-support">Application-Layer Protocol Negotiation Support</a></li>
<li><a class="reference internal" href="#other-changes">Other Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlite3">sqlite3</a></li>
<li><a class="reference internal" href="#subprocess">subprocess</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#sysconfig">sysconfig</a></li>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#timeit">timeit</a></li>
<li><a class="reference internal" href="#tkinter">tkinter</a></li>
<li><a class="reference internal" href="#traceback">traceback</a></li>
<li><a class="reference internal" href="#types">types</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#unittest-mock">unittest.mock</a></li>
<li><a class="reference internal" href="#urllib">urllib</a></li>
<li><a class="reference internal" href="#wsgiref">wsgiref</a></li>
<li><a class="reference internal" href="#xmlrpc">xmlrpc</a></li>
<li><a class="reference internal" href="#xml-sax">xml.sax</a></li>
<li><a class="reference internal" href="#zipfile">zipfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-module-level-changes">Other module-level changes</a></li>
<li><a class="reference internal" href="#optimizations">Optimizations</a></li>
<li><a class="reference internal" href="#build-and-c-api-changes">Build and C API Changes</a></li>
<li><a class="reference internal" href="#deprecated">Deprecated</a><ul>
<li><a class="reference internal" href="#new-keywords">New Keywords</a></li>
<li><a class="reference internal" href="#deprecated-python-behavior">Deprecated Python Behavior</a></li>
<li><a class="reference internal" href="#unsupported-operating-systems">Unsupported Operating Systems</a></li>
<li><a class="reference internal" href="#deprecated-python-modules-functions-and-methods">Deprecated Python modules, functions and methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#removed">Removed</a><ul>
<li><a class="reference internal" href="#api-and-feature-removals">API and Feature Removals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#porting-to-python-3-5">Porting to Python 3.5</a><ul>
<li><a class="reference internal" href="#changes-in-python-behavior">Changes in Python behavior</a></li>
<li><a class="reference internal" href="#changes-in-the-python-api">Changes in the Python API</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Changes in the C API</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">What&#8217;s New in Python</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="3.4.html"
                        title="next chapter">What&#8217;s New In Python 3.4</a></p>
<h3>This Page</h3>
<ul class="this-page-menu">
  <li><a href="../bugs.html">Report a Bug</a></li>
  <li><a href="../sources_/whatsnew/3.5.txt"
         rel="nofollow">Show Source</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.4.html" title="What’s New In Python 3.4"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="What’s New in Python"
             >previous</a> |</li>
        <li><img src="../static_/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &raquo;</li>
        <li>
          <span class="version_switcher_placeholder">3.5.1rc1</span>
          <a href="../index.html">Documentation</a> &raquo;
        </li>

          <li><a href="index.html" >What&#8217;s New in Python</a> &raquo;</li> 
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 1990-2015, Python Software Foundation.
    <br />
    The Python Software Foundation is a non-profit corporation.
    <a href="https://www.python.org/psf/donations/">Please donate.</a>
    <br />
    Last updated on Nov 23, 2015.
    <a href="../bugs.html">Found a bug</a>?
    <br />
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
    </div>

  </body>
</html>