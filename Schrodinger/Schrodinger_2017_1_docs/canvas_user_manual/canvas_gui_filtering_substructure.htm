<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="Documentation.xml" data-mc-path-to-help-system="../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="User Manuals|Canvas User Manual|The Canvas Graphical Interface|Filtering and Querying the Data in the Canvas Spreadsheet">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Filtering the Canvas Spreadsheet by Substructure</title>
        <link href="../Resources/Stylesheets/docs.css" rel="stylesheet" />
        <script src="../Resources/Scripts/custom.modernizr.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/foundation.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body><a name="aanchor8820"></a>
        <MadCap:concept term="User Manuals" /><a name="aanchor8821"></a>
        <MadCap:concept term="Canvas" /><a name="canvas_gui_2356900553_746388"></a>
        <table class="NavLink" data-mc-conditions="Default.ScreenOnly">
            <tr class="NavLink">
                <td class="NavLeft"><span class="NavText">◀ <a class="NavLink MCXref xref xrefNavLink" href="canvas_gui_filtering_structure.htm">Filtering the Canvas Spreadsheet by Structure</a></span>
                </td>
                <td class="NavCenter"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="canvas_user_manualTOC.htm">Canvas User Manual</a></span>
                </td>
                <td class="NavRight"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="canvas_gui_filtering_duplicates.htm">Detecting Duplicate Structures in the Canvas Spreadsheet</a> ▶</span>
                </td>
            </tr>
        </table>
        <h1 class="Title">Filtering the Canvas Spreadsheet by Substructure</h1>
        <p>You can filter the structures in the database by running a substructure query. This task is performed in the <span class="GUI">Substructure Query</span> dialog box, which you open by choosing <span class="GUI">Query </span>→<span class="GUI"> Substructure Query</span> or clicking the <span class="GUI">Substructure Query</span> toolbar button.</p>
        <p class="image">
            <img src="../Resources/Images/Toolbuttons/substructure_query.png" style="margin-left: 2px;margin-right: 2px;margin-top: 2px;margin-bottom: 2px;" />
        </p>
        <p>The query can be run on the selected rows in the spreadsheet, on all rows, or on an external project. To make the choice, select the appropriate <span class="GUI">Screen</span> option.</p>
        <p class="image">
            <img src="substructure_query_db.png" style="margin: 2px;" />
        </p>
        <p>By default, the query returns all structures that contain the specified substructure. If you want to return structures that match the query exactly, select <span class="GUI">Require exact match</span>. This choice will find all instances of a single molecule, and distinguish it from structures that contain other molecules, such as water. You can also return structures that do not match the query by selecting <span class="GUI">Invert (return non-matches)</span>. If you are querying an external project, the matching structures are appended to the current project. </p>
        <p>The query can be specified either by providing a SMARTS string, or by building or importing a 2D structure. </p>
        <ul>
            <li value="1">
                <p class="ListPara">To use a SMARTS string, choose <span class="GUI">SMARTS</span> from the <span class="GUI">Query Source</span> option menu. You can enter or paste a SMARTS string into the <span class="GUI">Enter SMARTS query</span> text box, or choose a previously used SMARTS string from the option menu. </p>
            </li>
            <li value="2">
                <p class="ListPara">To use a 2D structure, choose <span class="GUI">Builder</span> from the <span class="GUI">Query Source</span> option menu. You can build a structure, by clicking <span class="GUI">New</span> and drawing the structure in the <span class="GUI">Edit Structure</span> panel; import a query from a MOL file or an SD file, by clicking <span class="GUI">Import</span> and navigating to the file; or select a previously used query from the option menu. Only the first structure is used if an SD file is chosen. </p>
            </li>
        </ul>
        <p>The display area shows the query as a 2D structure. You can set the number of queries on the option menus in the <span class="GUI">Preferences</span> panel, in the <span class="GUI">History</span> category.</p>
        <p>By default, the structures are prescreened with the 2D index for the structure (a special 512-bit fingerprint), to skip structures that cannot match the query, before checking for a match. This feature speeds up the search. It can be used for prescreening if the query is an exact SMARTS pattern; it cannot be used if the query contains SMARTS primitives that disqualify it as an exact substructure, such as [C,N], or [*]. To turn off the prescreening, deselect <span class="GUI">Use 2D index</span>.</p>
        <p>You can create or edit a query with the 2D builder or with ChemDraw (if ChemDraw is installed) by clicking the <span class="GUI">Build</span> button in the <span class="GUI">Mol File</span> tab. If you have already specified a file, it is loaded into the 2D editing application. When you close the application, the query is saved and imported into Canvas. You have the option of saving the query in a named file for future use.</p>
        <p>The query results can be applied to the current view, or the results can be stored as a new view. If you select <span class="GUI">New view</span>, the <span class="GUI">Save Custom View</span> dialog box opens when you run the query, so that you can name and describe the view. The matches are highlighted on the structure if <span class="GUI">Structure </span>→<span class="GUI"> Highlight Matches</span> is selected.</p>
        <p>To run the query, click <span class="GUI">Find Matches</span>. </p>
        <p>When you have run the query, you can align the 2D structure of the matches, as shown in the spreadsheet, to a reference structure. The alignment is done with a least-squares method on the matching atoms. The reference structure is the first match. To perform the alignment, choose <span class="GUI">Structure </span>→<span class="GUI"> Align Matches</span>. If you deselect this option, the matching structures are returned to their default orientation. The alignment is removed if you delete the reference structure, modify it so that it no longer matches the query, or if you undo the query filter.</p>
        <table class="NavLink" data-mc-conditions="Default.ScreenOnly">
            <tr class="NavLink">
                <td class="NavLeft"><span class="NavText">◀ <a class="NavLink MCXref xref xrefNavLink" href="canvas_gui_filtering_structure.htm">Filtering the Canvas Spreadsheet by Structure</a></span>
                </td>
                <td class="NavCenter"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="canvas_user_manualTOC.htm">Canvas User Manual</a></span>
                </td>
                <td class="NavRight"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="canvas_gui_filtering_duplicates.htm">Detecting Duplicate Structures in the Canvas Spreadsheet</a> ▶</span>
                </td>
            </tr>
        </table>
    </body>
</html>