<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="Documentation.xml" data-mc-path-to-help-system="../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Help|Materials Science Help">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/docs.css" rel="stylesheet" type="text/css" /><title>MD Multistage Workflow Panel</title>
        <script src="../Resources/Scripts/custom.modernizr.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/foundation.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body><a name="aanchor5246"></a>
        <MadCap:concept term="Help Topics" /><a name="aanchor5247"></a>
        <MadCap:concept term="Materials" />
        <table class="navlink">
            <tr>
                <td class="navlink"><a class="navbutton" href="#using">Using</a>
                </td>
                <td class="navlink"><a class="navbutton" href="#features">Features</a>
                </td>
                <td class="navlink"><a class="navbutton" href="#links">Links</a>
                </td>
            </tr>
        </table>
        <h1 class="title">MD Multistage Workflow Panel</h1><a name="summary"></a>
        <p>In this panel you can set up a multistage molecular dynamics simulation workflow, consisting of an optional relaxation protocol and an arbitrary number of stages, chosen from minimization, Brownian dynamics, molecular dynamics, simulated annealing, and analysis. The results of each stage are fed into the next stage.</p>
        <p class="opening">To open this panel, choose <span class="GUI">Tasks → Materials →  Classical Mechanics → Multistage Simulation Workflow</span> in the Task Tool.</p>
        <h2><a name="using"></a>Using the MD Multistage Workflow Panel</h2>
        <p>The <span class="GUI">Multistage Simulation Workflow</span> panel uses a Desmond model system as input. The model system can be generated in the <a href="disordered_system_builder.html"><span class="GUI">Disordered System Builder</span></a> panel, or the standard Desmond <span class="GUI">System Builder</span> panel. It also supports coarse-grain models prepared with the <a href="coarse_grain_ff_assignment.html" class="MCXref xref" xrefformat="{paratext}">Coarse-Grained Force Field Assignment Panel</a>.</p>
        <p>The panel was primarily designed to allow processing of the initial condensed phase model generated from the <span class="GUI">Disordered System Builder</span>, using a series of NVE, NVT, and finally target temperature NPT simulations to predict the amorphous system density and structure. However it can be used for any Desmond simulation, and compute properties such as the coefficient of thermal expansion or T<sub>g</sub>. With the addition of Analysis stages, you can use the <a href="ms_md_simulation_analysis.html"><span class="GUI">MS MD Trajectory Analysis</span> panel</a> for analysis of bulk properties from the preceding stages. For example you could run simulations at a range of temperatures and do the analysis at each temperature.</p>
        <p>When the panel opens, a single simulation step is shown below the <span class="GUI">Model system</span> section. Each simulation step has controls for a single step of the simulation.You can add steps in the following ways:</p>
        <ul>
            <li value="1">
                <p class="ListPara">Click <span class="GUI">Append Step</span> to add a new default step at the end of the list.</p>
            </li>
            <li value="2">
                <p class="ListPara">Click the <span class="GUI">Duplicate</span> button <img src="../Resources/Images/Toolbuttons/copy1.png" /> at the top right of a step to duplicate the step, with all its settings. The new step is placed below the source step. </p>
            </li>
            <li value="3">
                <p class="ListPara">Click the <span class="GUI">Append Steps from File</span> button, and import the steps from a previous simulation. A file selector opens so you can locate the desired <code>.msj</code> file. You can only import steps from a minimization, molecular dynamics, or simulated annealing run, or a multistage run from this panel. The steps are added at the end of the list.</p>
            </li>
        </ul>
        <p> You can also add a predefined relaxation protocol before the simulation steps.</p>
        <p>You can rearrange steps with the arrow buttons <img src="../Resources/Images/Toolbuttons/up1.png" />&#160;&#160;<img src="../Resources/Images/Toolbuttons/down1.png" /> at the top right of the steps. This makes it easy to duplicate an earlier step then move it down into the desired location, and modify the settings.</p>
        <p>If you want to see only some of the steps, you can show or hide the options with the show and hide buttons <img src="../Resources/Images/Toolbuttons/plus1.png" />&#160;&#160;<img src="../Resources/Images/Toolbuttons/minus1.png" />. This is useful when you have a number of steps and want to compare two separated steps, for example.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; "><span class="autonumber"><span><b>Note:</b> <![CDATA[ ]]></span></span>You must submit the job to a Linux host, as Desmond only runs under Linux. </p>
        <h2><a name="features"></a>MD Multistage Workflow Panel Features</h2>
        <ul>
            <li value="1"><a href="#model_system"><span class="GUI">Model system</span> section</a>
            </li>
            <li value="2"><a href="#relax"><span class="GUI">Relaxation protocol</span> option and menu</a>
            </li>
            <li value="3"><a href="#newrelax"><span class="GUI">Create New</span> button</a>
            </li>
            <li value="4"><a href="#manage"><span class="GUI">Manage</span> button</a>
            </li>
            <li value="5"><a href="#feature2">Simulation step</a>
            </li>
            <li value="6"><a href="#feature3"><span class="GUI">Append Step</span> button</a>
            </li>
            <li value="7"><a href="#feature4"><span class="GUI">Append Steps from File</span> button</a>
            </li>
            <li value="8"><a href="#job_toolbar">Job toolbar</a>
            </li>
            <li value="9"><a href="#status_bar">Status bar</a>
            </li>
        </ul>
        <dl>
            <dt><a name="model_system"></a><span class="GUI">Model system</span> section</dt>
            <dd>
                <p>In this section, you select the model system that you will use for the simulation. A valid model system must contain both the coordinates of the particles and the force field parameters. A file of a valid model system normally has the <code>.cms</code> extension. You can use the <a href="../desmond_help/system_builder.html"><span class="GUI">System Builder</span> panel</a> to prepare the model system for any structure that you have. If you want to build an amorphous structure from scratch, you can use the <a href="disordered_system_builder.html"><span class="GUI">Disordered System Builder</span> panel</a> to create a model system.</p>
                <p>The option menu offers two choices for the source of the model system:</p>
                <ul>
                    <li value="1">
                        <p><span class="GUI">Load from Workspace</span>—Load the model system from the Workspace. When you choose this option, the <span class="GUI">Load</span> button is displayed to the right of the menu. Click this button to load the model system.</p>
                    </li>
                    <li value="2">
                        <p><span class="GUI">Import from file</span>—Import the model system from a file. When you choose this option, a text box and <span class="GUI">Browse</span> button are displayed to the right of the menu. You can enter the name of the file in the text box, or click <span class="GUI">Browse</span> and navigate to the file.</p>
                    </li>
                </ul>
            </dd>
            <dt><a name="relax"></a><span class="GUI">Relaxation protocol</span> option and menu</dt>
            <dd>
                <p>To run a relaxation protocol before starting the simulations, select <span class="GUI">Relaxation protocol</span> and select the protocol from the option menu. The built-in protocols are:</p>
                <ul>
                    <li value="1">
                        <p><span class="GUI">Relaxation1</span>—A fairly standard Desmond protocol, consisting of a Brownian minimization stage, NVT at 300K, NVT at 700K, NPT at 300 K, and NPT at 300K.</p>
                    </li>
                    <li value="2">
                        <p><span class="GUI">Materials relaxation</span>—Robust protocol for materials science applications. Consists of a 20 ps NVT Brownian minimization at 10 K, a 20 ps NPT Brownian minimization at 100 K, then a 100 ps NPT MD stage at 100 K.</p>
                    </li>
                    <li value="3">
                        <p><span class="GUI">Compressive</span>—Useful for compressing systems that are built to a low density, such as from the <span class="GUI">Disordered System Builder</span>. It uses a high-pressure NPT stage (among other stages) to increase the density of the system.</p>
                    </li>
                    <li value="4">
                        <p><span class="GUI">Constant pressure</span>—Built-in Desmond relaxation protocol in the NPT ensemble, consisting of a Brownian step, then a low temperature MD stage, followed by a regular MD stage.</p>
                    </li>
                    <li value="5">
                        <p><span class="GUI">Constant volume</span>—Built-in Desmond relaxation protocol in the NVT ensemble, consisting of a Brownian step, then a low temperature MD stage, followed by a regular MD stage.</p>
                    </li>
                </ul>
                <p>This option and menu are not available for coarse-grain model systems, as the built-in protocols are not appropriate for these systems. See <a href="../materials_user_manual/coarse_grain_simulation_setup.htm" class="MCXref xref" xrefformat="{paratext}">Setting Up the Coarse-Grained Simulation</a> for more information on appropriate steps to include for relaxation of these systems.</p>
            </dd>
            <dt><a name="newrelax"></a><span class="GUI">Create New</span> button</dt>
            <dd>
                <p>Create a new relaxation protocol from the simulation stages currently defined. These stages include the currently selected relaxation protocol if the <span class="GUI">Relaxation protocol</span> option is selected. Opens the <span class="GUI">Create Custom Relaxation Protocol</span> dialog box, in which you can name the protocol. The new protocol is then added to the <span class="GUI">Relaxation protocol</span> menu, and is stored in your <a href="../job_control/job_control_glossary.htm#user_resources_directory">Schrödinger user resources directory</a>.</p>
            </dd>
            <dt><a name="manage"></a><span class="GUI">Manage</span> button</dt>
            <dd>
                <p>Manage your custom relaxation protocols. Opens the <span class="GUI">Manage Custom Relaxation Protocol</span> dialog box, in which you can choose a protocol from an option menu, and delete it by clicking <span class="GUI">Delete Protocol</span>. The protocol is then removed from the <span class="GUI">Relaxation protocol</span> menu.</p>
            </dd>
            <dt><a name="feature2"></a>Simulation step</dt>
            <dd>
                <p>Each simulation step has controls for a single step of the simulation.</p>
                <dl>
                    <dt>Step label</dt>
                    <dd>
                        <p>The label indicates the step number and the type of the step. It is updated if the step type is changed or the step is moved. If the step settings are hidden, the label gives a brief summary of the main step parameters.</p>
                    </dd>
                    <dt>Step operation buttons</dt>
                    <dd>
                        <p>These buttons perform various display and ordering operations on the step. They allow for easy duplication and rearrangement of steps.</p>
                        <table border="0" cellpadding="5">
                            <tr>
                                <td>
                                    <img src="../Resources/Images/Toolbuttons/plus1.png" />&#160;&#160;&#160;
<img src="../Resources/Images/Toolbuttons/minus1.png" />&#160;&#160;&#160;</td>
                                <td>Show or hide the simulation options. This is useful when
you have a number of steps and want to compare two separated steps, for example.
</td>
                            </tr>
                            <tr>
                                <td>
                                    <img src="../Resources/Images/Toolbuttons/up1.png" />&#160;&#160;&#160;
<img src="../Resources/Images/Toolbuttons/down1.png" /></td>
                                <td>Move the step up or down one place in the workflow. 
</td>
                            </tr>
                            <tr>
                                <td>
                                    <img src="../Resources/Images/Toolbuttons/copy1.png" />
                                </td>
                                <td>Duplicate the step. This is useful for creating similar steps with
variations on the settings.
</td>
                            </tr>
                            <tr>
                                <td>
                                    <img src="../Resources/Images/Toolbuttons/ex1.png" />
                                </td>
                                <td>Delete the step.
</td>
                            </tr>
                        </table>
                    </dd>
                    <dt><span class="GUI">Simulation type</span> option menu</dt>
                    <dd>
                        <p>Select the type of simulation step, from <span class="GUI">Minimization</span>, <span class="GUI">Brownian Dynamics</span>, <span class="GUI">Molecular Dynamics</span>, <span class="GUI">Simulated Annealing</span>, or <span class="GUI">Analysis</span>. When you select a step type, the label is updated with the type, and the relevant settings are displayed below these options.</p>
                        <p>The <span class="GUI">Analysis</span> stage performs the analysis and generates the <span class="GUI">.eaf</span> file needed to use the <a href="ms_md_simulation_analysis.html"><span class="GUI">MS MD Trajectory Analysis</span> panel</a> for analysis of bulk properties.</p>
                    </dd>
                    <dt>Simulation options</dt>
                    <dd>
                        <p>Set options for the simulation step. The options depend on the simulation type. They are the same as in the corresponding Desmond panels, except that the relaxation options are not present. Links to the descriptions are given here:</p>
                        <ul>
                            <li value="1"><a href="../desmond_help/minimization_panel.html#simulation">Minimization</a>
                            </li>
                            <li value="2"><a href="#brownie">Brownian Dynamics</a>
                            </li>
                            <li value="3"><a href="../desmond_help/molecular_dynamics_panel.html#simulation">Molecular Dynamics</a>
                            </li>
                            <li value="4"><a href="../desmond_help/simulated_annealing_panel.html#simulation">Simulated Annealing</a>
                            </li>
                        </ul>
                        <p>There are no options for the <span class="GUI">Analysis</span> stage.</p>
                        <dl>
                            <dt><a name="brownie"></a><span class="GUI">Brownian Dynamics</span>
                            </dt>
                            <dd>
                                <p>Run a Brownian dynamics simulation to minimize the energy of the system. You can specify the length of the simulation in ps in the <span class="GUI">Time</span> text box.</p>
                            </dd>
                        </dl>
                    </dd>
                </dl>
            </dd>
            <dt><a name="feature3"></a><span class="GUI">Append Step</span> button</dt>
            <dd>
                <p>Add a step to the end of the workflow. By default, the step is a minimization step with the default minimization parameters.</p>
            </dd>
            <dt><a name="feature4"></a><span class="GUI">Append Steps from File</span> button</dt>
            <dd>
                <p>Add steps to the workflow from a previous simulation, by importing them from a multisim MSJ file (<code>.msj</code>). Opens a file selector, in which you can navigate to and open the file. The simulation must be one that was initiated from this panel, the <a href="../desmond_help/minimization_panel.html"><span class="GUI">Minimization</span> panel</a> (<span class="GUI">Applications → Desmond → Minimization</span>), the <a href="../desmond_help/molecular_dynamics_panel.html"><span class="GUI">Molecular Dynamics</span> panel</a> (<span class="GUI">Tasks → Classical Simulation → Molecular Dynamics : Molecular Dynamics</span>), or the <a href="../desmond_help/simulated_annealing_panel.html"><span class="GUI">Simulated Annealing</span> panel</a> (<span class="GUI">Tasks → Classical Simulation → Molecular Dynamics → Simulated Annealing</span>). Importing steps from other types of jobs is likely to cause failure, and a warning is posted for any step that is not recognized by this panel.</p>
            </dd>
            <dt><a name="job_toolbar"></a>Job toolbar</dt>
            <dd>
                <p>Manage job submission. See <a href="../maestro_help/job_toolbar.html">Job Toolbar</a> for a description of this toolbar.</p>
            </dd>
            <dt><a name="status_bar"></a>Status bar</dt>
            <dd>
                <p>The status bar displays information about the current job settings for the panel. This includes the job name, task name and task settings (if any), number of subjobs (if any) and the host name and job incorporation setting. It also displays a message for a short time when you start a new job.</p>
                <p>The status bar also contains the <span class="GUI">Help</span> button, which opens the help topic for the panel.</p>
                <p>
                    <img src="../Resources/Images/Toolbuttons/help.png" />
                </p>
            </dd>
        </dl>
        <h2><a name="links"></a>Related Topics</h2>
        <ul>
            <li value="1"><a href="disordered_system_builder.html" class="MCXref xref" xrefformat="{paratext}">Disordered System Builder Panel</a>
            </li>
            <li value="2"><a href="../desmond_help/system_builder.html" class="MCXref xref" xrefformat="{paratext}">System Builder Panel</a>
            </li>
            <li value="3"><a href="../desmond_help/minimization_panel.html" class="MCXref xref" xrefformat="{paratext}">Minimization Panel</a>
            </li>
            <li value="4"><a href="../desmond_help/molecular_dynamics_panel.html" class="MCXref xref" xrefformat="{paratext}">Molecular Dynamics Panel</a>
            </li>
            <li value="5"><a href="../desmond_help/simulated_annealing_panel.html" class="MCXref xref" xrefformat="{paratext}">Simulated Annealing Panel</a>
            </li>
            <li value="6"><a href="../desmond_help/advanced_options_db.html" class="MCXref xref" xrefformat="{paratext}">Desmond — Advanced Options Dialog Box</a>
            </li>
        </ul>
    </body>
</html>