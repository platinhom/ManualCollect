<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="Documentation.xml" data-mc-path-to-help-system="../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Help|Materials Science Help">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/docs.css" rel="stylesheet" type="text/css" /><title>QM Multistage Workflow Panel</title>
        <script src="../Resources/Scripts/custom.modernizr.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/foundation.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body><a name="aanchor947"></a>
        <MadCap:concept term="Help Topics" /><a name="aanchor948"></a>
        <MadCap:concept term="Materials" />
        <table class="navlink">
            <tr>
                <td class="navlink"><a class="navbutton" href="#using">Using</a>
                </td>
                <td class="navlink"><a class="navbutton" href="#features">Features</a>
                </td>
                <td class="navlink"><a class="navbutton" href="#links">Links</a>
                </td>
            </tr>
        </table>
        <h1 class="title">QM Multistage Workflow Panel</h1><a name="summary"></a>
        <p>Set up a multistage workflow of quantum mechanical single point, optimization, and transition state search jobs, in which the output from each stage is used as input to the next. The workflow is run as a Jaguar batch job.</p>
        <p>To open this panel, choose <span class="GUI">Tasks → Materials → Quantum Mechanics → QM Multistage Workflow</span>.
</p>
        <h2><a name="using"></a>Using the QM Multistage Workflow Panel</h2>
        <p>This panel allows you to set up a workflow consisting of multiple sequential QM calculations (run with Jaguar), which is applied to multiple molecules. The settings for each calculation can be set up just as in the <span class="GUI">Jaguar</span> panel. The <span class="GUI">Input</span> tab allows you to make molecule-specific settings. The structures listed in this tab are those specified with the <span class="GUI">Use structures from</span> option menu, and so are the same for each stage. The settings for these structures can be different for each stage, however. </p>
        <p>Workflows can be saved and read in. Reading in previously saved stages  does not read in any entry-specific information, only the settings that apply to all structures, including additional keywords and extra sections. Workflows are saved in your <a href="../job_control/job_control_glossary.htm#user_resources_directory">Schrödinger user resources directory</a> with a <code>_workflow.txt</code> extension.</p>
        <p>Changing a stage from one type to another preserves all the current settings for that stage as long as those settings are relevant for the new stage. For instance, changing <span class="GUI">Single point</span> to <span class="GUI">Optimization</span> preserves all settings. Changing from <span class="GUI">Optimization</span> to <span class="GUI">Single point</span> and back to <span class="GUI">Optimization</span> does not preserve <span class="GUI">Optimization</span> tab settings because they are lost with the switch to the <span class="GUI">Single point</span> stage.</p>
        <p>When the job is run, each stage for each input structure is submitted to the queueing system for execution in the proper sequence. When all the parent stages for a particular stage have finished, the stage is submitted to the queue, subject to any limits on the number of subjobs. You can use multiple processors to distribute subjobs for each entry, and multiple threads to run each calculation with multithreading.</p>
        <p>When the job finishes, the structures produced by all stages for all input structures are incorporated into the project. All the project entries are in a parent group named for the job. Within that group, each of the input entries has its own subgroup, and within each subgroup, the entries for the output structures are ordered by stage.</p>
        <h2><a name="features"></a>QM Multistage Workflow Panel Features</h2>
        <ul>
            <li value="1"><a href="#structure_source">Structure source</a>
            </li>
            <ul>
                <li value="1"><a href="#structures"><span class="GUI">Use structures from</span> option menu</a>
                </li>
                <li value="2"><a href="#PTbutton"><span class="GUI">Open Project Table</span> button</a>
                </li>
            </ul>
            <li value="2"><a href="#feature0">Collapse/expand all buttons</a>
            </li>
            <li value="3"><a href="#feature1">Workflow stage</a>
                <ul>
                    <li value="1"><a href="#feature1.1">Stage label</a>
                    </li>
                    <li value="2"><a href="#feature1.2">Stage management buttons</a>
                    </li>
                    <li value="3"><a href="#feature1.3"><span class="GUI">Stage type</span> option menu</a>
                    </li>
                    <li value="4"><a href="#feature1.a"><span class="GUI">Geometry from stage</span> option and box</a>
                    </li>
                    <li value="5"><a href="#feature1.b"><span class="GUI">Wavefunction</span> option</a>
                    </li>
                    <li value="6"><a href="#feature1.c"><span class="GUI">Hessian</span> option</a>
                    </li>
                    <li value="7"><a href="#feature1.4">Settings tabs</a>
                        <ul>
                            <li value="1"><a href="../jaguar_help/input_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Input Tab</a>
                            </li>
                            <li value="2"><a href="../jaguar_help/transition_state_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Transition State Tab</a>
                            </li>
                            <li value="3"><a href="../jaguar_help/theory_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Theory Tab</a>
                            </li>
                            <li value="4"><a href="../jaguar_help/scf_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — SCF Tab</a>
                            </li>
                            <li value="5"><a href="../jaguar_help/optimization_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Optimization Tab</a>
                            </li>
                            <li value="6"><a href="../jaguar_help/properties_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Properties Tab</a>
                            </li>
                            <li value="7"><a href="../jaguar_help/solvation_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Solvation Tab</a>
                            </li>
                            <li value="8"><a href="../jaguar_help/output_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Output Tab</a>
                            </li>
                        </ul>
                    </li>
                    <li value="8"><a href="#feature1.5"><span class="GUI">Additional keywords</span> text box</a>
                    </li>
                    <li value="9"><a href="#feature1.6"><span class="GUI">Extra Sections</span> button</a>
                    </li>
                    <li value="10"><a href="#feature1.7"><span class="GUI">Read</span> button</a>
                    </li>
                    <li value="11"><a href="#feature1.8"><span class="GUI">Set as Default</span> button</a>
                    </li>
                </ul>
            </li>
            <li value="4"><a href="#feature2">Stage and Workflow buttons</a>
                <ul>
                    <li value="1"><a href="#feature2.1"><span class="GUI">Append Stage</span> button</a>
                    </li>
                    <li value="2"><a href="#feature2.2"><span class="GUI">Append Workflow</span> button</a>
                    </li>
                    <li value="3"><a href="#feature2.3"><span class="GUI">Append Stages from File</span> button</a>
                    </li>
                    <li value="4"><a href="#feature2.4"><span class="GUI">Save as Workflow</span> button</a>
                    </li>
                </ul>
            </li>
            <li value="5"><a href="#job_toolbar">Job toolbar</a>
            </li>
            <li value="6"><a href="#status_bar">Status bar</a>
            </li>
        </ul>
        <h3><a name="structure_source"></a>Structure source</h3>
        <p>Choose the source of initial structures for the calculations.</p>
        <dl>
            <dt><a name="structures"></a><span class="GUI"><span class="SnippetUseFromLabel">Use structures from</span></span> option menu</dt>
            <dd>
                <p>Choose the source of the structures for <span class="SnippetCurrentTask">the current task</span>. </p>
                <ul>
                    <li value="1" data-mc-conditions="Snippet.PTn"><span class="GUI">Project Table (<i>n</i> selected entries)</span>—Use the entries that are currently selected in the Project Table. The number of entries selected is shown on the menu item.  An icon is displayed to the right which you can click to open the Project Table and select entries.</li>
                    <li value="2" data-mc-conditions="Snippet.WSn"><span class="GUI">Workspace (<i>n</i> included entries)</span>—Use the entries that are currently included in the Workspace, treated as separate structures. The number of entries in the Workspace is shown on the menu item. The Workspace should not contain a scratch entry.   An  icon is displayed to the right which you can click to open the Project Table and include or exclude entries.</li>
                </ul>
            </dd>
            <dt><a name="PTbutton"></a><span class="GUI">Open Project Table</span> button</dt>
            <dd>
                <p>Open the <span class="GUI">Project Table</span> panel, so you can select or include the entries for the source of the structures.
<br style="margin-bottom: 10px;" /><img src="../Resources/Images/Toolbuttons/projecttable.png" /><br style="margin-bottom: 10px;" /></p>
            </dd><a name="file"></a>
        </dl>
        <h3><a name="feature0"></a>Collapse/expand all buttons</h3>
        <p>These two buttons (labeled -- and ++) allow you to collapse all workflow stages or expand all workflow stages. When expanded, a scroll bar allows you to navigate the stages.</p>
        <h3><a name="feature1"></a>Workflow stage</h3>
        <p>The main part of the panel has a list of workflow stages, which are executed in the sequence that they appear in this list. The features of each stage are described below.</p>
        <dl>
            <dt><a name="feature1.1"></a>Stage label</dt>
            <dd>
                <p>
                    <p>The label indicates the stage number and the type of the stage. It is updated if the stage type is changed or the stage is moved. If the stage settings are hidden, the label gives a brief summary of the main stage parameters.</p>
                </p>
            </dd>
            <dt><a name="feature1.2"></a>Stage management buttons</dt>
            <dd>
                <p>These buttons perform various display and ordering operations on the stage. They allow for easy duplication and rearrangement of stages.</p>
                <table border="0" cellpadding="5">
                    <tr>
                        <td>
                            <img src="../Resources/Images/Toolbuttons/plus1.png" />&#160;&#160;&#160;
<img src="../Resources/Images/Toolbuttons/minus1.png" />&#160;&#160;&#160;</td>
                        <td>Show or hide the settings. 
</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="../Resources/Images/Toolbuttons/up1.png" />&#160;&#160;&#160;
<img src="../Resources/Images/Toolbuttons/down1.png" /></td>
                        <td>Move the stage up or down one place in the workflow. 
</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="../Resources/Images/Toolbuttons/copy1.png" />
                        </td>
                        <td>Duplicate the stage. This is useful for creating similar stages with
variations on the settings.
</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="../Resources/Images/Toolbuttons/ex1.png" />
                        </td>
                        <td>Delete the stage.
</td>
                    </tr>
                </table>
                <p>You can collapse or expand all stages with the buttons at the top right of the panel.</p>
            </dd>
            <dt><a name="feature1.3"></a><span class="GUI">Stage type</span> option menu</dt>
            <dd>
                <p>Choose the type of calculation to be run for this stage of the workflow. The three choices are <span class="GUI">Single point</span>, <span class="GUI">Optimization</span>, and <span class="GUI">Transition state</span>. The tabs that are displayed for the step depend on the choice you make from this option menu, and the choice is displayed in the label at the top of the stage. </p>
            </dd>
            <dt><a name="feature1.a"></a><span class="GUI">Geometry from stage</span> option and box</dt>
            <dd>
                <p>Select this option to use the geometry from the stage specified in the box. If this option is not selected, the geometry used is taken from the structure source as specified with the <span class="GUI">Use structures from</span> option menu. The <span class="GUI">Wavefunction</span> and <span class="GUI">Hessian</span> options are only available when this option is selected.
                </p>
            </dd>
            <dt><a name="feature1.b"></a><span class="GUI">Wavefunction</span> option</dt>
            <dd>
                <p>Use the wave function from the stage specified with the <span class="GUI">Geometry from stage</span> option and box.
                </p>
            </dd>
            <dt><a name="feature1.c"></a><span class="GUI">Hessian</span> option</dt>
            <dd>
                <p>Use the Hessian from the stage specified with the <span class="GUI">Geometry from stage</span> option and box.
                </p>
            </dd>
            <dt><a name="feature1.4"></a>Settings tabs</dt>
            <dd>
                <p>These tabs are the same as in the Jaguar panel, except for the <span class="GUI">Transition State</span> tab. The <span class="GUI">Transition State</span> tab only has the controls for the search itself: the controls for selecting the type of search and the structures are absent because only a single structure can be given, and the controls for settings made in the <span class="GUI">Input</span> tab are also absent. This means that the search is a standard search, applied to the input structure.</p>
                <p> Links to the topics describing these tabs are given below.</p>
                <ul>
                    <li value="1"><a href="../jaguar_help/input_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Input Tab</a>
                    </li>
                    <li value="2"><a href="../jaguar_help/transition_state_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Transition State Tab</a>
                    </li>
                    <li value="3"><a href="../jaguar_help/theory_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Theory Tab</a>
                    </li>
                    <li value="4"><a href="../jaguar_help/scf_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — SCF Tab</a>
                    </li>
                    <li value="5"><a href="../jaguar_help/optimization_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Optimization Tab</a>
                    </li>
                    <li value="6"><a href="../jaguar_help/properties_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Properties Tab</a>
                    </li>
                    <li value="7"><a href="../jaguar_help/solvation_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Solvation Tab</a>
                    </li>
                    <li value="8"><a href="../jaguar_help/output_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Output Tab</a>
                    </li>
                </ul>
            </dd>
            <dt><a name="feature1.5"></a><span class="GUI">Additional keywords</span> text box</dt>
            <dd>
                <p>Enter any additional <span class="Keyword">gen</span> section keywords you want to include in the input file for this stage. This allows you access to settings that are not in the tabs. See <a href="../jaguar_command_reference/jaguar_input_gen.htm" class="MCXref xref" xrefformat="{paratext}">The gen Section Of The Jaguar Input File</a> for details.</p>
            </dd>
            <dt><a name="feature1.6"></a><span class="GUI">Extra Sections</span> button</dt>
            <dd>
                <p>Enter any additional input file sections you want to include for this stage. The sections are placed at the end of the input file. See <a href="../jaguar_command_reference/jaguar_input_general_sections.htm" class="MCXref xref" xrefformat="{paratext}">Sections Of The Jaguar Input File Describing the Molecule and Calculation</a> for a list of sections, and <a href="../jaguar_command_reference/jaguar_input.htm" class="MCXref xref" xrefformat="{paratext}">The Jaguar Input File</a> for a list of links to each section.</p>
            </dd>
            <dt><a name="feature1.7"></a><span class="GUI">Read</span> button</dt>
            <dd>
                <p>Read the stage settings from a Jaguar input file. Opens the <span class="GUI">Jaguar Read</span> panel (see <a href="../jaguar_user_manual/jaguar_from_maestro_reading.htm" class="MCXref xref" xrefformat="{paratext}">Reading Jaguar Input Files into Maestro</a>), with the restriction that only the settings are read.</p>
            </dd>
            <dt><a name="feature1.8"></a><span class="GUI">Set as Default</span> button</dt>
            <dd>
                <p>
                    <p>Use the settings for this stage  as the default values. The default values are stored on disk so that they are used each time this panel opens in a new session and each time the <span class="GUI">Append Stage</span> button is clicked. The settings include the calculation type as well as any nondefault choices in the tabs and extra keyword or stage settings.</p>
                </p>
            </dd>
        </dl>
        <h3><a name="feature2"></a>Stage and Workflow buttons</h3>
        <p>These buttons allow you to add stages to the workflow and save the workflow.</p>
        <dl>
            <dt><a name="feature2.1"></a><span class="GUI">Append Stage</span> button</dt>
            <dd>
                <p>Add a stage to the end of the workflow.</p>
            </dd>
            <dt><a name="feature2.2"></a><span class="GUI">Append Workflow</span> button</dt>
            <dd>
                <p>Append  a workflow from the saved workflows set.</p>
            </dd>
            <dt><a name="feature2.3"></a><span class="GUI">Append Stages from File</span> button</dt>
            <dd>
                <p>Append stages from a workflow file that is not in the default location. All stages from the file are appended to the workflow.</p>
            </dd>
            <dt><a name="feature2.4"></a><span class="GUI">Save as Workflow</span> button</dt>
            <dd>
                <p>
                    <p>Save the current workflow in the standard location in your <a href="../job_control/job_control_glossary.htm#user_resources_directory">Schrödinger user resources directory</a>. The workflow is stored in a single plain text file with the extension <code>_workflow.txt</code>.</p>
                </p>
            </dd>
        </dl>
        <h3><a name="job_toolbar"></a>Job toolbar</h3>
        <p>Manage job submission. See <a href="../maestro_help/job_toolbar.html">Job Toolbar</a> for a description of this toolbar.</p>
        <h3><a name="status_bar"></a>Status bar</h3>
        <p>The status bar displays information about the current job settings for the panel. This includes the job name, task name and task settings (if any), number of subjobs (if any) and the host name and job incorporation setting. It also displays a message for a short time when you start a new job.</p>
        <p>The status bar also contains the <span class="GUI">Help</span> button, which opens the help topic for the panel.</p>
        <p>
            <img src="../Resources/Images/Toolbuttons/help.png" />
        </p>
        <h2><a name="links"></a>Related Topics</h2>
        <ul>
            <li value="1"><a href="../jaguar_help/input_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Input Tab</a>
            </li>
            <li value="2"><a href="../jaguar_help/transition_state_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Transition State Tab</a>
            </li>
            <li value="3"><a href="../jaguar_help/theory_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Theory Tab</a>
            </li>
            <li value="4"><a href="../jaguar_help/scf_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — SCF Tab</a>
            </li>
            <li value="5"><a href="../jaguar_help/optimization_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Optimization Tab</a>
            </li>
            <li value="6"><a href="../jaguar_help/properties_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Properties Tab</a>
            </li>
            <li value="7"><a href="../jaguar_help/solvation_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Solvation Tab</a>
            </li>
            <li value="8"><a href="../jaguar_help/output_tab.html" class="MCXref xref" xrefformat="{paratext}">Jaguar Panel — Output Tab</a>
            </li>
            <li value="9"><a href="../jaguar_command_reference/jaguar_input.htm" class="MCXref xref" xrefformat="{paratext}">The Jaguar Input File</a>
            </li>
            <li value="10"><a href="../jaguar_command_reference/jaguar_input_gen.htm" class="MCXref xref" xrefformat="{paratext}">The gen Section Of The Jaguar Input File</a>
            </li>
            <li value="11"><a href="../jaguar_command_reference/jaguar_input_general_sections.htm" class="MCXref xref" xrefformat="{paratext}">Sections Of The Jaguar Input File Describing the Molecule and Calculation</a>
            </li>
            <li value="12"><a href="../jaguar_user_manual/jaguar_from_maestro_reading.htm" class="MCXref xref" xrefformat="{paratext}">Reading Jaguar Input Files into Maestro</a>
            </li>
        </ul>
    </body>
</html>