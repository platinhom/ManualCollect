<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="Documentation.xml" data-mc-path-to-help-system="../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Command References|Jaguar Command Reference|Running Jaguar Jobs|Running Jaguar Jobs over Multiple Processors">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>Running a Multithreaded Jaguar Job with OpenMP</title>
        <link href="../Resources/Stylesheets/docs.css" rel="stylesheet" />
        <script src="../Resources/Scripts/custom.modernizr.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/foundation.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body><a name="aanchor4766"></a>
        <MadCap:concept term="Command Reference" /><a name="aanchor4767"></a>
        <MadCap:concept term="Jaguar" /><a name="jaguar_jobs_665538408_151216"></a><a name="jaguar_jobs_665538408_29330"></a>
        <table class="NavLink" data-mc-conditions="Default.ScreenOnly">
            <tr class="NavLink">
                <td class="NavLeft"><span class="NavText">◀ <a class="NavLink MCXref xref xrefNavLink" href="jaguar_jobs_multiproc_distributed.htm" xrefformat="{paratext}">Distribution of Jaguar Jobs over Processors</a></span>
                </td>
                <td class="NavCenter"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="jaguar_command_referenceTOC.htm" xrefformat="{paratext}">Jaguar Command Reference Manual</a></span>
                </td>
                <td class="NavRight"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="jaguar_jobs_multiproc_considerations.htm" xrefformat="{paratext}">Considerations for Running Parallel Jaguar Jobs</a> ▶</span>
                </td>
            </tr>
        </table>
        <h1 class="Title">Running a Multithreaded Jaguar Job with OpenMP</h1>
        <p>In this method, parts of the code are executed in parallel, using threads. See <a href="http://www.openmp.org">http://www.openmp.org</a> for details. Use of threads takes only one license no matter how many threads are used, but it requires extra memory, and all threads spawned from a single process must run on the same host. OpenMP is useful in speeding up expensive calculations for single jobs. Use of OpenMP is supported on Linux and Mac platforms, but not on Windows.</p>
        <p>OpenMP is resource-intensive, and you can overload a computer by requesting too many OpenMP threads. A parallel job using 2 OpenMP threads will use almost twice as much memory as a single-processor job, at least for those portions of the job that can be run in parallel.</p>
        <p>Also keep in mind that OpenMP is not 100% efficient, nor is their scaling linear. Thus a 4-processor job does not run 4 times faster than a 1-processor job, and a 32-processor job does not run twice as fast as a 16-processor job. The efficiency depends on the computer hardware, on the kind of calculation you are doing, on the level of theory, and on what portion of the program code has been enabled to use OpenMP. </p>
        <p>The command syntax to use OpenMP threads is one of the following: </p><pre>
jaguar run <i class="UserReplace">filename</i> -TPP <i class="UserReplace">nthreads</i>
jaguar run <i class="UserReplace">script</i>.py <i class="UserReplace">input-files</i> -TPP <i class="UserReplace">nthreads</i>
jaguar run <i class="UserReplace">script</i>.bat <i class="UserReplace">input-files</i> -TPP <i class="UserReplace">nthreads</i></pre>
        <p>where <i class="UserReplace">nthreads</i> is the maximum number of OpenMP threads to create for the multithreaded parts of the calculation. In practice you should not specify more threads than there are processor cores on the host, or you risk overloading the host. You can also set the number of threads in the <span class="GUI">Job Settings</span> dialog box when starting a job from Maestro.</p>
        <p>Because a team of OpenMP threads must run on the same host, you should be careful when using OpenMP on a cluster, so that you do not request more threads than there are cores on any one compute node. </p>
        <p>When OpenMP is being used, the output file indicates the number of threads: </p><pre>
  Using up to   4 threads per process 
</pre>
        <table class="NavLink" data-mc-conditions="Default.ScreenOnly">
            <tr class="NavLink">
                <td class="NavLeft"><span class="NavText">◀ <a class="NavLink MCXref xref xrefNavLink" href="jaguar_jobs_multiproc_distributed.htm" xrefformat="{paratext}">Distribution of Jaguar Jobs over Processors</a></span>
                </td>
                <td class="NavCenter"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="jaguar_command_referenceTOC.htm" xrefformat="{paratext}">Jaguar Command Reference Manual</a></span>
                </td>
                <td class="NavRight"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="jaguar_jobs_multiproc_considerations.htm" xrefformat="{paratext}">Considerations for Running Parallel Jaguar Jobs</a> ▶</span>
                </td>
            </tr>
        </table>
    </body>
</html>