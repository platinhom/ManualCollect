<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>schrodinger.job.jobcontrol</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="schrodinger-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Suite 2012 Schrodinger Python API</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="schrodinger-module.html">Package&nbsp;schrodinger</a> ::
        <a href="schrodinger.job-module.html">Package&nbsp;job</a> ::
        Module&nbsp;jobcontrol
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="schrodinger.job.jobcontrol-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module jobcontrol</h1><p class="nomargin-top"></p>
<p>Core job control for python.</p>
  <p>There are currently four major sections of this module - &quot;Job 
  database,&quot; &quot;Job launching,&quot; &quot;Job backend,&quot; and 
  &quot;Job hosts.&quot; The job database section deals with getting info 
  about existing Jobs, the job launching section deals with starting up a 
  subjob, and the job backend section provides utilities for a python 
  script running as a job.</p>
  <p>The philosophy of this module is to reinvent as little as possible 
  (i.e. use the mmjob C libs where we can) and keep things fairly simple. 
  If we need more complicated features of job control, we can hopefully add
  them as we go along.</p>
  <p>Copyright Schrodinger, LLC. All rights reserved.</p>

<!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Classes</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Classes"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="schrodinger.job.jobcontrol._JobResourceHolder-class.html" class="summary-name" onclick="show_private();">_JobResourceHolder</a><br />
      A helper class to deal with mmlib resource de-allocation.
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="schrodinger.job.jobcontrol._JobInitializer-class.html" class="summary-name" onclick="show_private();">_JobInitializer</a><br />
      A class to handle class initialization and termination.
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="schrodinger.job.jobcontrol._JobManager-class.html" class="summary-name" onclick="show_private();">_JobManager</a>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="schrodinger.job.jobcontrol.Job-class.html" class="summary-name">Job</a><br />
      A class to access a specific record in the job database.
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="schrodinger.job.jobcontrol._Backend-class.html" class="summary-name" onclick="show_private();">_Backend</a><br />
      An interface to mmjobbe.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="schrodinger.job.jobcontrol.Host-class.html" class="summary-name">Host</a><br />
      A class to encapsulate host info from the schrodinger.hosts file.
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="read"></a><span class="summary-sig-name">read</span>(<span class="summary-sig-arg">file_</span>)</span><br />
      Create and return a Job object from a jobcontrol file.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_jobs" class="summary-sig-name">get_jobs</a>(<span class="summary-sig-arg">username</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">query</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">all</code><code class="variable-quote">'</code></span>)</span><br />
      Return a list of Jobs in the database.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_job_selection"></a><span class="summary-sig-name">get_job_selection</span>(<span class="summary-sig-arg">username</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>)</span><br />
      Return a list of jobs from the current mmjob query selection.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#launch_job" class="summary-sig-name">launch_job</a>(<span class="summary-sig-arg">cmd</span>,
        <span class="summary-sig-arg">print_output</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">expandvars</span>=<span class="summary-sig-default">True</span>)</span><br />
      Run a process under job control and return a Job object.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#_fix_cmd" class="summary-sig-name" onclick="show_private();">_fix_cmd</a>(<span class="summary-sig-arg">cmd</span>,
        <span class="summary-sig-arg">expandvars</span>=<span class="summary-sig-default">True</span>)</span><br />
      A function to clean up the command passed to launch_job.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="_fix_launch_cmd"></a><span class="summary-sig-name">_fix_launch_cmd</span>(<span class="summary-sig-arg">cmd</span>)</span><br />
      Split the string command into program and arguments, then fix the 
      program path if necessary.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#_fix_program_path" class="summary-sig-name" onclick="show_private();">_fix_program_path</a>(<span class="summary-sig-arg">prog</span>)</span><br />
      If the program executable doesn't exist as a file and isn't an 
      absolute path, prepend the SCHRODINGER directory if it exists there.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_backend" class="summary-sig-name">get_backend</a>()</span><br />
      A convenience function to see if we're running under job control.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_runtime_path" class="summary-sig-name">get_runtime_path</a>(<span class="summary-sig-arg">pathname</span>)</span><br />
      Return the runtime path for the input file 'pathname'.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="under_job_control"></a><span class="summary-sig-name">under_job_control</span>()</span><br />
      Returns True if this process is running under job control; False 
      otherwise.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_hostfile" class="summary-sig-name">get_hostfile</a>()</span><br />
      Return the name of the host file.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_hosts" class="summary-sig-name">get_hosts</a>()</span><br />
      Return a list of all Hosts in the schrodinger.hosts file.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_host" class="summary-sig-name">get_host</a>(<span class="summary-sig-arg">name</span>)</span><br />
      Return a Host object for the named host.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#_get_host" class="summary-sig-name" onclick="show_private();">_get_host</a>(<span class="summary-sig-arg">name</span>)</span><br />
      Return a Host object for 'name', with all attributes read in from the
      corresponding entry in schrodinger.hosts file.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#host_str_to_list" class="summary-sig-name">host_str_to_list</a>(<span class="summary-sig-arg">hosts_str</span>)</span><br />
      Convert a hosts string (Ex: &quot;galina:1 monica:4&quot;) to a list 
      of tuples.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#host_list_to_str" class="summary-sig-name">host_list_to_str</a>(<span class="summary-sig-arg">host_list</span>)</span><br />
      Converts a hosts list (Ev: [ ('host1',1), ('host2', 10) ] ) to a 
      string.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_command_line_host_list" class="summary-sig-name">get_command_line_host_list</a>()</span><br />
      Return a list of (host, ncpu) tuples corresponding to the host list 
      that is specified on the command line.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#get_backend_host_list" class="summary-sig-name">get_backend_host_list</a>()</span><br />
      Return a list of (host, ncpu) tuples corresponding to the host list 
      as determined from the SCHRODINGER_NODEFILE.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.job.jobcontrol-module.html#calculate_njobs" class="summary-sig-name">calculate_njobs</a>(<span class="summary-sig-arg">host_list</span>=<span class="summary-sig-default">None</span>)</span><br />
      Derive the number of jobs from the specified host list.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="schrodinger.job.jobcontrol-module.html#__doc__" class="summary-name">__doc__</a> = <code title="&quot;&quot;&quot; 
Core job control for python.

There are currently four major sections of this module - &quot;Job database\
,&quot;
&quot;Job launching,&quot; &quot;Job backend,&quot; and &quot;Job hosts.&quot; The job database sect\
ion
deals with getting info about existing Jobs, the job launching section
...">&quot;<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="_version"></a><span class="summary-name">_version</span> = <code title="'$Revision: 1.105 $'"><code class="variable-quote">'</code><code class="variable-string">$Revision: 1.105 $</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="logger"></a><span class="summary-name">logger</span> = <code title="logging.getLogger(&quot;schrodinger.jobcontrol&quot;)">logging.getLogger(&quot;schrodinger.jobcontrol&quot;)</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="jobid_re"></a><span class="summary-name">jobid_re</span> = <code title="re.compile(r'(?im)^JobId:\s+(\S+)')">re.compile(r'<code class="re-flags">(?im)</code>^JobId:\s<code class="re-op">+</code><code class="re-group">(</code>\S<code class="re-op">+</code><code class="re-group">)</code>')</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="timestamp_format"></a><span class="summary-name">timestamp_format</span> = <code title="'%Y-%m-%d-%H:%M:%S'"><code class="variable-quote">'</code><code class="variable-string">%Y-%m-%d-%H:%M:%S</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="_job_manager"></a><span class="summary-name">_job_manager</span> = <code title="_JobManager()">_JobManager()</code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="_backend_singleton"></a><span class="summary-name">_backend_singleton</span> = <code title="None">None</code><br />
      hash(x)
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'schrodinger.job'"><code class="variable-quote">'</code><code class="variable-string">schrodinger.job</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="get_jobs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_jobs</span>(<span class="sig-arg">username</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">query</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">all</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return a list of Jobs in the database.</p>
  <p>The query can be &quot;all&quot; or &quot;active&quot;; otherwise, 
  raises an Exception.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="launch_job"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">launch_job</span>(<span class="sig-arg">cmd</span>,
        <span class="sig-arg">print_output</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">expandvars</span>=<span class="sig-default">True</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Run a process under job control and return a Job object. For a process
  to be under job control, it must print a valid JobId: line to stdout. If 
  such a line isn't printed, a RuntimeError will be raised.</p>
  <p>The cmd argument should be a list of command arguments (including the 
  executable) as expected by the subprocess module.</p>
  <p>If the executable is present in $SCHRODINGER or 
  $SCHRODINGER/utilities, an absolute path does not need to be 
  specified.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>print_output</code></strong> (bool) - Determines if the output from jlaunch is printed to the terminal 
          or not. Output will be logged (to stderr by default) if Python or
          JobControl debugging is turned on or if there is a launch 
          failure, even if 'print_output' is False.</li>
        <li><strong class="pname"><code>expandvars</code></strong> (bool) - If True, any environment variables of the form <code>$var</code> 
          or <code>${var}</code> will be expanded with their values by the 
          <code>os.path.expandvars</code> function.</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'>RuntimeError</strong></code> - If there is a problem launching the job (e.g., no JobId gets 
        printed).</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_fix_cmd"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_fix_cmd</span>(<span class="sig-arg">cmd</span>,
        <span class="sig-arg">expandvars</span>=<span class="sig-default">True</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>A function to clean up the command passed to launch_job.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cmd</code></strong> (list of strings) - A command in a form that can be passed to subprocess.Popen.</li>
        <li><strong class="pname"><code>expandvars</code></strong> (bool) - If True, any environment variables of the form <code>$var</code> 
          or <code>${var}</code> will be expanded with their values by the 
          <code>os.path.expandvars</code> function.</li>
    </ul></dd>
    <dt>Returns:</dt>
        <dd>A tuple of the fixed up command and a boolean for the shell 
          setting to pass to Popen.</dd>
  </dl>
</td></tr></table>
</div>
<a name="_fix_program_path"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_fix_program_path</span>(<span class="sig-arg">prog</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>If the program executable doesn't exist as a file and isn't an 
  absolute path, prepend the SCHRODINGER directory if it exists there.</p>
  <p>Return a list of command line arguments so this function can be used 
  from launch_job when 'cmd' is a list.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_backend"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_backend</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>A convenience function to see if we're running under job control. If 
  so, return a _Backend object. Otherwise, return None.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_runtime_path"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_runtime_path</span>(<span class="sig-arg">pathname</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return the runtime path for the input file 'pathname'.</p>
  <p>If the pathname is of a type that job control will not copy to the job
  directory or no runtime file can be found, returns the original path 
  name.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_hostfile"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_hostfile</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return the name of the host file.  The search path follows the 
  standard hierarchy (local dir, $HOME/.schrodinger, $SCHRODINGER).</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_hosts"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_hosts</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return a list of all Hosts in the schrodinger.hosts file.  Use 
  'username' to use the host info for someone other than the current 
  user.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_host"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_host</span>(<span class="sig-arg">name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return a Host object for the named host.</p>
  <p>Returns None if host couldn't be found.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_get_host"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_get_host</span>(<span class="sig-arg">name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return a Host object for 'name', with all attributes read in from the 
  corresponding entry in schrodinger.hosts file.  Requires that mmjob be 
  initialized.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="host_str_to_list"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">host_str_to_list</span>(<span class="sig-arg">hosts_str</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Convert a hosts string (Ex: &quot;galina:1 monica:4&quot;) to a list 
  of tuples. First value of each tuple is the host, second value is # of 
  cpus.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="host_list_to_str"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">host_list_to_str</span>(<span class="sig-arg">host_list</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Converts a hosts list (Ev: [ ('host1',1), ('host2', 10) ] ) to a 
  string. Output example: &quot;host1:1,host2:10&quot;</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_command_line_host_list"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_command_line_host_list</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return a list of (host, ncpu) tuples corresponding to the host list 
  that is specified on the command line.</p>
  <p>This function is meant to be called by scripts that are running under 
  a toplevel job control script but are not running under jlaunch.</p>
  <p>The host list is determined from the following sources:</p>
  <ol start="1">
    <li>
      SCHRODINGER_NODELIST
    </li>
    <li>
      JOBHOST (if only a single host is specified)
    </li>
    <li>
      &quot;localhost&quot; (if no host is specified)
    </li>
  </ol>
  <p>If no SCHRODINGER_NODELIST is present in the environment, None is 
  returned.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="get_backend_host_list"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_backend_host_list</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Return a list of (host, ncpu) tuples corresponding to the host list as
  determined from the SCHRODINGER_NODEFILE.</p>
  <p>This function is meant to be called from scripts that are running 
  under jlaunch (i.e. backend scripts).</p>
  <p>Returns None if SCHRODINGER_NODEFILE is not present in the 
  environment.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="calculate_njobs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">calculate_njobs</span>(<span class="sig-arg">host_list</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Derive the number of jobs from the specified host list.
This function is useful to determine number of subjobs if user didn't
specified the '-NJOBS' option.

@type host_list: String
                 or
                 List of tuples
@param host_list: String of hosts along with optional number of cpus
                  or
                  List of tuples consist of hosts along with optional
                  number of cpus

If host list is not specified then it uses get_command_line_host_list() to
determine njobs, else uses the user provided host list.

Please note: the host_list can be passes as string or as a list of tuples.
    For example: for -GLIDE_HOST &quot;host1 host2:4&quot; host_list would become
        [('host1', None), ('host2', 4)]

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== VARIABLES DETAILS ==================== -->
<a name="section-VariablesDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-VariablesDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__doc__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">__doc__</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
&quot;&quot;&quot; 
Core job control for python.

There are currently four major sections of this module - &quot;Job database<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
,&quot;
&quot;Job launching,&quot; &quot;Job backend,&quot; and &quot;Job hosts.&quot; The job database sect<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
ion
deals with getting info about existing Jobs, the job launching section
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="schrodinger-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Suite 2012 Schrodinger Python API</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Sep 25 02:22:45 2012
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
