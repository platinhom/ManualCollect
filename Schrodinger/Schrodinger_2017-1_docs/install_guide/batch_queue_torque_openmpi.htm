<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="Documentation.xml" data-mc-path-to-help-system="../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Installation and Jobs|Installation Guide|Preparing for Batch Queue Submission|Setup for Torque Queueing Systems">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" /><title>OpenMPI Configuration for Torque</title>
        <link href="../Resources/Stylesheets/docs.css" rel="stylesheet" />
        <script src="../Resources/Scripts/custom.modernizr.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/foundation.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body><a name="aanchor5106"></a>
        <MadCap:concept term="Installation/Jobs" /><a name="aanchor5107"></a>
        <MadCap:concept term="Installation and Jobs" /><a name="batch_queue_1876641381_784715"></a><a name="batch_queue_1876641381_84628"></a>
        <table class="NavLink" data-mc-conditions="Default.ScreenOnly">
            <tr class="NavLink">
                <td class="NavLeft"><span class="NavText">◀ <a class="NavLink MCXref xref xrefNavLink" href="batch_queue_torque_gpu.htm" xrefformat="{paratext}">GPU Configuration for Torque</a></span>
                </td>
                <td class="NavCenter"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="install_guideTOC.htm" xrefformat="{paratext}">Installation Guide</a></span>
                </td>
                <td class="NavRight">
					&#160;
                </td>
            </tr>
        </table>
        <h1 class="Title">OpenMPI Configuration for Torque</h1>
        <p>The TM API is used to allocate slots and launch processes in Open MPI for all of the family of PBS queuing systems. For more information of running jobs under Torque, check the OpenMPI FAQs at <a href="http://www.open-mpi.org/faq/?category=tm">http://www.open-mpi.org/faq/?category=tm</a>.</p>
        <p>Due to a naming conflict, components for Torque have been placed under <code>$SCHRODINGER/mmshare-v</code><i class="UserReplace">version</i><code>/lib/</code><i class="UserReplace">arch</i><code>/openmpi/disabled_lib/openmpi</code>. To use the Torque queuing system, you should copy those components to the standard location: </p><pre>
cd $SCHRODINGER/mmshare-v<i class="UserReplace">version</i>/<code>lib/</code><i class="UserReplace">arch</i><code>/</code>openmpi/disabled_lib/openmpi/
cp -rf mca_plm_tm.la mca_plm_tm.so mca_ras_tm.la mca_ras_tm.so \<br />&#160;&#160;&#160;$SCHRODINGER/mmshare-v<i class="UserReplace">version</i>/<code>lib/</code><i class="UserReplace">arch</i><code>/</code>openmpi/lib/openmpi
</pre>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note:&lt;/b&gt; "><span class="autonumber"><span><b>Note:</b> <![CDATA[ ]]></span></span>If you are currently running multiple queuing systems from the same installation you may need to create two installations, one with these changes, and one without them.</p>
        <p>The bundled Torque components depend on the <code>libtorque.so.2</code> library from Torque 2.2.1. If you do not have a compatible <code>libtorque.so.2</code> library on your system, you may also need to copy it:</p><pre>
cd $SCHRODINGER/mmshare-v<i class="UserReplace">version</i>/<code>lib/</code><i class="UserReplace">arch</i><code>/</code>openmpi/disabled_lib/
cp libtorque.so.2 $SCHRODINGER/mmshare-v<i class="UserReplace">version</i>/<code>lib/</code><i class="UserReplace">arch</i><code>/</code>openmpi/lib
</pre>
        <p>Here is an example of a hosts file entry:</p><pre>
# Request %NPROC% processors on a single node
Name: <i class="UserReplace">label</i>
Queue: Torque
Qargs: -q <i class="UserReplace">Torque-queue</i> -l nodes=1:ppn=%NPROC%
Host: <i class="UserReplace">submit-node</i>
Processors: <i class="UserReplace">processors-in-queue</i></pre>
        <table class="NavLink" data-mc-conditions="Default.ScreenOnly">
            <tr class="NavLink">
                <td class="NavLeft"><span class="NavText">◀ <a class="NavLink MCXref xref xrefNavLink" href="batch_queue_torque_gpu.htm" xrefformat="{paratext}">GPU Configuration for Torque</a></span>
                </td>
                <td class="NavCenter"><span class="NavText"><a class="NavLink MCXref xref xrefNavLink" href="install_guideTOC.htm" xrefformat="{paratext}">Installation Guide</a></span>
                </td>
                <td class="NavRight">
					&#160;
                </td>
            </tr>
        </table>
    </body>
</html>