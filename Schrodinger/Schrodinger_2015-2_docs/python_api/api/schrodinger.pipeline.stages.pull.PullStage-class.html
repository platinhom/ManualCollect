<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>schrodinger.pipeline.stages.pull.PullStage</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >2015-2Schrodinger Python API</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="schrodinger-module.html">Package&nbsp;schrodinger</a> ::
        <a href="schrodinger.pipeline-module.html">Package&nbsp;pipeline</a> ::
        <a href="schrodinger.pipeline.stages-module.html">Package&nbsp;stages</a> ::
        <a href="schrodinger.pipeline.stages.pull-module.html">Module&nbsp;pull</a> ::
        Class&nbsp;PullStage
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="schrodinger.pipeline.stages.pull.PullStage-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class PullStage</h1><p class="nomargin-top"></p>
<pre class="base-tree">
    UserDict.UserDict --+        
                        |        
UserDict.IterableUserDict --+    
                            |    
                  <a href="schrodinger.pipeline.stage.Stage-class.html">stage.Stage</a> --+
                                |
                               <strong class="uidshort">PullStage</strong>
</pre>

<hr />
<pre class="literalblock">

Stage for extracting a subset of ligands/compounds (and their variants)
from a second set of ligand files, given the number or percent to keep
from a first set of ligand files.  The first set must be ordered; i.e.,
the ligands to keep appear earliest in the set.  Compounds in the second
set that don't appear in the first set are ignored.

The keywords specific to this stage are...

    UNIQUEFIELD        The ligand property that identifies a compound.
                       Multiple ligands with the same UNIQUEFIELD value
                       are considered variants of the compound.  The
                       default is the structure title ('s_m_title').

    NUM_TO_KEEP        The number of compounds from the first set to
                       extract from the second set.  The compounds kept
                       are those that appear earliest in the first set.

    PERCENT_TO_KEEP    The percentage of compounds from the first set to
                       extract from the second set.  The compounds kept
                       are those that appear earliest in the first set.
                       Ignored if NUM_TO_KEEP is used.

    KEEP_CHARGES       If set to True, then after the ligand is pulled from
                       the original file, the partial charges are set to
                       what they were in the second file (For QPLD).
                       NOTE: If set, only ONE ligand with specified field
                       should be in the first file set.
                       NOTE: solvation_charge property is assummed to be
                       equal to the partial_charge.

    CHARGE_PROPERTY    If KEEP_CHARGES is True, the charges are taken from
                       this atom-level property.  Default is 'r_m_charge1'.
                       These charges from the first set are placed in the
                       'r_m_charge1' (partial_charge) and 'r_m_charge2'
                       (solvation_charge) properties of the pulled set, not
                       the CHARGE_PROPERTY in the pulled set.

If neither NUM_TO_KEEP or PERCENT_TO_KEEP are present, all compounds in
the first set are extracted from the second set.  In all cases, every
variant of a kept compound from the second set is extracted.

This stage takes one ordered input structure set that identifies the
ligands to extract, a second input structure set from which those ligands
are extracted, and it generates one output structure file set, each
containing about 100,000 structures.

Issues:
Keeping the first N compounds may not choose compounds from Glide results
in the proper manner. If the variants of a compound are chemically
distinct, it's appropriate to choose the top compounds based on GlideScore.
However, if the variants differ only in their conformations (such as when
saving multiple poses per ligand), Emodel (not GlideScore) should be used
to determine the representative variant of the compound for GlideScore
comparison with other compounds. Hopefully, this doesn't come up
often, because it would be very tricky to reflect the proper ordering
in the input files if there are both Ligprep-type variants and
conformation-variants.

</pre>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.pipeline.stages.pull.PullStage-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">*args</span>,
        <span class="summary-sig-arg">**kwargs</span>)</span><br />
      See class docstring.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="schrodinger.pipeline.stages.pull.PullStage-class.html#operate" class="summary-sig-name">operate</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Extract a subset of the first set compounds from the second set of 
      ligand input structure files.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="pullCompounds"></a><span class="summary-sig-name">pullCompounds</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="schrodinger.pipeline.stage.Stage-class.html">stage.Stage</a></code></b>:
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#JobDJOptions">JobDJOptions</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#__getitem__">__getitem__</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#__getstate__">__getstate__</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#addExpectedInput">addExpectedInput</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#addExpectedOutput">addExpectedOutput</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#addOutputFile">addOutputFile</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#checkFile">checkFile</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#checkFiles">checkFiles</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#checkInputs">checkInputs</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#checkParameters">checkParameters</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#checkProducts">checkProducts</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#debug">debug</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#dump">dump</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#error">error</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#exit">exit</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#genFileName">genFileName</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#genOutputFileName">genOutputFileName</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getAdjustedNJobs">getAdjustedNJobs</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getCleanupRequested">getCleanupRequested</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getHostList">getHostList</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getHostStr">getHostStr</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getInput">getInput</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getInputNames">getInputNames</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getJobDJ">getJobDJ</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getLocal">getLocal</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getMaxRetries">getMaxRetries</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getNJobs">getNJobs</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getName">getName</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getOutput">getOutput</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getOutputName">getOutputName</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getOutputNames">getOutputNames</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getRuntimePath">getRuntimePath</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getStageDirectory">getStageDirectory</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#getVerbosity">getVerbosity</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#hasCompleted">hasCompleted</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#hasStarted">hasStarted</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#info">info</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#iterInputs">iterInputs</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#log">log</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#lognoret">lognoret</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#mainProduct">mainProduct</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#outputRequested">outputRequested</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#reportParameters">reportParameters</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#requiredProduct">requiredProduct</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#requiredProductRuntime">requiredProductRuntime</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#run">run</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#runJobDJ">runJobDJ</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#setInput">setInput</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#setJobDJOptions">setJobDJOptions</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#setJobOptions">setJobOptions</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#setMainProduct">setMainProduct</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#setOutput">setOutput</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#setOutputName">setOutputName</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#updateJobdj">updateJobdj</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#validateValues">validateValues</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#waitForFileStatus">waitForFileStatus</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#waitForFiles">waitForFiles</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#warning">warning</a></code>
      </p>
    <div class="private">    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="schrodinger.pipeline.stage.Stage-class.html">stage.Stage</a></code></b> (private):
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#_adjustNJobs" onclick="show_private();">_adjustNJobs</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#_calcStsPerJob" onclick="show_private();">_calcStsPerJob</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#_getNCpus" onclick="show_private();">_getNCpus</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#_inputCheck" onclick="show_private();">_inputCheck</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#_minVersionPresent" onclick="show_private();">_minVersionPresent</a></code>,
      <code><a href="schrodinger.pipeline.stage.Stage-class.html#_readMessageFromDriver" onclick="show_private();">_readMessageFromDriver</a></code>
      </p></div>
    <p class="indent-wrapped-lines"><b>Inherited from <code>UserDict.IterableUserDict</code></b>:
      <code>__iter__</code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code>UserDict.UserDict</code></b>:
      <code>__cmp__</code>,
      <code>__contains__</code>,
      <code>__delitem__</code>,
      <code>__len__</code>,
      <code>__repr__</code>,
      <code>__setitem__</code>,
      <code>clear</code>,
      <code>copy</code>,
      <code>get</code>,
      <code>has_key</code>,
      <code>items</code>,
      <code>iteritems</code>,
      <code>iterkeys</code>,
      <code>itervalues</code>,
      <code>keys</code>,
      <code>pop</code>,
      <code>popitem</code>,
      <code>setdefault</code>,
      <code>update</code>,
      <code>values</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS METHODS ==================== -->
<a name="section-ClassMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>UserDict.UserDict</code></b>:
      <code>fromkeys</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>UserDict.UserDict</code></b>:
      <code>__hash__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">*args</span>,
        <span class="sig-arg">**kwargs</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>See class docstring.</p>
  <dl class="fields">
    <dt>Overrides:
        UserDict.UserDict.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="operate"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">operate</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Extract a subset of the first set compounds from the second set of 
  ligand input structure files.  Makes a list of compounds (identified by 
  UNIQUEFIELD) from the first set, pares down the list according to the 
  NUM_TO_KEEP or PERCENT_TO_KEEP setting, and extract all variants of those
  compounds from the second set.  Raises a RuntimeError if any input file 
  cannot be read, if there is a problem accessing the UNIQUEFIELD property 
  of any ligand, if there is a problem writing any output file, or if no 
  ligands are extracted.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="schrodinger.pipeline.stage.Stage-class.html#operate">stage.Stage.operate</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >2015-2Schrodinger Python API</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Sat May  9 06:31:24 2015
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
